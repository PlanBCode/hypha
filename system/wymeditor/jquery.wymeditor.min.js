if(function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0<=e.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],r={},o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:n[0]||""};if(o.browser&&(r[o.browser]=!0,r.version=o.version,r.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(r[o.platform]=!0),(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0),(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),r.rv||r.edge){var i="msie";r[o.browser=i]=!0}if(r.safari&&r.blackberry){var a="blackberry";r[o.browser=a]=!0}if(r.safari&&r.playbook){var s="playbook";r[o.browser=s]=!0}if(r.bb){var l="blackberry";r[o.browser=l]=!0}if(r.opr){var d="opera";r[o.browser=d]=!0}if(r.safari&&r.android){var u="android";r[o.browser=u]=!0}if(r.safari&&r.kindle){var c="kindle";r[o.browser=c]=!0}if(r.safari&&r.silk){var f="silk";r[o.browser=f]=!0}return r.name=o.browser,r.platform=o.platform,r}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser}),void 0===WYMeditor)var WYMeditor={};!function(){if(void 0===window.console&&"undefined"==typeof console){var e,t=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],n=function(){};for(WYMeditor.console={},e=0;e<t.length;e+=1)WYMeditor.console[t[e]]=n}else"undefined"!=typeof console?WYMeditor.console=console:window.console.firebug?WYMeditor.console=window.console:window.console&&(WYMeditor.console=window.console)}(),jQuery.extend(WYMeditor,{A:"a",ALT:"alt",BLOCKQUOTE:"blockquote",BODY:"body",CLASS:"class",CLASSES:"{Wym_Classes}",CLASSES_ITEMS:"{Wym_Classes_Items}",CLASS_NAME:"{Wym_Class_Name}",CLASS_TITLE:"{Wym_Class_Title}",CONTAINERS:"{Wym_Containers}",CONTAINERS_ITEMS:"{Wym_Containers_Items}",CONTAINER_CLASS:"{Wym_Container_Class}",CONTAINER_NAME:"{Wym_Container_Name}",CONTAINER_TITLE:"{Wym_Containers_Title}",DIRECTION:"{Wym_Direction}",DIV:"div",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HREF:"href",HTML:"{Wym_Html}",IFRAME:"{Wym_Iframe}",IFRAME_BASE_PATH:"{Wym_Iframe_Base_Path}",IFRAME_DEFAULT:"iframe/default/",IMG:"img",INSERT_HTML:"InsertHTML",INSTANCES:[],JQUERY_PATH:"{Wym_Jquery_Path}",LI:"li",LOGO:"{Wym_Logo}",NAME:"name",NBSP:"Â ",NEWLINE:"\n",OL:"ol",P:"p",PRE:"pre",REL:"rel",SKINS:[],SRC:"src",STATUS:"{Wym_Status}",STRING:"string",STRINGS:[],TABLE:"table",TD:"td",TH:"th",TITLE:"title",TOOLS:"{Wym_Tools}",TOOLS_ITEMS:"{Wym_Tools_Items}",TOOL_CLASS:"{Wym_Tool_Class}",TOOL_NAME:"{Wym_Tool_Name}",TOOL_TITLE:"{Wym_Tool_Title}",TR:"tr",UL:"ul",VERSION:"1.1.1",WYM_INDEX:"wym_index",WYM_PATH:"{Wym_Wym_Path}",EXEC_COMMANDS:{BOLD:"Bold",ITALIC:"Italic",SUPERSCRIPT:"Superscript",SUBSCRIPT:"Subscript",CREATE_LINK:"CreateLink",UNLINK:"Unlink",FORMAT_BLOCK:"FormatBlock",INSERT_IMAGE:"InsertImage",UNDO:"Undo",REDO:"Redo",INSERT_LINEBREAK:"InsertLineBreak",INSERT_ORDEREDLIST:"InsertOrderedList",INSERT_UNORDEREDLIST:"InsertUnorderedList",INDENT:"Indent",OUTDENT:"Outdent",TOGGLE_HTML:"ToggleHtml"},ROOT_CONTAINERS:["blockquote","div","h1","h2","h3","h4","h5","h6","p","pre"],FORBIDDEN_ROOT_CONTAINERS:["a","b","em","i","span","strong","sub","sup"],BLOCKS:["address","blockquote","dd","div","dl","dt","fieldset","form","h1","h2","h3","h4","h5","h6","hr","li","noscript","ol","p","pre","table","tbody","td","tfoot","th","thead","tr","ul"],BLOCKING_ELEMENTS:["blockquote","pre","table"],NON_CONTAINING_ELEMENTS:["br","col","hr","img"],NO_CARET_ELEMENTS:["blockquote","br","col","colgroup","dl","hr","img","ol","table","tbody","tfoot","thead","tr","ul"],INLINE_ELEMENTS:["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","q","samp","script","select","small","span","strong","sub","sup","textarea","tt","var"],NON_BLOCKING_ELEMENTS:["div","h1","h2","h3","h4","h5","h6","p"],LIST_TYPE_ELEMENTS:["ol","ul"],HEADING_ELEMENTS:["h1","h2","h3","h4","h5","h6"],POTENTIAL_LIST_ELEMENTS:["blockquote","div","h1","h2","h3","h4","h5","h6","p","pre","td"],POTENTIAL_TABLE_INSERT_ELEMENTS:["blockquote","div","h1","h2","h3","h4","h5","h6","li","p","pre"],INLINE_TABLE_INSERTION_ELEMENTS:["li"],SELECTABLE_TABLE_ELEMENTS:["caption","td","th"],BLOCKING_ELEMENT_SPACER_CLASS:"wym-blocking-element-spacer",EDITOR_ONLY_CLASS:"wym-editor-only",RESIZE_HANDLE_CLASS:"wym-resize-handle",CLASSES_REMOVED_BY_PARSER:["apple-style-span"],KEY_CODE:{B:66,BACKSPACE:8,COMMAND:224,CTRL:17,CURSOR:[37,38,39,40],DELETE:46,DOWN:40,END:35,ENTER:13,HOME:36,I:73,LEFT:37,R:82,RIGHT:39,TAB:9,UP:38},POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS:[8,13,37,38,39,40,46],EVENTS:{postBlockMaybeCreated:"wym-postBlockMaybeCreated",postIframeInitialization:"wym-postIframeInitialization",postModification:"wym-postModification",postUndo:"wym-postUndo",postRedo:"wym-postRedo"},NODE_TYPE:{ELEMENT:1,ATTRIBUTE:2,TEXT:3},editor:function(e,t){if(jQuery.getWymeditorByTextarea(e[0]))throw"It seems that this textarea already belongs to a WYMeditor instance.";var n=this;n._index=WYMeditor.INSTANCES.push(n)-1,n.element=e,n._options=t,n._options.wymPath=n._options.wymPath||WYMeditor._computeWymPath(),n._options.basePath=n._options.basePath||WYMeditor._computeBasePath(n._options.wymPath),n._options.iframeBasePath=n._options.iframeBasePath||n._options.basePath+WYMeditor.IFRAME_DEFAULT,n._init()},EXTERNAL_MODULES:{}}),jQuery.fn.wymeditor=function(e){return e=jQuery.extend({html:"",basePath:!1,wymPath:!1,iframeBasePath:!1,jQueryPath:!1,skin:"default",lang:"en",direction:"ltr",customCommands:[],structureRules:{defaultRootContainer:"p"},boxHtml:String()+"<div class='wym_box'><div class='wym_area_top'>"+WYMeditor.TOOLS+"</div><div class='wym_area_left'></div><div class='wym_area_right'>"+WYMeditor.CONTAINERS+WYMeditor.CLASSES+"</div><div class='wym_area_main'>"+WYMeditor.HTML+WYMeditor.IFRAME+WYMeditor.STATUS+"</div><div class='wym_area_bottom'>"+WYMeditor.LOGO+"</div></div>",logoHtml:String()+'<a class="wym_wymeditor_link" href="http://www.wymeditor.org/">WYMeditor</a>',iframeHtml:String()+'<div class="wym_iframe wym_section"><iframe src="'+WYMeditor.IFRAME_BASE_PATH+'wymiframe.html"></iframe></div>',toolsHtml:String()+'<div class="wym_tools wym_section"><h2>{Tools}</h2><ul>'+WYMeditor.TOOLS_ITEMS+"</ul></div>",toolsItemHtml:String()+'<li class="'+WYMeditor.TOOL_CLASS+'"><a href="#" name="'+WYMeditor.TOOL_NAME+'" title="'+WYMeditor.TOOL_TITLE+'">'+WYMeditor.TOOL_TITLE+"</a></li>",toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:"Superscript",css:"wym_tools_superscript"},{name:"Subscript",title:"Subscript",css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link wym_opens_dialog"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image wym_opens_dialog"},{name:"InsertTable",title:"Table",css:"wym_tools_table wym_opens_dialog"},{name:"Paste",title:"Paste_From_Word",css:"wym_tools_paste wym_opens_dialog"},{name:"ToggleHtml",title:"HTML",css:"wym_tools_html"},{name:"Preview",title:"Preview",css:"wym_tools_preview wym_opens_dialog"}],containersHtml:String()+'<div class="wym_containers wym_section"><h2>{Containers}</h2><ul>'+WYMeditor.CONTAINERS_ITEMS+"</ul></div>",containersItemHtml:String()+'<li class="'+WYMeditor.CONTAINER_CLASS+'"><a href="#" name="'+WYMeditor.CONTAINER_NAME+'">'+WYMeditor.CONTAINER_TITLE+"</a></li>",containersItems:[{name:"P",title:"Paragraph",css:"wym_containers_p"},{name:"H1",title:"Heading_1",css:"wym_containers_h1"},{name:"H2",title:"Heading_2",css:"wym_containers_h2"},{name:"H3",title:"Heading_3",css:"wym_containers_h3"},{name:"H4",title:"Heading_4",css:"wym_containers_h4"},{name:"H5",title:"Heading_5",css:"wym_containers_h5"},{name:"H6",title:"Heading_6",css:"wym_containers_h6"},{name:"PRE",title:"Preformatted",css:"wym_containers_pre"},{name:"BLOCKQUOTE",title:"Blockquote",css:"wym_containers_blockquote"},{name:"TH",title:"Table_Header",css:"wym_containers_th"}],classesHtml:String()+'<div class="wym_classes wym_section"><h2>{Classes}</h2><ul>'+WYMeditor.CLASSES_ITEMS+"</ul></div>",classesItemHtml:String()+'<li class="wym_classes_'+WYMeditor.CLASS_NAME+'"><a href="#" name="'+WYMeditor.CLASS_NAME+'">'+WYMeditor.CLASS_TITLE+"</a></li>",classesItems:[],statusHtml:String()+'<div class="wym_status wym_section"><h2>{Status}</h2></div>',htmlHtml:String()+'<div class="wym_html wym_section"><h2>{Source_Code}</h2><textarea class="wym_html_val"></textarea></div>',boxSelector:".wym_box",toolsSelector:".wym_tools",toolsListSelector:" ul",containersSelector:".wym_containers",classesSelector:".wym_classes",htmlSelector:".wym_html",iframeSelector:".wym_iframe iframe",iframeBodySelector:".wym_iframe",statusSelector:".wym_status",toolSelector:".wym_tools a",containerSelector:".wym_containers a",classSelector:".wym_classes a",htmlValSelector:".wym_html_val",updateSelector:".wymupdate",updateEvent:"click",stringDelimiterLeft:"{",stringDelimiterRight:"}",preInit:null,preBind:null,postInit:null},e),e=jQuery.extend(WYMeditor.DEFAULT_DIALOG_OPTIONS,e),this.each(function(){this._wym=new WYMeditor.editor(jQuery(this),e)})},jQuery.extend({wymeditors:function(e){return WYMeditor.INSTANCES[e]}}),jQuery.extend({getWymeditorByTextarea:function(e){var t;if(!e||!e.tagName||"textarea"!==e.tagName.toLowerCase())throw"jQuery.getWymeditorByTextarea requires a textarea element.";for(t=0;t<WYMeditor.INSTANCES.length;t++)if(e===WYMeditor.INSTANCES[t].element[0])return WYMeditor.INSTANCES[t];return!1}}),jQuery.extend({copyPropsFromObjectToObject:function(e,t,n){var r,o,i,a={};for(r=0;r<n.length;r++)i=e[o=n[r]],a[o]=i;jQuery.extend(t,a)}}),WYMeditor.isInternetExplorerPre11=function(){return!!(jQuery.browser.msie&&jQuery.browser.versionNumber<11)},WYMeditor.isInternetExplorer11OrNewer=function(){return!!(jQuery.browser.msie&&11<=jQuery.browser.versionNumber)},WYMeditor._computeWymPath=function(){var e=jQuery(jQuery.grep(jQuery("script"),function(e){return e.src?e.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)||e.src.match(/\/core\.js(\?.*)?$/):null}));return 0<e.length?e.attr("src"):(WYMeditor.console.warn("Error determining wymPath. No base WYMeditor file located."),WYMeditor.console.warn("Assuming wymPath to be the current URL"),WYMeditor.console.warn("Please pass a correct wymPath option"),"")},WYMeditor._computeBasePath=function(e){var t=e.lastIndexOf("/");return e.substr(0,t+1)},jQuery.fn.isPhantomNode=function(){return this[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&!/[^\t\n\r ]/.test(this[0].data)},jQuery.fn.nextContentsUntil=function(e,t){var n,r=[],o=this.get(0);if(e=e||"",t=t||"",!o)return jQuery();for(o=o.nextSibling;o&&!jQuery(o).is(e);)r.push(o),o=o.nextSibling;return n=jQuery(r),t?n.filter(t):n},jQuery.fn.nextAllContents=function(){return jQuery(this).nextContentsUntil("","")},jQuery.fn.prevContentsUntil=function(e,t){var n,r=[],o=this.get(0);if(e=e||"",t=t||"",!o)return jQuery();for(o=o.previousSibling;o&&!jQuery(o).is(e);)r.push(o),o=o.previousSibling;return n=jQuery(r),t?n.filter(t):n},jQuery.fn.prevAllContents=function(){return jQuery(this).prevContentsUntil("","")},WYMeditor.isPhantomNode=function(e){return e.nodeType===WYMeditor.NODE_TYPE.TEXT&&!/[^\t\n\r ]/.test(e.data)},WYMeditor.isPhantomString=function(e){return!/[^\t\n\r ]/.test(e)},jQuery.fn.addBack=jQuery.fn.addBack?jQuery.fn.addBack:jQuery.fn.andSelf,jQuery.fn.parentsOrSelf=function(e){return e?this.parents().addBack().filter(e):this.parents().addBack()},WYMeditor.Helper={replaceAllInStr:function(e,t,n){var r=new RegExp(t,"g");return e.replace(r,n)},insertAt:function(e,t,n){return e.substr(0,n)+t+e.substring(n)},trim:function(e){return e.replace(/^(\s*)|(\s*)$/gm,"")},arrayContains:function(e,t){var n;for(n=0;n<e.length;n+=1)if(e[n]===t)return!0;return!1},indexOf:function(e,t){var n,r=-1;for(n=0;n<e.length;n+=1)if(e[n]===t){r=n;break}return r},_getFromArrayByName:function(e,t){var n,r;for(n=0;n<e.length;n+=1)if((r=e[n]).name===t)return r;return null},getAllEventTypes:function(e){var t=[];for(var n in e)0===n.indexOf("on")&&"onmousemove"!==n&&t.push(n.slice(2));return t.join(" ")}},WYMeditor._getWymClassForBrowser=function(){switch(jQuery.browser.name){case"msie":return WYMeditor.isInternetExplorerPre11()?WYMeditor.WymClassTridentPre7:!!WYMeditor.isInternetExplorer11OrNewer()&&WYMeditor.WymClassTrident7;case"mozilla":return WYMeditor.WymClassGecko;case"chrome":return WYMeditor.WymClassBlink;case"safari":return WYMeditor.WymClassSafari}return jQuery.browser.webkit?WYMeditor.WymClassWebKit:(WYMeditor.console.warn("WYMeditor could not instantiate: this browser is not supported"),!1)},WYMeditor.editor.prototype._openPopupWindow=function(e){var t=this._options.basePath;return window.open(jQuery.browser.msie?t+"popup.html":"","wymPopupWindow",e)},WYMeditor.editor.prototype.dialog=function(e,t,n){var r,o,i,a=this,s=WYMeditor.DIALOGS,l=a._options;if(jQuery.isPlainObject(e)?r=e:"string"==typeof e&&s.hasOwnProperty(e)&&(WYMeditor.console.warn("DEPRECATION WARNING: `dialog` method received a string dialog name. Please provide a dialog object instead."),r=s[e]),!0!==jQuery.isPlainObject(r)&&"string"!=typeof n)throw"`dialog` method: No dialog provided";if(r&&(!0!==r.hasOwnProperty("title")||!0!==r.hasOwnProperty("shouldOpen")||!0!==r.hasOwnProperty("getBodyHtml")))throw"Expected the dialog object to contain at least `title`, `shouldOpen` and `getbodyHtml`";return(!r||!0===r.shouldOpen.call(a))&&(a.opened_dialog&&a.opened_dialog.close(),i=n||r.getBodyHtml.call(a),i='<div class="wym_dialog">'+(i=a.replaceStrings(i))+"</div>",e=jQuery(i).insertAfter(a.element),r&&r.getBodyClass&&jQuery(e).addClass(r.getBodyClass.call(a)),o=a.opened_dialog={close:function(){e.remove(),a.opened_dialog=void 0}},jQuery.isFunction(l.preInitDialog)&&l.preInitDialog(a,o),r&&r.initialize&&r.initialize.call(a,o),r&&r.submitHandler&&jQuery("form.wym_dialog_submit",e).submit(function(){r.submitHandler.call(a,o)}),jQuery(l.cancelSelector,e).click(function(){o.close(),a.focusOnDocument()}),jQuery.isFunction(l.postInitDialog)&&l.postInitDialog(a,o),o)},WYMeditor.DIALOGS={CreateLink:{title:"Link",shouldOpen:function(){var e;return!0===this.hasSelection()&&(!1!==(e=this.selectedContainer())&&(!this.selection().isCollapsed||"a"===e.tagName.toLowerCase()))},getBodyHtml:function(){return this._options.dialogLinkHtml||String()+'<form class="wym_dialog_submit"><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_LINK+'" /><legend>{Link}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_href" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row"><label>{Relationship}</label><input type="text" class="wym_rel" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form>'},getBodyClass:function(){return this._options.dialogSelectorLink||"wym_dialog_link"},initialize:function(e){var t,n,r,o,i,a,s=e.document,l=this._options,d=this.selectedContainer();d&&(t=jQuery(l.hrefSelector,s),n=jQuery(l.titleSelector,s),r=jQuery(l.relSelector,s),o=jQuery(d).attr(WYMeditor.HREF),i=jQuery(d).attr(WYMeditor.TITLE),a=jQuery(d).attr(WYMeditor.REL),t.val(o),n.val(i),r.val(a))},submitHandler:function(e){var t=this._options,n=jQuery(t.hrefSelector,e.document).val(),r=jQuery(t.titleSelector,e.document).val(),o=jQuery(t.relSelector,e.document).val();this.link({href:n,title:r,rel:o}),e.close()}},InsertImage:{title:"Image",shouldOpen:function(){var e=this.getSelectedImage();return!(!e||!e.tagName||"img"!==e.tagName.toLowerCase())||this.hasSelection()},getBodyHtml:function(){return this._options.dialogImageHtml||String()+'<form class="wym_dialog_submit"><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_IMAGE+'" /><legend>{Image}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_src" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Alternative_Text}</label><input type="text" class="wym_alt" value="" size="40" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form>'},getBodyClass:function(){return this._options.dialogImageSelector||"wym_dialog_image"},initialize:function(e){var t,n,r,o,i,a,s=e.document,l=this._options,d=this.getSelectedImage();d&&(t=jQuery(l.srcSelector,s),n=jQuery(l.titleSelector,s),r=jQuery(l.altSelector,s),o=jQuery(d).attr(WYMeditor.SRC),i=jQuery(d).attr(WYMeditor.TITLE),a=jQuery(d).attr(WYMeditor.ALT),t.val(o),n.val(i),r.val(a))},submitHandler:function(e){var t,n=this,r=n._options,o=n.getSelectedImage();t={src:jQuery(r.srcSelector,e.document).val(),title:jQuery(r.titleSelector,e.document).val(),alt:jQuery(r.altSelector,e.document).val()},n.focusOnDocument(),o?(n._updateImageAttrs(o,t),n.registerModification()):n.insertImage(t),e.close()}},InsertTable:{title:"Table",shouldOpen:function(){return!0===this.hasSelection()&&!0===this.selection().isCollapsed},getBodyHtml:function(){return this._options.dialogTableHtml||String()+'<form class="wym_dialog_submit"><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_TABLE+'" /><legend>{Table}</legend><div class="row"><label>{Caption}</label><input type="text" class="wym_caption" value="" size="40" /></div><div class="row"><label>{Summary}</label><input type="text" class="wym_summary" value="" size="40" /></div><div class="row"><label>{Number_Of_Rows}</label><input type="text" class="wym_rows" value="3" size="3" /></div><div class="row"><label>{Number_Of_Cols}</label><input type="text" class="wym_cols" value="2" size="3" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form>'},getBodyClass:function(){return this._options.dialogTableSelector||"wym_dialog_table"},submitHandler:function(e){var t=this._options,n=e.document,r=jQuery(t.rowsSelector,n).val(),o=jQuery(t.colsSelector,n).val(),i=jQuery(t.captionSelector,n).val(),a=jQuery(t.summarySelector,n).val();this.insertTable(r,o,i,a),e.close()}},Paste:{title:"Paste_From_Word",shouldOpen:function(){return this.hasSelection()},getBodyHtml:function(){return this._options.dialogPasteHtml||String()+'<form class="wym_dialog_submit"><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_PASTE+'" /><fieldset><legend>{Paste_From_Word}</legend><div class="row"><textarea class="wym_text" rows="10" cols="50" autofocus="autofocus"></textarea></div><div class="row"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form>'},getBodyClass:function(){return this._options.dialogPasteSelector||"wym_dialog_paste"},submitHandler:function(e){var t;t=jQuery(this._options.textSelector,e.document).val(),this.paste(t),e.close()}},Preview:{title:"Preview",shouldOpen:function(){return!0},getBodyHtml:function(){return this._options.dialogPreviewHtml||this.html()},getWindowFeatures:function(){return["menubar=no","titlebar=no","toolbar=no","resizable=no","width=560","height=300","top=0","left=0","scrollbars=yes"].join(",")},getBodyClass:function(){return this._options.dialogPreviewSelector||"wym_dialog_preview"}}},WYMeditor.DIALOG_TITLE="{Wym_Dialog_Title}",WYMeditor.DIALOG_BODY="{Wym_Dialog_Body}",WYMeditor.DIALOG_BUTTON_SELECTOR=".wym_opens_dialog a",WYMeditor.DEFAULT_DIALOG_OPTIONS={hrefSelector:".wym_href",srcSelector:".wym_src",titleSelector:".wym_title",relSelector:".wym_rel",altSelector:".wym_alt",textSelector:".wym_text",rowsSelector:".wym_rows",colsSelector:".wym_cols",captionSelector:".wym_caption",summarySelector:".wym_summary",submitSelector:"form",cancelSelector:".wym_cancel",previewSelector:"",dialogLinkSelector:".wym_dialog_link",dialogImageSelector:".wym_dialog_image",dialogTableSelector:".wym_dialog_table",dialogPasteSelector:".wym_dialog_paste",dialogPreviewSelector:".wym_dialog_preview"},WYMeditor.editor.prototype._init=function(){var wym=this,WymClass,browserInstance,SaxListener,prop,h,iframeHtml,boxHtml,aTools,sTools,oTool,sTool,i,aClasses,sClasses,oClass,sClass,aContainers,sContainers,sContainer,oContainer;if(WymClass=WYMeditor._getWymClassForBrowser(),WymClass){for(prop in browserInstance=new WymClass(wym),jQuery.isFunction(wym._options.preInit)&&wym._options.preInit(wym),wym.parser=null,wym.helper=null,SaxListener=new WYMeditor.XhtmlSaxListener,wym.parser=new WYMeditor.XhtmlParser(SaxListener),wym.helper=new WYMeditor.XmlHelper,browserInstance)wym[prop]=browserInstance[prop];for(wym._box=jQuery(wym.element).hide().after(wym._options.boxHtml).next().addClass("wym_box_"+wym._index),jQuery.isFunction(jQuery.fn.data)&&(jQuery.data(wym._box.get(0),WYMeditor.WYM_INDEX,wym._index),jQuery.data(wym.element.get(0),WYMeditor.WYM_INDEX,wym._index)),h=WYMeditor.Helper,iframeHtml=wym._options.iframeHtml,iframeHtml=h.replaceAllInStr(iframeHtml,WYMeditor.IFRAME_BASE_PATH,wym._options.iframeBasePath),boxHtml=jQuery(wym._box).html(),boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.LOGO,wym._options.logoHtml),boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.TOOLS,wym._options.toolsHtml),boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.CONTAINERS,wym._options.containersHtml),boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.CLASSES,wym._options.classesHtml),boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.HTML,wym._options.htmlHtml),boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.IFRAME,iframeHtml),boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.STATUS,wym._options.statusHtml),aTools=eval(wym._options.toolsItems),sTools="",i=0;i<aTools.length;i+=1)oTool=aTools[i],sTool="",oTool.name&&oTool.title&&(sTool=wym._options.toolsItemHtml),sTool=h.replaceAllInStr(sTool,WYMeditor.TOOL_NAME,oTool.name),sTool=h.replaceAllInStr(sTool,WYMeditor.TOOL_TITLE,wym._options.stringDelimiterLeft+oTool.title+wym._options.stringDelimiterRight),sTool=h.replaceAllInStr(sTool,WYMeditor.TOOL_CLASS,oTool.css),sTools+=sTool;for(boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.TOOLS_ITEMS,sTools),aClasses=eval(wym._options.classesItems),sClasses="",i=0;i<aClasses.length;i+=1)oClass=aClasses[i],sClass="",oClass.name&&oClass.title&&(sClass=wym._options.classesItemHtml),sClass=h.replaceAllInStr(sClass,WYMeditor.CLASS_NAME,oClass.name),sClass=h.replaceAllInStr(sClass,WYMeditor.CLASS_TITLE,oClass.title),sClasses+=sClass;for(boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.CLASSES_ITEMS,sClasses),aContainers=eval(wym._options.containersItems),sContainers="",i=0;i<aContainers.length;i+=1)oContainer=aContainers[i],sContainer="",oContainer.name&&oContainer.title&&(sContainer=wym._options.containersItemHtml),sContainer=h.replaceAllInStr(sContainer,WYMeditor.CONTAINER_NAME,oContainer.name),sContainer=h.replaceAllInStr(sContainer,WYMeditor.CONTAINER_TITLE,wym._options.stringDelimiterLeft+oContainer.title+wym._options.stringDelimiterRight),sContainer=h.replaceAllInStr(sContainer,WYMeditor.CONTAINER_CLASS,oContainer.css),sContainers+=sContainer;boxHtml=h.replaceAllInStr(boxHtml,WYMeditor.CONTAINERS_ITEMS,sContainers),boxHtml=wym.replaceStrings(boxHtml),jQuery(wym._box).html(boxHtml),jQuery(wym._box).find(wym._options.htmlSelector).hide(),wym.documentStructureManager=new WYMeditor.DocumentStructureManager(wym,wym._options.structureRules.defaultRootContainer),wym.iframeInitialized=!1,wym._iframe=jQuery(wym._box).find("iframe")[0],jQuery(wym._iframe).on("load",function(){wym._onEditorIframeLoad(wym)}),wym.element.attr("data-wym-initialized","yes"),wym._initSkin()}},WYMeditor.editor.prototype._assignWymDoc=function(){this._doc=this._iframe.contentDocument},WYMeditor.editor.prototype._isDesignModeOn=function(){return"string"==typeof this._doc.designMode&&"on"===this._doc.designMode.toLowerCase()},WYMeditor.editor.prototype._onEditorIframeLoad=function(e){e._assignWymDoc(),e._enableDesignModeOnDocument(),e._afterDesignModeOn()},WYMeditor.editor.prototype.get$Buttons=function(){var e;return e=[this._options.toolSelector,this._options.containerSelector,this._options.classSelector].join(", "),jQuery(this._box).find(e)},WYMeditor.editor.prototype.focusOnDocument=function(){this._iframe.contentWindow.focus()},WYMeditor.editor.prototype.registerModification=function(e){this.undoRedo._add(),e||this.nativeEditRegistration.edited.reset(),jQuery(this.element).trigger(WYMeditor.EVENTS.postModification)},WYMeditor.editor.prototype._bindFocusOnDocumentToButtons=function(){var e=this,t=e.get$Buttons();(t=t.parent().not(".wym_opens_dialog").children("a")).click(function(){e.focusOnDocument()})},WYMeditor.editor.prototype._uiQuirks=function(){},WYMeditor.editor.prototype._afterDesignModeOn=function(){var e=this;!0!==e.iframeInitialized&&(e._assignWymDoc(),e.$body().addClass("wym_iframe combokeys"),e._doc.title=e._index,jQuery("html",e._doc).attr("dir",e._options.direction),e.keyboard=new WYMeditor.Keyboard(e),e.keyboard._attachDefaultKeyboardShortcuts(),e._docEventQuirks(),e._initializeDocumentContent(),jQuery.isFunction(e._options.preBind)&&e._options.preBind(e),e._bindUIEvents(),e.iframeInitialized=!0,jQuery.isFunction(e._options.postInit)&&e._options.postInit(e),e._bindFocusOnDocumentToButtons(),e._uiQuirks(),e._listen(),e.undoRedo=new WYMeditor.UndoRedo(e),e.nativeEditRegistration=new WYMeditor.NativeEditRegistration(e),e.ih=new WYMeditor.ImageHandler(e),jQuery(e.element).trigger(WYMeditor.EVENTS.postIframeInitialization,e))},WYMeditor.editor.prototype._initializeDocumentContent=function(){var e=this;e._options.html?e.html(e._options.html):e.html(e.element[0].value)},WYMeditor.editor.prototype._docEventQuirks=function(){},WYMeditor.editor.prototype._bindUIEvents=function(){var wym=this,$toolbarButtons=jQuery(wym._box).find(wym._options.toolSelector),dialogButtonSelector=WYMeditor.DIALOG_BUTTON_SELECTOR,$html_val;$toolbarButtons.not(dialogButtonSelector).click(function(){return wym.exec(jQuery(this).attr(WYMeditor.NAME)),!1}),$toolbarButtons.filter(dialogButtonSelector).click(function(){var e=jQuery(this).attr(WYMeditor.NAME),t=WYMeditor.DIALOGS[e];return wym.dialog(t),!1}),jQuery(wym._box).find(wym._options.containerSelector).click(function(){return wym.setRootContainer(jQuery(this).attr(WYMeditor.NAME)),!1}),$html_val=jQuery(wym._box).find(wym._options.htmlValSelector),$html_val.keyup(function(){wym.$body().html(jQuery(this).val())}),$html_val.focus(function(){jQuery(this).toggleClass("hasfocus")}),$html_val.blur(function(){jQuery(this).toggleClass("hasfocus")}),jQuery(wym._box).find(wym._options.classSelector).click(function(){var classButton=this,aClasses=eval(wym._options.classesItems),sName=jQuery(classButton).attr(WYMeditor.NAME),oClass=WYMeditor.Helper._getFromArrayByName(aClasses,sName),jqexpr;return oClass&&(jqexpr=oClass.expr,wym.toggleClass(sName,jqexpr)),!1}),jQuery(wym._options.updateSelector).bind(wym._options.updateEvent,function(){wym.update()}),wym.$body().bind("focus",function(){!0!==wym._isDesignModeOn()&&wym._enableDesignModeOnDocument()})},WYMeditor.editor.prototype._enableDesignModeOnDocument=function(){if(this._isDesignModeOn())throw"Expected `designMode` to be off.";try{this._doc.designMode="On"}catch(e){}"function"==typeof this._designModeQuirks&&this._designModeQuirks()},WYMeditor.editor.prototype.get$WymBox=function(){return this._box},WYMeditor.editor.prototype.vanish=function(){var e,t=WYMeditor.INSTANCES;for(this._box.remove(),this.element.removeAttr("data-wym-initialized").attr("data-wym-vanished","").show(),t.splice(this._index,1),e=0;e<t.length;e++)t[e]._index=e},WYMeditor.editor.prototype._exec=function(e,t){var n;if("string"!=typeof e)throw"`_exec` expected a String `cmd`";if(t&&"string"!=typeof t)throw"`_exec` expected a String `param`";return(this.selectedContainer()!==this.body()||e===WYMeditor.EXEC_COMMANDS.INSERT_IMAGE||e===WYMeditor.EXEC_COMMANDS.FORMAT_BLOCK)&&(this._doc.execCommand(e,!1,t),0===(n=jQuery(this.selectedContainer()).filter("span").not("[id]")).length||(""===n.attr("class")&&"font-weight: normal;"===n.attr("style")||"apple-style-span"===n.attr("class").toLowerCase())&&n.contents().unwrap(),!0)},WYMeditor.editor.prototype.rawHtml=function(e){if("string"!=typeof e)return this.$body().html();this.$body().html(e),this.update()},WYMeditor.editor.prototype.html=function(e){var t=this;if("string"!=typeof e)return t.parser.parse(t.rawHtml());t.rawHtml(t.parser.parse(e)),t.prepareDocForEditing()},WYMeditor.editor.prototype.exec=function(e){var t,n=this;switch(e){case WYMeditor.EXEC_COMMANDS.TOGGLE_HTML:n.update(),n.toggleHtml();break;case WYMeditor.EXEC_COMMANDS.INSERT_ORDEREDLIST:n._insertOrderedList();break;case WYMeditor.EXEC_COMMANDS.INSERT_UNORDEREDLIST:n._insertUnorderedList();break;case WYMeditor.EXEC_COMMANDS.INDENT:n.indent();break;case WYMeditor.EXEC_COMMANDS.OUTDENT:n.outdent();break;case WYMeditor.EXEC_COMMANDS.UNDO:n.undoRedo.undo();break;case WYMeditor.EXEC_COMMANDS.REDO:n.undoRedo.redo();break;default:t=!1,jQuery.each(n._options.customCommands,function(){if(e===this.name)return t=!0,this.run.apply(n),!1}),t||!0===n._exec(e)&&n.registerModification()}},WYMeditor.editor.prototype.selection=function(){var e=this._iframe;return window.rangy&&!rangy.initialized&&rangy.init(),rangy.getIframeSelection(e)},WYMeditor.editor.prototype.nodeAfterSel=function(){var e=this.selection();if(e.anchorNode.tagName&&-1===jQuery.inArray(e.anchorNode.tagName.toLowerCase(),WYMeditor.NON_CONTAINING_ELEMENTS)){if(0===e.anchorNode.childNodes.length)return;return e.anchorNode.childNodes[e.anchorOffset]}if(e.focusNode.nodeType===WYMeditor.NODE_TYPE.TEXT&&e.focusNode.data.length===e.focusOffset){if(!e.focusNode.nextSibling)return;return e.focusNode.nextSibling}return e.focusNode},WYMeditor.editor.prototype.get$CommonParent=function(e,t){if("object"!=typeof e||"number"!=typeof e.nodeType||"object"!=typeof t||"number"!=typeof t.nodeType)throw"`one` and `two` must be DOM nodes.";if(e.nodeType===WYMeditor.NODE_TYPE.TEXT&&(e=e.parentNode),t.nodeType===WYMeditor.NODE_TYPE.TEXT&&(t=t.parentNode),e===t)return jQuery(e);var n,r=jQuery(e),o=jQuery(t);if(0===(n=r.parents().addBack().has(o).last()).length)throw"Couldn't find common parent. This shouldn't happen.";return n},WYMeditor.editor.prototype.selectedContainer=function(){var e,t,n,r;return!0===this.hasSelection()&&(e=this.selection(),t=jQuery(e.anchorNode),n=jQuery(e.focusNode),t[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&(t=t.parent()),n[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&(n=n.parent()),t[0]===n[0]?t[0]:(0===(r=t.has(n)).length&&(r=n.has(t)),0!==r.length&&r[0]))},WYMeditor.editor.prototype.selected=function(){return WYMeditor.console.warn("The function WYMeditor.editor.selected() is deprecated. Use WYMeditor.editor.selectedContainer"),this.selectedContainer()},WYMeditor.editor.prototype.isBlockNode=function(e){return!!(e.tagName&&-1<jQuery.inArray(e.tagName.toLowerCase(),WYMeditor.BLOCKS))},WYMeditor.editor.prototype.isInlineNode=function(e){return e.nodeType===WYMeditor.NODE_TYPE.TEXT||-1<jQuery.inArray(e.tagName.toLowerCase(),WYMeditor.INLINE_ELEMENTS)},WYMeditor.editor.prototype.isListNode=function(e){return!!(e.tagName&&-1<jQuery.inArray(e.tagName.toLowerCase(),WYMeditor.LIST_TYPE_ELEMENTS))},WYMeditor.editor.prototype.unwrapIfMeaninglessSpan=function(e){var t,n=jQuery(e),r=0,o=["_wym_visited","length","ie8_length"];if(!e||void 0===e.tagName||"span"!==e.tagName.toLowerCase())return!1;for(;r<e.attributes.length;){if(t=e.attributes[r].nodeName,-1===jQuery.inArray(t,o))return!1;r++}return n.before(n.contents()),n.remove(),!0},WYMeditor.editor.prototype.getRootContainer=function(){return jQuery(this.selectedContainer()).parentsOrSelf().not("html, body, blockquote").last()[0]},WYMeditor.editor.prototype.setRootContainer=function(e){var t,n,r,o,i,a,s,l=this,d=null;if(e.toLowerCase()===WYMeditor.TH){switch((d=l.selectedContainer()).tagName.toLowerCase()){case WYMeditor.TD:case WYMeditor.TH:break;default:t=[WYMeditor.TD,WYMeditor.TH],d=l.findUp(l.selectedContainer(),t)}null!==d&&(e=WYMeditor.TD,d.tagName.toLowerCase()===WYMeditor.TD&&(e=WYMeditor.TH),l.restoreSelectionAfterManipulation(function(){return l.switchTo(d,e,!1),!0}),l.update(),l.registerModification())}else if(t=[WYMeditor.P,WYMeditor.DIV,WYMeditor.H1,WYMeditor.H2,WYMeditor.H3,WYMeditor.H4,WYMeditor.H5,WYMeditor.H6,WYMeditor.PRE,WYMeditor.BLOCKQUOTE],d=l.findUp(l.selectedContainer(),t)){if(e.toLowerCase()===WYMeditor.BLOCKQUOTE)if(null===(r=l.findUp(l.selectedContainer(),WYMeditor.BLOCKQUOTE)))n=l._doc.createElement(e),d.parentNode.insertBefore(n,d),n.appendChild(d),l.setCaretIn(n.firstChild);else{for(0<(i=(o=r.childNodes).length)&&(a=o.item(0)),s=0;s<i;s+=1)r.parentNode.insertBefore(o.item(0),r);r.parentNode.removeChild(r),a&&l.setCaretIn(a)}else l.restoreSelectionAfterManipulation(function(){return l.switchTo(d,e,!1),!0});l.update(),l.registerModification()}return!1},WYMeditor.editor.prototype.isForbiddenRootContainer=function(e){return-1<jQuery.inArray(e.toLowerCase(),WYMeditor.FORBIDDEN_ROOT_CONTAINERS)},WYMeditor.editor.prototype.keyCanCreateBlockElement=function(e){return-1<jQuery.inArray(e,WYMeditor.POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS)},WYMeditor.editor.prototype.toggleClass=function(e,t){var n;1!==(n=jQuery(this.getSelectedImage())).length&&(n=jQuery(this.selectedContainer()).parentsOrSelf(t).last()),n.toggleClass(e),n.attr(WYMeditor.CLASS)||n.removeAttr(this._class),this.registerModification()},WYMeditor.editor.prototype.getSelectedImage=function(){var e,t;return!0===this.hasSelection()&&(!1===this.selection().isCollapsed&&(1===(e=this._getSelectedNodes()).length&&(!(!(t=e[0]).tagName||"img"!==t.tagName.toLowerCase())&&t)))},WYMeditor.editor.prototype.findUp=function(e,t){if(null==e)return null;"#text"===e.nodeName&&(e=e.parentNode);var n,r,o=e.tagName.toLowerCase();if(typeof t===WYMeditor.STRING)for(;o!==t&&o!==WYMeditor.BODY;)o=(e=e.parentNode).tagName.toLowerCase();else for(n=!1;!n&&o!==WYMeditor.BODY;){for(r=0;r<t.length;r+=1)if(o===t[r]){n=!0;break}if(!n){if(null===(e=e.parentNode))return null;o=e.tagName.toLowerCase()}}return o===WYMeditor.BODY?null:e},WYMeditor.editor.prototype.switchTo=function(e,t,n){var r,o,i=jQuery(e),a=e.attributes;if(!e.tagName)throw"This must be an element.";if("img"===e.tagName.toLowerCase())throw"Will not change the type of an 'img' element.";if(r=this._doc.createElement(t),jQuery(r).append(e.childNodes),i.replaceWith(r),!n)for(o=0;o<a.length;++o)r.setAttribute(a.item(o).nodeName,a.item(o).value);return r},WYMeditor.editor.prototype.replaceStrings=function(e){var t,n=this;if(!WYMeditor.STRINGS[n._options.lang])return WYMeditor.console.error("WYMeditor: language '"+n._options.lang+"' not found."),WYMeditor.console.error("Unable to perform i10n."),e;for(t in WYMeditor.STRINGS[n._options.lang])WYMeditor.STRINGS[n._options.lang].hasOwnProperty(t)&&(e=WYMeditor.Helper.replaceAllInStr(e,n._options.stringDelimiterLeft+t+n._options.stringDelimiterRight,WYMeditor.STRINGS[n._options.lang][t]));return e},WYMeditor.editor.prototype._encloseString=function(e){return this._options.stringDelimiterLeft+e+this._options.stringDelimiterRight},WYMeditor.editor.prototype.getCurrentState=function(){var e,t=this,n={},r=t._iframe.contentWindow;return t.hasSelection()&&(e=t.selection()),e&&e.anchorNode===t.body()&&0===e.anchorOffset&&e.isCollapsed&&(e=!1),e&&(n.savedSelection=rangy.saveSelection(r)),n.html=t.rawHtml(),n.savedSelection&&(rangy.restoreSelection(n.savedSelection),n.savedSelection.restored=!1,delete n.savedSelection.win,delete n.savedSelection.doc),n},WYMeditor.editor.prototype.hasSelection=function(){return!0===rangy.isSelectionValid(this._iframe.contentWindow)&&0!==this.selection().rangeCount},WYMeditor.editor.prototype._setSingleSelectionRange=function(e){this.selection().setSingleRange(e)},WYMeditor.editor.prototype.status=function(e){jQuery(this._box).find(this._options.statusSelector).html(e)},WYMeditor.editor.prototype.update=function(){var e;e=this.html(),jQuery(this.element).val(e),jQuery(this._box).find(this._options.htmlValSelector).not(".hasfocus").val(e)},WYMeditor.editor.prototype.prepareDocForEditing=function(){var e=this;e._spaceBlockingElements(),e._fixDoubleBr(),0===e.$body().children().length&&e.$body().append("<br />"),jQuery(e.element).trigger(WYMeditor.EVENTS.postBlockMaybeCreated,e)},WYMeditor.editor.prototype._spaceBlockingElements=function(){var t,e,n,r,o,i=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION.join(", "),a=this.$body(),s=a.children();t=jQuery.browser.mozilla?'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'" _moz_editor_bogus_node="TRUE" _moz_dirty=""/>':'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'"/>',0<s.length&&(e=jQuery(s[0]),n=jQuery(s[s.length-1]),e.is(i)&&e.before(t),n.is(i)&&n.after(t)),r=this._getBlockSepSelector(),a.find(r).before(t),o=this._getBlockInListSepSelector(),a.find(o).each(function(){var e=jQuery(this);e.next(i).length||e.next("br").length||e.after(t)})},WYMeditor.editor.prototype._getBlockSepSelector=function(){var t,e=this,r=[],o=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION;return void 0!==e._blockSpacersSel||(t=jQuery.grep(e.documentStructureManager.structureRules.validRootContainers,function(e){return-1===jQuery.inArray(e,o)}),jQuery.each(o,function(e,n){jQuery.each(o,function(e,t){r.push(n+" + "+t)})}),jQuery.each(o,function(e,n){jQuery.each(t,function(e,t){r.push(n+" + "+t),r.push(t+" + "+n)})}),e._blockSpacersSel=r.join(", ")),e._blockSpacersSel},WYMeditor.editor.prototype._getBlockInListSepSelector=function(){var r=[];return void 0!==this._blockInListSpacersSel||(jQuery.each(WYMeditor.LIST_TYPE_ELEMENTS,function(e,n){jQuery.each(WYMeditor.BLOCKING_ELEMENTS,function(e,t){r.push(n+" "+t)})}),this._blockInListSpacersSel=r.join(", ")),this._blockInListSpacersSel},WYMeditor.editor.prototype._fixDoubleBr=function(){var e,t=this.$body();t.children("br + br").filter(":not(pre br)").remove(),t.find("p + br").next("p").prev("br").remove(),0<(e=t.find("p + br").slice(-1)).length&&0===e.next().length&&e.remove()},WYMeditor.editor.prototype.link=function(e){var t,n,r,o=this;if(!0!==jQuery.isPlainObject(e))throw"Expected a plain object.";!0===e.hasOwnProperty("href")&&"string"==typeof e.href&&0!==e.href.length&&((t=jQuery(o.selectedContainer())).is("a")?r=t:(n=o.uniqueStamp(),o._exec(WYMeditor.EXEC_COMMANDS.CREATE_LINK,n),r=jQuery("a[href="+n+"]",o.body())),0!==r.length&&(r.attr(e),o.registerModification()))},WYMeditor.editor.prototype.insertImage=function(e){var t,n,r=this;if(!0!==jQuery.isPlainObject(e))throw"Expected a plain object.";!0===e.hasOwnProperty("src")&&"string"==typeof e.src&&0!==e.src.length&&(t=r.uniqueStamp(),r._exec(WYMeditor.EXEC_COMMANDS.INSERT_IMAGE,t),0!==(n=jQuery("img[src="+t+"]",r.body())).length&&(n.attr(e),r.$body().find(".Apple-style-span").children().unwrap(),r.registerModification()))},WYMeditor.editor.prototype._updateImageAttrs=function(e,t){var n=jQuery(e);t.src!==n.attr("src")&&(n.data("DimensionsRatio",null),n.removeAttr("height").removeAttr("width")),n.attr(t)},WYMeditor.editor.prototype.toggleHtml=function(){jQuery(this._box).find(this._options.htmlSelector).toggle()},WYMeditor.editor.prototype.uniqueStamp=function(){return"wym"+(new Date).getTime()},WYMeditor.editor.prototype._handleMultilineBlockContainerPaste=function(e,t,n,r){var o,i,a,s,l,d,u,c,f,p,h;for(i=jQuery(p),s="p",t.is("li")&&(s="li"),n.splitBoundaries(),h=(p=e.findUp(n.startContainer,["p","h1","h2","h3","h4","h5","h6","li"])).tagName,l=[],d=[],jQuery(p).contents().each(function(e,t){(u=n.compareNode(t))===n.NODE_BEFORE||u===n.NODE_BEFORE_AND_AFTER&&n.startOffset===n.startContainer.length?l.push(t):d.push(t)}),o=0;o<l.length;o++)jQuery(l[o]).remove();for(o=0;o<d.length;o++)jQuery(d[o]).remove();for(0<l.length&&jQuery(p).prepend(l),0<d.length&&((c=jQuery("<"+h+"></"+h+">",e._doc)).insertAfter(jQuery(p)),c.append(d)),f=r.splice(0,1)[0].split(WYMeditor.NEWLINE).join("<br />"),jQuery(p).html(jQuery(p).html()+f),i=jQuery(p),o=0;o<r.length;o++)a="<"+s+">"+r[o].split(WYMeditor.NEWLINE).join("<br />")+"</"+s+">",i=jQuery(a,e._doc).insertAfter(i)},WYMeditor.editor.prototype.paste=function(e){var t,n,r,o,i,a,s=this,l=s.selectedContainer(),d=jQuery(l),u="",c=!1,f=s.selection().getRangeAt(0);if(f.collapse(!0),1===(t=e.split(new RegExp(WYMeditor.NEWLINE+"{2,}","g"))).length&&(c=!0),void 0===l||l&&l.tagName.toLowerCase()===WYMeditor.BODY)if(c)jQuery("<p>"+t[0]+"</p>",s._doc).appendTo(s._doc.body);else for("p",o=t.length-1;0<=o;o-=1)for(u="<p>"+t[o].split(WYMeditor.NEWLINE).join("<br />")+"</p>",n=(a=jQuery(u,s._doc)).length-1;0<=n;n--)f.insertNode(a[n]);else if(c||d.is("pre"))i=s._doc.createTextNode(e),f.insertNode(i);else if(d.is("p,h1,h2,h3,h4,h5,h6,li"))s._handleMultilineBlockContainerPaste(s,d,f,t);else for(o=(r=e.split(WYMeditor.NEWLINE)).length-1;0<=o;o-=1)i=s._doc.createTextNode(r[o]),f.insertNode(i),0<o&&f.insertNode(jQuery("<br />",s._doc).get(0));s.registerModification()},WYMeditor.editor.prototype.insert=function(e){var t,n,r=!!this.hasSelection()&&this.selection();r&&(n=(t=r.getRangeAt(0)).createContextualFragment(e),t.deleteContents(),t.insertNode(n))},WYMeditor.editor.prototype.canSetCaretBefore=function(e){if(e.nodeType===WYMeditor.NODE_TYPE.TEXT)return!0;if(e.tagName&&"br"===e.tagName.toLowerCase()){if(!e.previousSibling)return!0;if(e.previousSibling.tagName&&"br"===e.previousSibling.tagName.toLowerCase())return!0;if(this.isBlockNode(e.previousSibling))return!0;if(e.previousSibling.nodeType===WYMeditor.NODE_TYPE.TEXT)return!0}return!1},WYMeditor.editor.prototype.setCaretBefore=function(e){var t=rangy.createRange(this._doc),n=this.selection();if(!this.canSetCaretBefore(e))throw"Can't set caret before this node.";t.selectNode(e),t.collapse(!0),n.setSingleRange(t)},WYMeditor.editor.prototype.canSetCaretIn=function(e){if(e.nodeType===WYMeditor.NODE_TYPE.TEXT||e.tagName&&-1<jQuery.inArray(e.tagName.toLowerCase(),WYMeditor.NO_CARET_ELEMENTS))return!1;if(this.isInlineNode(e)){if(0===e.childNodes.length)return!1;WYMeditor.console.warn("Can set a non-collapsed selection. Rangy issue #209.")}return!0},WYMeditor.editor.prototype.setCaretIn=function(e){var t=rangy.createRange(this._doc),n=this.selection();if(!this.canSetCaretIn(e))throw"The element must be able to contain other elements. Perhaps  you would like to use `setCaretBefore`, instead.";t.selectNodeContents(e),this.isInlineNode(e)?WYMeditor.console.warn("Can't set a collapsed selection. Setting a non-collapsed selection, instead. Rangy issue #209."):t.collapse(!0),n.setSingleRange(t)},WYMeditor.editor.prototype._splitListItemContents=function(e){var t,n,r,o=!1,i={itemContents:[],sublistContents:[]};for(t=e.contents(),n=0;n<t.length;n++)r=t.get(n),o||jQuery(r).is("ol,ul")?(o=!0,i.sublistContents.push(r)):i.itemContents.push(r);return i},WYMeditor.editor.prototype._joinAdjacentLists=function(e,t){var n;void 0!==e&&void 0!==t&&e.nextSibling===t&&e.tagName.toLowerCase()===t.tagName.toLowerCase()&&((n=jQuery(t).contents()).unwrap(),n.detach(),jQuery(e).append(n))},WYMeditor.editor.prototype._indentSingleItem=function(e){var t,n,r,o,i,a,s,l,d,u;n=(t=jQuery(e)).parent()[0].tagName.toLowerCase(),o=this._splitListItemContents(t),i=jQuery(o.sublistContents),jQuery(o.itemContents),0===(a=t.prev().filter("li")).length&&('<li class="spacer_li"></li>',t.before('<li class="spacer_li"></li>'),a=t.prev()),0<(s=a.contents().last().filter("ol,ul")).length?(s.append(t),i.detach(),a.append(i),l=i.first(),this._joinAdjacentLists(s.get(0),l.get(0))):(0<i.length?(i.detach(),a.append(i),s=i.first()):(r="<"+n+"></"+n+">",a.append(r),s=a.contents().last()),s.prepend(t)),t.next().is(".spacer_li")&&((u=(d=t.next(".spacer_li")).contents()).detach(),t.append(u),d.remove())},WYMeditor.editor.prototype._outdentSingleItem=function(e){var t,n,r,o,i,a,s,l,d,u;n=(t=jQuery(e)).parent()[0].tagName.toLowerCase(),t.parent().parent().is("ol,ul,li")&&(t.parent().parent().is("li")||(WYMeditor.console.log("Attempting to fix invalid list nesting before outdenting."),this._fixInvalidListNesting(e)),o=this._splitListItemContents(t),i=jQuery(o.sublistContents),jQuery(o.itemContents),0!==(a=t.parent().parent("li")).length?(s=t.parent(),l=t.nextAllContents(),d=s.nextAllContents(),t.detach(),a.after(t),0<i.length&&(r="<"+n+'><li class="spacer_li"></li></'+n+">",t.append(r),u=t.children().last(),i.detach(),u.children("li").append(i)),0<l.length&&(void 0===u&&(r="<"+n+"></"+n+">",t.append(r),u=t.children().last()),l.detach(),u.append(l)),0<d.length&&(d.detach(),0<t.contents().length&&t.contents().last()[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&d[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&t.append("<br />"),t.append(d)),0===s.contents().length&&s.remove(),0===a.contents().length&&a.remove()):WYMeditor.console.error("Invalid list. No parentLi found, so aborting outdent"))},WYMeditor.editor.prototype._fixInvalidListNesting=function(e,t){var n,r,o=e;if(void 0===t&&(t=!1),!o)return t;for(;o.parentNode&&(n=o.parentNode).nodeType===WYMeditor.NODE_TYPE.ELEMENT&&("ol"===(r=n.tagName.toLowerCase())||"ul"===r||"li"===r);)o=n;return jQuery(o).is("li")?(WYMeditor.console.log("Correcting orphaned root li before correcting invalid list nesting."),this._correctOrphanedListItem(o),this._fixInvalidListNesting(o,!0)):jQuery(o).is("ol,ul")?this._fixInvalidlyNestedList(o,t):(WYMeditor.console.error("Can't correct invalid list nesting. No root list found"),t)},WYMeditor.editor.prototype._isPOrDivAfterEnterInEmptyNestedLi=function(e){if(-1<jQuery.inArray(e.tagName.toLowerCase(),WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS)&&"li"===e.parentNode.tagName.toLowerCase())switch(e.childNodes.length){case 0:return!0;case 1:if(e.childNodes[0].tagName&&"br"===e.childNodes[0].tagName.toLowerCase())return!0;if(e.childNodes[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&e.childNodes[0].data===WYMeditor.NBSP)return!0}return!1},WYMeditor.editor.prototype._isSpilledListAfterEnterInEmptyLi=function(e){return!!("li"===e.tagName.toLowerCase()&&e.previousSibling&&this.isListNode(e.previousSibling)&&e.previousSibling.previousSibling&&"li"===e.previousSibling.previousSibling.tagName.toLowerCase()&&this.isListNode(e.parentNode))},WYMeditor.editor.prototype._handlePotentialEnterInEmptyNestedLi=function(e,t){if(e!==WYMeditor.KEY_CODE.ENTER)return null;var n=this;n._isPOrDivAfterEnterInEmptyNestedLi(t)?n._replaceNodeWithBrAndSetCaret(t):n._isSpilledListAfterEnterInEmptyLi(t)&&(n._appendSiblingsUntilNextLiToPreviousLi(t),n._replaceNodeWithBrAndSetCaret(t))},WYMeditor.editor.prototype._replaceNodeWithBrAndSetCaret=function(e){var t=jQuery(e);(e.previousSibling&&!e.previousSibling.tagName||"br"!==e.previousSibling.tagName.toLowerCase()&&this.isInlineNode(e.previousSibling))&&t.before("<br />"),t.before("<br />"),this.setCaretBefore(e.previousSibling),t.remove()},WYMeditor.editor.prototype._appendSiblingsUntilNextLiToPreviousLi=function(e){var t,n=jQuery(e),r=n.parent().contents(),o=n.prevAll("li").first(),i=n.nextAll("li").first(),a=o.index()+1;t=1===i.length?r.slice(a,i.index()):r.slice(a),o.append(t)},WYMeditor.editor.prototype._correctOrphanedListItem=function(e){var t,n,r,o,i=jQuery();t=jQuery(e).prevContentsUntil(":not(li)"),n=jQuery(e).nextContentsUntil(":not(li)"),(o=(i=(i=(i=i.add(t)).add(e)).add(n))[0].previousSibling)&&jQuery(o).is("ol,ul")?r=o:(i.before("<ol></ol>"),r=i.prev()[0]),jQuery(r).append(i)},WYMeditor.editor.prototype._fixInvalidlyNestedList=function(e,t){var n,r,o,i,a,s,l=e,d=e,u=!1;for(void 0!==t&&(u=t);d;)if(d._wym_visited){if(d._wym_visited=!1,d===l)break;d=d.previousSibling?d.previousSibling:d.parentNode}else{if(d!==l&&!jQuery(d).is("li"))for(o=d;o.parentNode&&(o=o.parentNode,!jQuery(o).is("li"))&&o.nodeType===WYMeditor.NODE_TYPE.ELEMENT;)if("ol"===(r=o.tagName.toLowerCase())||"ul"===r){for(WYMeditor.console.log("Fixing orphaned list content"),u=!0,i=[d],n=d,a=null;n.previousSibling;){if(n=n.previousSibling,jQuery(n).is("li")){a=n;break}i.push(n)}i.reverse(),a||1!==i.length||jQuery(d.nextSibling).is("li")&&(a=d.nextSibling),a||(jQuery(i[0]).before('<li class="spacer_li"></li>'),a=jQuery(i[0]).prev()[0]),1===(s=jQuery(a).contents().last()).length&&s[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&i[0].nodeType===WYMeditor.NODE_TYPE.TEXT&&jQuery(a).append("<br />"),jQuery(a).append(jQuery(i));break}d.lastChild?(d._wym_visited=!0,d=d.lastChild):d=d.previousSibling?d.previousSibling:d.parentNode}return u},WYMeditor.editor.prototype._getCommonParentList=function(e,n){var t,r,o,i=!0;return 0===(e=jQuery(e).filter("li")).length?null:(t=e[0],r=jQuery(t).parents("ol,ul"),0===(r=n?r.first():r.last()).length?null:(o=r[0],jQuery(e).each(function(e,t){r=jQuery(t).parents("ol,ul"),0!==(r=n?r.first():r.last()).length&&r[0]===o||(i=!1)}),i?o:null))},WYMeditor.editor.prototype.deselect=function(){this.selection().removeAllRanges(),this.body().blur()},WYMeditor.editor.prototype._getSelectedNodes=function(){var e=this.selection();return!0===this.hasSelection()&&e.getAllRanges().reduce(function(e,t){return e.concat(t.getNodes())},[])},WYMeditor.editor.prototype._getSelectedListItems=function(e){var t,n,r,o=this;return e.isCollapsed?(t=jQuery(o.selectedContainer())).closest("li, table").is("table")?[]:t.closest("li"):0===(n=jQuery(o._getSelectedNodes())).closest("li, table").filter("li").length?[]:(r=n.not("li, ol, ul").add(n.find(".rangySelectionBoundary")).add(n.filter(function(){return o.nodeType===WYMeditor.NODE_TYPE.TEXT})).closest("li").add(n.filter("li:empty")).not(n.filter("table").find("li")),jQuery.unique(r.get()))},WYMeditor.editor.prototype._selectionOnlyInList=function(e){var t,n,r;for(r=0;r<e.rangeCount;++r){if(t=this.findUp(e.getRangeAt(r).startContainer,["li"]),n=this.findUp(e.getRangeAt(r).endContainer,["li"]),!t||!n)return!1;if(!this._getCommonParentList([t,n],!1))return!1}return!0},WYMeditor.editor.prototype.indent=function(){var t,e,n,r=this,o=r.selection();return e=function(){var e=r.selection(),t=r.get$CommonParent(e.anchorNode,e.focusNode)[0],n=r.findUp(t,["ol","ul","li"]);return r._fixInvalidListNesting(n)},r.restoreSelectionAfterManipulation(e)?(r.registerModification(),!0):(o=r.selection(),!!r._selectionOnlyInList(o)&&(0!==(t=r._getSelectedListItems(o)).length&&(e=function(){var e=!1;for(n=0;n<t.length;n++)r._indentSingleItem(t[n]),e=!0;return e},r.restoreSelectionAfterManipulation(e)&&r.registerModification())))},WYMeditor.editor.prototype.outdent=function(){var t,e,n,r=this,o=r.selection();return e=function(){var e=r.selection(),t=r.get$CommonParent(e.anchorNode,e.focusNode)[0],n=r.findUp(t,["ol","ul","li"]);return r._fixInvalidListNesting(n)},r.restoreSelectionAfterManipulation(e)?(r.registerModification(),!0):(o=r.selection(),!!r._selectionOnlyInList(o)&&(0!==(t=r._getSelectedListItems(o)).length&&(e=function(){var e=!1;for(n=0;n<t.length;n++)r._outdentSingleItem(t[n]),e=!0;return e},r.restoreSelectionAfterManipulation(e)&&r.registerModification())))},WYMeditor.editor.prototype.restoreSelectionAfterManipulation=function(e){var t=rangy.saveSelection(rangy.dom.getIframeWindow(this._iframe)),n=!0;try{(n=e())?rangy.restoreSelection(t):rangy.removeMarkers(t)}catch(e){WYMeditor.console.error("Error during manipulation"),WYMeditor.console.error(e),rangy.removeMarkers(t)}return n},WYMeditor.editor.prototype._insertOrderedList=function(){var e,t=this;return e=function(){var e=jQuery(t._getSelectedNodes()).parents().addBack().filter("ol, ul, li").last()[0];return e=e||t.selectedContainer(),t._fixInvalidListNesting(e)},t.restoreSelectionAfterManipulation(e)?(t.registerModification(),!0):(e=function(){return t.insertList("ol")},t.restoreSelectionAfterManipulation(e)&&t.registerModification())},WYMeditor.editor.prototype._insertUnorderedList=function(){var e,t=this;return e=function(){var e=jQuery(t._getSelectedNodes()).parents().addBack().filter("ol, ul, li").last()[0];return e=e||t.selectedContainer(),t._fixInvalidListNesting(e)},t.restoreSelectionAfterManipulation(e)?(t.registerModification(),!0):(e=function(){return t.insertList("ul")},t.restoreSelectionAfterManipulation(e)&&t.registerModification())},WYMeditor.editor.prototype.insertList=function(e){var t,n,r,o,i=this,a=i.selection();if(0<(t=i._getSelectedListItems(a)).length){if(!(0<(n=jQuery(t)).parent(":not("+e+")").length))return i._removeItemsFromList(n),!0;if(r=i._getCommonParentList(t,!0))return i.changeListType(r,e),!0}return!!(o=i.findUp(i.selectedContainer(),WYMeditor.POTENTIAL_LIST_ELEMENTS))&&(i.convertToList(o,e),!0)},WYMeditor.editor.prototype.changeListType=function(e,t){return this.switchTo(e,t)},WYMeditor.editor.prototype.convertToList=function(e,t){var n,r,o=jQuery(e);return n="<"+t+"><li></li></"+t+">",this.findUp(e,WYMeditor.ROOT_CONTAINERS)===e?(o.wrapInner(n),(r=o.children()).unwrap(),r.get(0)):(o.wrapInner(n),(r=o.children()).get(0))},WYMeditor.editor.prototype._removeItemsFromList=function(e){var t,n,r,o,i,a,s,l=this,d=l.documentStructureManager.structureRules.defaultRootContainer;for(n=0;n<e.length;n++){for(1===(t=1===(t=e.eq(n)).parent().parent("li, th, td").length?jQuery(l.switchTo(t[0],"span",!1)):jQuery(l.switchTo(t[0],d,!1))).parent().children().length?(t.parent().before(t),t.next().remove()):t[0]===t.parent().children().first()[0]?t.parent().before(t):t[0]!==t.parent().children().first()[0]&&t[0]!==t.parent().children().last()[0]?(t.parent().before("<"+t.parent()[0].tagName+"/>"),jQuery(t.prevAll().toArray().reverse()).appendTo(t.parent().prev()),t.parent().before(t)):t[0]===t.parent().children().last()[0]&&t.parent().after(t),r=0;r<t.contents().length;r++)if(o=t.contents()[r],l.isBlockNode(o)&&"rangySelectionBoundary"!==o.className&&"br"!==o.tagName.toLowerCase()){if(i=t.contents().slice(r),t[0].tagName.toLowerCase()===d)for(a=0;a<i.length;a++)(s=i.eq(a))[0].nodeType===WYMeditor.NODE_TYPE.TEXT?s.wrap("<"+d+" />"):s[0].tagName&&!l.isBlockNode(s[0])&&"br"!==s[0].tagName.toLowerCase()&&l.switchTo(i[a],d,!1);t.after(t.contents().slice(r));break}l.$body().children("br").remove(),"span"===t[0].tagName.toLowerCase()&&(0===t.contents(":not(.rangySelectionBoundary)").length||t.contents(":not(.rangySelectionBoundary)").length===t.contents("br").length?(t.before(t.contents(".rangySelectionBoundary")),t.remove()):((t[0].previousSibling&&t[0].previousSibling.nodeType===WYMeditor.NODE_TYPE.TEXT||0<t.prevAll(":not(.rangySelectionBoundary)").length&&!1===l.isBlockNode(t.prevAll(":not(.rangySelectionBoundary)")[0]))&&t.before("<br />"),(t[0].nextSibling&&t[0].nextSibling.nodeType===WYMeditor.NODE_TYPE.TEXT||0<t.nextAll(":not(.rangySelectionBoundary)").length&&!1===l.isBlockNode(t.nextAll(":not(.rangySelectionBoundary)")[0]))&&t.after("<br />"),t[0].attributes,l.unwrapIfMeaninglessSpan(t[0])))}l.prepareDocForEditing()},WYMeditor.editor.prototype.insertTable=function(e,t,n,r){if(!(e<=0||t<=0)){var o,i,a,s,l=this,d=l._doc.createElement(WYMeditor.TABLE),u=null;for(d.createCaption().innerHTML=n,o=0;o<e;o+=1)for(u=d.insertRow(o),i=0;i<t;i+=1)u.insertCell(i);if(""!==r&&jQuery(d).attr("summary",r),(a=jQuery(l.findUp(l.selectedContainer(),WYMeditor.POTENTIAL_TABLE_INSERT_ELEMENTS)).get(0))&&a.parentNode)if(-1<jQuery.inArray(a.nodeName.toLowerCase(),WYMeditor.INLINE_TABLE_INSERTION_ELEMENTS)){if(s=l.selection().focusNode,-1<jQuery.inArray(s.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS)||-1<jQuery.inArray(s.parentNode.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS))for(;s.nodeName.toLowerCase()!==WYMeditor.TABLE;)s=s.parentNode;s.nodeName.toLowerCase()===WYMeditor.LI?jQuery(s).append(d):jQuery(s).after(d)}else jQuery(a).after(d);else l.$body().append(d);return l._afterInsertTable(d),l.prepareDocForEditing(),l.registerModification(),d}},WYMeditor.editor.prototype._afterInsertTable=function(){},WYMeditor.editor.prototype._listen=function(){var e=this;jQuery(e._doc).bind("paste",function(){e._handlePasteEvent()})},WYMeditor.editor.prototype._handlePasteEvent=function(){var e=this;window.setTimeout(function(){jQuery(e.element).trigger(WYMeditor.EVENTS.postBlockMaybeCreated,e)},20)},WYMeditor.editor.prototype._selectSingleNode=function(e){var t,n;if(!e)throw"Expected a node";t=this.selection(),(n=rangy.createRangyRange()).selectNode(e),t.setSingleRange(n)},WYMeditor.editor.prototype._initSkin=function(){var e=this;jQuery(e._box).addClass("wym_skin_"+e._options.skin),void 0!==WYMeditor.SKINS[e._options.skin]?"function"==typeof WYMeditor.SKINS[e._options.skin].init&&WYMeditor.SKINS[e._options.skin].init(e):WYMeditor.console.warn("Chosen skin _"+e.options.skin+"_ not found.")},WYMeditor.editor.prototype.body=function(){var e;if(!this._doc.body)throw"The document seems to have no body element.";if(!(e=this._doc.body).tagName||"body"!==e.tagName.toLowerCase())throw"The document's body doesn't seem to be a `body` element.";return e},WYMeditor.editor.prototype.$body=function(){var e;return e=this.body(),jQuery(e)},WYMeditor.editor.prototype.doesElementContainSelection=function(e){var t,n,r,o,i,a;if(!0!==this.hasSelection())return!1;if(t=jQuery(e),!0===this.selection().isCollapsed)return e===(n=this.selectedContainer())||0<t.has(n).length;for(r=jQuery(this._getSelectedNodes()),o=0;o<r.length;o++)for(i=r.eq(o).parents(),a=0;a<i.length;a++)if(i[a]===e)return!0;return!1},WYMeditor.DocumentStructureManager=function(e,t){this._wym=e,this.structureRules=WYMeditor.DocumentStructureManager.DEFAULTS,this.setDefaultRootContainer(t)},jQuery.extend(WYMeditor.DocumentStructureManager,{VALID_DEFAULT_ROOT_CONTAINERS:["p","div"],DEFAULT_ROOT_CONTAINER_TITLES:{p:"Paragraph",div:"Division"},CONTAINERS_BLOCKING_NAVIGATION:["table","blockquote","pre"],DEFAULTS:{defaultRootContainer:"p",notValidRootContainers:["div"],validRootContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","table","ol","ul"],convertIfRootContainers:["div"],validListConversionTargetContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","td","th"],wrapContentsInList:["td","th"]}}),WYMeditor.DocumentStructureManager.prototype.setDefaultRootContainer=function(e){var t,n,r=this;if(r.structureRules.defaultRootContainer!==e){if(t=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,-1===(n=jQuery.inArray(e,t)))throw new Error("a defaultRootContainer of '"+e+"' is not supported");r.structureRules.defaultRootContainer=e,r.structureRules.notValidRootContainers=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,r.structureRules.notValidRootContainers.splice(n,1),r._adjustDefaultRootContainerUI()}},WYMeditor.DocumentStructureManager.prototype._adjustDefaultRootContainerUI=function(){var e,t,n,r,o,i,a,s=this._wym,l=this.structureRules.defaultRootContainer;for(e=jQuery(s._box).find(s._options.containersSelector).find("li"),r=!0,i=0;i<e.length;++i)n=e.eq(i).find("a").attr("name").toLowerCase(),-1<jQuery.inArray(n,this.structureRules.notValidRootContainers)&&e.eq(i).remove(),n===l&&(r=!1);r&&(o=s._options.containersItemHtml,o=WYMeditor.Helper.replaceAllInStr(o,WYMeditor.CONTAINER_NAME,l.toUpperCase()),a=WYMeditor.DocumentStructureManager,o=WYMeditor.Helper.replaceAllInStr(o,WYMeditor.CONTAINER_TITLE,a.DEFAULT_ROOT_CONTAINER_TITLES[l]),o=WYMeditor.Helper.replaceAllInStr(o,WYMeditor.CONTAINER_CLASS,"wym_containers_"+l),t=jQuery(o),(e=jQuery(s._box).find(s._options.containersSelector).find("li")).eq(0).before(t),t.find("a").click(function(){return s.setRootContainer(jQuery(this).attr(WYMeditor.NAME)),!1}))},WYMeditor.ImageHandler=function(e){var t=this;return t._wym=e,t._$resizeHandle=t._createResizeHandle(),t._$currentImageMarker=null,t._$currentImg=null,t._resizingNow=!1,t._imgDragDropAllowed=WYMeditor.ImageHandler._isImgDragDropAllowed(),t._addEventListeners(),t},WYMeditor.ImageHandler._isImgDragDropAllowed=function(){var e=jQuery.browser;return!(e.msie&&e.versionNumber<=9)},WYMeditor.ImageHandler._RESIZE_HANDLE_HR_HTML=jQuery("<hr>").addClass(WYMeditor.EDITOR_ONLY_CLASS).css({margin:0,padding:0}).attr("outerHTML"),WYMeditor.ImageHandler._RESIZE_HANDLE_INNER_HTML=["drag this to resize","click on image to select"].join(WYMeditor.ImageHandler._RESIZE_HANDLE_HR_HTML),WYMeditor.ImageHandler._IMAGE_HIGHLIGHT_COLOR="yellow",WYMeditor.ImageHandler.prototype._createResizeHandle=function(){var e=jQuery("<div/>");return e.attr("contentEditable","false"),e.html(WYMeditor.ImageHandler._RESIZE_HANDLE_INNER_HTML),e.addClass(WYMeditor.RESIZE_HANDLE_CLASS).addClass(WYMeditor.EDITOR_ONLY_CLASS),e.css({margin:"0",padding:"0",cursor:"row-resize","text-align":"center",position:"absolute","background-color":WYMeditor.ImageHandler._IMAGE_HIGHLIGHT_COLOR,"background-image":"none","min-width":"13em",width:"100%"}),e},WYMeditor.ImageHandler.prototype._getCurrentImageMarker=function(){var e=this;return e._$currentImageMarker&&e._$currentImageMarker.length||(e._$currentImageMarker=e._createCurrentImageMarker()),e._$currentImageMarker},WYMeditor.ImageHandler._IMAGE_MARKER_CLASS="wym-image-marker",WYMeditor.ImageHandler.prototype._createCurrentImageMarker=function(){return jQuery("<div/>").addClass(WYMeditor.EDITOR_ONLY_CLASS).addClass(WYMeditor.ImageHandler._IMAGE_MARKER_CLASS)},WYMeditor.ImageHandler.prototype._addEventListeners=function(){var e=this,t=jQuery(e._wym._doc);t.delegate("img","mouseover",e._onImgMouseover.bind(e)),t.delegate("img","click",e._onImgClick.bind(e)),t.delegate("."+WYMeditor.RESIZE_HANDLE_CLASS,"mousedown",e._onResizeHandleMousedown.bind(e)),t.delegate("img","mousedown",e._onImgMousedown.bind(e)),t.delegate("img","dragstart",e._onImgDragstart.bind(e)),t.bind("mousemove",e._onMousemove.bind(e)),t.bind("mouseup",e._onMouseup.bind(e)),e._edited=new WYMeditor.EXTERNAL_MODULES.Edited(t[0],function(){},e._onAnyNativeEdit.bind(e)),t.delegate("."+WYMeditor.RESIZE_HANDLE_CLASS,"click dblclick",e._onResizeHandleClickDblclick.bind(e))},WYMeditor.ImageHandler.prototype._onImgMouseover=function(e){var t=jQuery(e.target);!t.data("cE disabled")&&jQuery.browser.msie&&(t.attr("contentEditable","false"),t.data("cE disabled",!0)),this._setImgCursor(t)},WYMeditor.ImageHandler.prototype._setImgCursor=function(e){this._wym.getSelectedImage()===e[0]?this._imgDragDropAllowed?e.css("cursor","move"):e.css("cursor","default"):e.css("cursor","pointer")},WYMeditor.ImageHandler.prototype._onImgClick=function(e){return this._selectImage(e.target),this._indicateOnResizeHandleThatImageIsSelected(),!1},WYMeditor.ImageHandler.prototype._selectImage=function(e){var t=this,n=jQuery(e);jQuery.browser.msie&&8===jQuery.browser.versionNumber?setTimeout(function(){t._wym._selectSingleNode(e)},0):t._wym._selectSingleNode(e),t._setImgCursor(n)},WYMeditor.ImageHandler.prototype._indicateOnResizeHandleThatImageIsSelected=function(){var e=this,t="image is selected";e._imgDragDropAllowed&&(t=[t,"drag image to move it"].join(WYMeditor.ImageHandler._RESIZE_HANDLE_HR_HTML)),e._$resizeHandle.css("font-weight","bold").html(t),setTimeout(function(){e._$resizeHandle.css("font-weight","normal").html(WYMeditor.ImageHandler._RESIZE_HANDLE_INNER_HTML)},1e3)},WYMeditor.ImageHandler.prototype._placeResizeHandleOnImg=function(e){var t=this,n="0.8em",r=jQuery(e);t._$currentImg=r,t._getCurrentImageMarker().insertAfter(r),r.css({"background-color":WYMeditor.ImageHandler._IMAGE_HIGHLIGHT_COLOR,"padding-top":n,"padding-right":n,"padding-bottom":"0","padding-left":n,"margin-top":"-"+n,"margin-right":"-"+n,"margin-bottom":"0","margin-left":"-"+n}),t._$resizeHandle.prependTo(t._wym.$body()),t._correctResizeHandleOffsetAndWidth(),t._$resizeHandle.show()},WYMeditor.ImageHandler.prototype._correctResizeHandleOffsetAndWidth=function(){var e=this;e._$resizeHandle.css("max-width",e._$currentImg.outerWidth());var t=e._$currentImg.offset();e._$resizeHandle.css("left",t.left);var n=t.top+e._$currentImg.outerHeight();jQuery.browser.msie&&n--,e._$resizeHandle.css("top",n)},WYMeditor.ImageHandler.prototype._onResizeHandleMousedown=function(e){return this._resizingNow||this._startResize(e.clientY),!1},WYMeditor.ImageHandler.prototype._startResize=function(e){this._startMouseY=e,this._$currentImg.data("StartHeight",this._$currentImg.height()),this._resizingNow=!0},WYMeditor.ImageHandler.prototype._onMousemove=function(e){var t=this;if(e.target.tagName)return t._resizingNow?(t._resizeImage(e.clientY),!1):"img"!==e.target.tagName.toLowerCase()||t._isResizeHandleAttached()?void(t._isResizeHandleAttached()&&((jQuery(e.target).hasClass(WYMeditor.EDITOR_ONLY_CLASS)||t._isCurrentImg(e.target))&&t._isCurrentImgAtMarker()||t._detachResizeHandle())):(t._placeResizeHandleOnImg(e.target),!1)},WYMeditor.ImageHandler.prototype._isCurrentImgAtMarker=function(){var e=this._$currentImageMarker;if(!e.length)return!1;var t=this._$currentImg,n=e.prev("img");return!(!t.length||!n.length||n[0]!==t[0])},WYMeditor.ImageHandler.prototype._isResizeHandle=function(e){return jQuery(e).hasClass(WYMeditor.RESIZE_HANDLE_CLASS)},WYMeditor.ImageHandler.prototype._isCurrentImg=function(e){return e===this._$currentImg[0]},WYMeditor.ImageHandler.prototype._resizeImage=function(e){var t=this._$currentImg,n=t.data("DimensionsRatio");if(!n){var r=t.height();n=t.width()/r,t.data("DimensionsRatio",n)}var o=t.data("StartHeight")-this._startMouseY+e,i=(o=0<o?o:0)*n;t.attr("height",o),t.attr("width",i),this._correctResizeHandleOffsetAndWidth()},WYMeditor.ImageHandler.prototype._onMouseup=function(){this._resizingNow&&this._stopResize()},WYMeditor.ImageHandler.prototype._stopResize=function(){this._resizingNow=!1,this._startMouseY=null,this._wym.registerModification()},WYMeditor.ImageHandler.prototype._onImgMousedown=function(e){return jQuery.browser.msie&&11===jQuery.browser.versionNumber&&this._selectImage(e.target),this._imgDragDropAllowed},WYMeditor.ImageHandler.prototype._onAnyNativeEdit=function(){setTimeout(this._handlePossibleModification.bind(this),0)},WYMeditor.ImageHandler.prototype._handlePossibleModification=function(){this._isResizeHandleAttached()&&(this._isCurrentImgAtMarker()?this._correctResizeHandleOffsetAndWidth():this._detachResizeHandle())},WYMeditor.ImageHandler.prototype._isResizeHandleAttached=function(){var e=this._getResizeHandle();return e&&"none"!==e.css("display")},WYMeditor.ImageHandler.prototype._getResizeHandle=function(){var e=this._wym.$body().find("."+WYMeditor.RESIZE_HANDLE_CLASS);return!!e.length&&e},WYMeditor.ImageHandler.prototype._detachResizeHandle=function(){var e=this;e._$currentImageMarker.detach(),16<=e._$currentImg.height()&&16<=e._$currentImg.width()&&e._$currentImg.css({padding:0,margin:0}),e._$currentImg=null,e._$resizeHandle.hide()},WYMeditor.ImageHandler.prototype._onImgDragstart=function(){this._detachResizeHandle()},WYMeditor.ImageHandler.prototype._onResizeHandleClickDblclick=function(){return jQuery.browser.msie&&11===jQuery.browser.versionNumber&&this._wym.deselect(),!1},WYMeditor.ImageHandler.prototype._isAnImgSelected=function(n){var r=this;function e(e){var t=r._wym.getSelectedImage()?"***YES***":"";e=e?e+" ":"",WYMeditor.console.log(e+n+" "+t)}n=n.toUpperCase(),e("sync"),setTimeout(function(){e("async")},0)},WYMeditor.ImageHandler._onAllEvents=function(e){this._isAnImgSelected([e.type,e.target.tagName,jQuery(e.target).attr("className")].join(" "))},WYMeditor.WymClassGecko=function(e){this._wym=e,this._class="class"},WYMeditor.WymClassGecko.CELL_PLACEHOLDER='<br _moz_dirty="" />',WYMeditor.WymClassGecko.NEEDS_CELL_FIX=1===parseInt(jQuery.browser.version,10)&&"1.9.1"<=jQuery.browser.version&&jQuery.browser.version<"2.0",WYMeditor.WymClassGecko.prototype._docEventQuirks=function(){var e=this,t=jQuery(e._doc);t.keyup(e._keyup.bind(e)),t.focus(function(){e.undoRedo._onBodyFocus()}),t.click(e._click.bind(e))},WYMeditor.WymClassGecko.prototype._keyup=function(e){var t,n,r,o,i,a=this;r=a.documentStructureManager.structureRules.notValidRootContainers,n=a.documentStructureManager.structureRules.defaultRootContainer,t=null,a.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY_CODE.CTRL||e.which===WYMeditor.KEY_CODE.COMMAND||e.metaKey||e.ctrlKey||(o=(t=a.selectedContainer()).tagName.toLowerCase(),t.parentNode&&(i=t.parentNode.tagName.toLowerCase()),a.isForbiddenRootContainer(o)&&(o=i),(o===WYMeditor.BODY||-1<jQuery.inArray(o,r)&&i===WYMeditor.BODY)&&(a._exec(WYMeditor.EXEC_COMMANDS.FORMAT_BLOCK,n),a.prepareDocForEditing())),a.keyCanCreateBlockElement(e.which)&&(o=(t=a.selectedContainer()).tagName.toLowerCase(),t.parentNode&&(i=t.parentNode.tagName.toLowerCase()),-1<jQuery.inArray(o,r)&&i===WYMeditor.BODY&&a._exec(WYMeditor.EXEC_COMMANDS.FORMAT_BLOCK,n),a._handlePotentialEnterInEmptyNestedLi(e.which,t),a.prepareDocForEditing())},WYMeditor.WymClassGecko.prototype._click=function(){var e=this.selectedContainer();!0===WYMeditor.WymClassGecko.NEEDS_CELL_FIX&&e&&e.tagName.toLowerCase()===WYMeditor.TR&&jQuery(WYMeditor.TD,this._doc.body).append(WYMeditor.WymClassGecko.CELL_PLACEHOLDER),e&&e.tagName.toLowerCase()===WYMeditor.BODY&&!0===this.selection().isCollapsed&&this._exec(WYMeditor.EXEC_COMMANDS.FORMAT_BLOCK,WYMeditor.P)},WYMeditor.WymClassGecko.prototype._designModeQuirks=function(){try{this._doc.execCommand("styleWithCSS","",!1),this._doc.execCommand("enableObjectResizing",!1,!1),this._doc.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}},WYMeditor.WymClassGecko.prototype._afterInsertTable=function(e){!0===WYMeditor.WymClassGecko.NEEDS_CELL_FIX&&jQuery(e).find("td").each(function(e,t){jQuery(t).append(WYMeditor.WymClassGecko.CELL_PLACEHOLDER)})},WYMeditor.WymClassWebKit=function(e){this._wym=e,this._class="class"},WYMeditor.WymClassWebKit.prototype._docEventQuirks=function(){var t=this;jQuery(t._doc).bind("keyup",function(e){t._keyup(e)}),t.keyboard.combokeys.bind("shift+enter",function(){return t._exec(WYMeditor.EXEC_COMMANDS.INSERT_LINEBREAK),!1}),t.$body().bind("focus",function(){t.undoRedo._onBodyFocus()})},WYMeditor.WymClassWebKit.prototype._inListBreakoutDiv=function(e){var t=jQuery(this.getRootContainer());return!(e!==WYMeditor.KEY_CODE.ENTER||!t.is("div")||"div"===this.documentStructureManager.defaultRootContainer||1!==t.prev("ol, ul").length)},WYMeditor.WymClassWebKit.prototype._isLiInLiAfterEnter=function(e){var t,n,r,o,i=this.nodeAfterSel();return e===WYMeditor.KEY_CODE.ENTER&&(!!i&&(!!(t=i.parentNode)&&("string"==typeof t.tagName&&("li"===t.tagName.toLowerCase()&&(!!(n=i.previousSibling)&&("string"==typeof n.tagName&&("li"===n.tagName.toLowerCase()&&(1===n.childNodes.length&&(!!(r=n.childNodes[0])&&("string"==typeof r.tagName&&("br"===r.tagName.toLowerCase()&&(!!(o=n.previousSibling)&&("string"==typeof o.tagName&&-1!==jQuery.inArray(o.tagName.toLowerCase(),["ol","ul"]))))))))))))))},WYMeditor.WymClassWebKit.prototype._fixLiInLiAfterEnter=function(){var e=this.nodeAfterSel(),t=jQuery(e.previousSibling),n=t.parent("li"),r=n.contents().index(t),o=n.contents().slice(r+1);t.remove(),n.after("<li><br /></li>"),n.next().append(o),this.setCaretBefore(n.next("li").children().first("br")[0])},WYMeditor.WymClassWebKit.prototype._keyup=function(e){var t,n,r,o,i,a,s=this;if(r=s.documentStructureManager.structureRules.notValidRootContainers,n=s.documentStructureManager.structureRules.defaultRootContainer,jQuery.browser.version<534.1&&e.which===WYMeditor.KEY_CODE.ENTER&&e.shiftKey&&s._exec("InsertLineBreak"),s.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY_CODE.CTRL||e.which===WYMeditor.KEY_CODE.COMMAND||e.metaKey||e.ctrlKey||(o=(t=s.selectedContainer()).tagName.toLowerCase(),t.parentNode&&(i=t.parentNode.tagName.toLowerCase()),s.isForbiddenRootContainer(o)&&(o=i),(o===WYMeditor.BODY||-1<jQuery.inArray(o,r)&&i===WYMeditor.BODY)&&(s._exec(WYMeditor.EXEC_COMMANDS.FORMAT_BLOCK,n),s.prepareDocForEditing())),s.keyCanCreateBlockElement(e.which)){if(o=(t=s.selectedContainer()).tagName.toLowerCase(),t.parentNode&&(i=t.parentNode.tagName.toLowerCase()),-1<jQuery.inArray(o,r)&&i===WYMeditor.BODY&&(s._exec(WYMeditor.EXEC_COMMANDS.FORMAT_BLOCK,n),t=s.selectedContainer()),s._isLiInLiAfterEnter(e.which,t))return s._fixLiInLiAfterEnter(),void(t=s.selectedContainer());s._handlePotentialEnterInEmptyNestedLi(e.which,t),s._inListBreakoutDiv(e.which)&&(a=s.switchTo(s.getRootContainer(),n),s.setCaretIn(a)),s.prepareDocForEditing()}},WYMeditor.WymClassBlink=function(e){this._wym=e},jQuery.extend(WYMeditor.WymClassBlink.prototype,WYMeditor.WymClassWebKit.prototype),WYMeditor.WymClassSafari=function(e){this._wym=e},jQuery.extend(WYMeditor.WymClassSafari.prototype,WYMeditor.WymClassWebKit.prototype),WYMeditor.WymClassTridentPre7=function(e){this._wym=e,this._class="className"},WYMeditor.WymClassTridentPre7.prototype._onEditorIframeLoad=function(e){e._assignWymDoc(),!1===e._isDesignModeOn()?e._doc.designMode="On":e._afterDesignModeOn()},WYMeditor.WymClassTridentPre7.prototype._assignWymDoc=function(){this._doc=this._iframe.contentWindow.document},WYMeditor.WymClassTridentPre7.prototype._docEventQuirks=function(){var t=this;t._doc.onbeforedeactivate=function(){t._saveCaret()},jQuery(t._doc).bind("keyup",function(e){t._keyup(e)}),t._doc.onkeyup=function(){t._saveCaret()},t._doc.onclick=function(){t._saveCaret()},t.$body().bind("focus",function(){t.undoRedo._onBodyFocus()}),t._doc.body.onbeforepaste=function(){t._iframe.contentWindow.event.returnValue=!1},t._doc.body.onpaste=function(){t._iframe.contentWindow.event.returnValue=!1,t.paste(window.clipboardData.getData("Text"))},t.$body().bind("dragend",function(e){e.target.tagName.toLowerCase()===WYMeditor.IMG&&t.deselect()}),t._doc.oncontrolselect=function(){return!1}},WYMeditor.WymClassTridentPre7.prototype._setButtonsUnselectable=function(){this.get$Buttons().attr("unselectable","on")},WYMeditor.WymClassTridentPre7.prototype._uiQuirks=function(){8===jQuery.browser.versionNumber&&this._setButtonsUnselectable()},WYMeditor.WymClassTridentPre7.prototype._saveCaret=function(){var e=this._doc.selection;"None"!==e.type&&(this._doc.caretPos=e.createRange())},WYMeditor.WymClassTridentPre7.prototype._wrapWithContainer=function(e,t){var n,r,o;n=jQuery(e).wrap("<"+t+" />"),r=this.selection(),(o=rangy.createRange(this._doc)).selectNodeContents(n[0]),o.collapse(),r.setSingleRange(o)},WYMeditor.WymClassTridentPre7.prototype._keyup=function(e){var t,n,r,o,i,a,s=this,l=!1;r=s.documentStructureManager.structureRules.notValidRootContainers,n=s.documentStructureManager.structureRules.defaultRootContainer,s.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY_CODE.CTRL||e.which===WYMeditor.KEY_CODE.COMMAND||e.metaKey||e.ctrlKey||(t=s.selectedContainer(),a=s.selection().focusNode,null!==t&&(o=t.tagName.toLowerCase()),t.parentNode&&(i=t.parentNode.tagName.toLowerCase()),s.isForbiddenRootContainer(o)&&(o=i,l=!0),o===WYMeditor.BODY&&"#text"===a.nodeName&&(l&&(a=a.parentNode),s._wrapWithContainer(a,n),s.prepareDocForEditing()),-1<jQuery.inArray(o,r)&&i===WYMeditor.BODY&&(s.switchTo(t,n),s.prepareDocForEditing())),s.keyCanCreateBlockElement(e.which)&&(o=(t=s.selectedContainer()).tagName.toLowerCase(),t.parentNode&&(i=t.parentNode.tagName.toLowerCase()),-1<jQuery.inArray(o,r)&&i===WYMeditor.BODY&&s.switchTo(t,n),s._handlePotentialEnterInEmptyNestedLi(e.which,t),e.which!==WYMeditor.KEY_CODE.BACKSPACE||8!==jQuery.browser.versionNumber||!t.parentNode||"ul"!==i&&"ol"!==i||s._fixInvalidListNesting(t),s.prepareDocForEditing())},WYMeditor.WymClassTrident7=function(e){this._wym=e,this._class="class"},jQuery.extend(WYMeditor.WymClassTrident7.prototype,WYMeditor.WymClassGecko.prototype),jQuery.copyPropsFromObjectToObject(WYMeditor.WymClassTridentPre7.prototype,WYMeditor.WymClassTrident7.prototype,["_exec","_keyup","_wrapWithContainer"]),WYMeditor.WymClassTrident7.prototype.rawHtml=function(e){var t=this;return"string"!=typeof e?t.$body().html():(t._doc.designMode="off",t.$body().html(e),!0!==t._isDesignModeOn()&&t._enableDesignModeOnDocument(),!1)},WYMeditor.WymClassTrident7.prototype._docEventQuirks=function(){var t=this;jQuery(t._doc).bind("keyup",function(e){t._keyup(e)}),t.$body().bind("dragend",function(e){e.target.tagName.toLowerCase()===WYMeditor.IMG&&t.deselect()}),t.$body().bind("focus",function(){t.undoRedo._onBodyFocus()})},function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).foo=e()}}(function(){return function i(a,s,l){function d(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[n]={exports:{}};a[n][0].call(o.exports,function(e){var t=a[n][1][e];return d(t||e)},o,o.exports,i,a,s,l)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(e,t,n){"use strict";var r=e("lodash"),o=e("udc"),i=e("xtend");t.exports=function(e,t){var n=this;if(n.options=i({limit:null},t),n.notObjError=new Error("requires a plain object"),!e||!r.isPlainObject(e))throw n.notObjError;n.current=o(e),n.changesets={backward:[],forward:[]}};var a=t.exports.prototype;a.add=e("./prototype/add"),a.get=e("./prototype/get"),a.lengthBackward=e("./prototype/length-backward"),a.lengthForward=e("./prototype/length-forward"),a.backward=e("./prototype/backward"),a.forward=e("./prototype/forward"),a.move=e("./prototype/move"),a.forgetAllInDirection=e("./prototype/forget-all-in-direction"),a.forgetAllBackward=e("./prototype/forget-all-backward"),a.forgetAllForward=e("./prototype/forget-all-forward")},{"./prototype/add":2,"./prototype/backward":3,"./prototype/forget-all-backward":4,"./prototype/forget-all-forward":5,"./prototype/forget-all-in-direction":6,"./prototype/forward":7,"./prototype/get":8,"./prototype/length-backward":9,"./prototype/length-forward":10,"./prototype/move":11,lodash:14,udc:15,xtend:16}],2:[function(e,t,n){"use strict";var r=e("lodash"),o=e("changeset"),i=e("udc");t.exports=function(e){var t=this;if(!e||!r.isPlainObject(e))throw t.notObjError;t.lengthBackward()===t.options.limit&&t.changesets.backward.shift(),t.changesets.backward.push(o(e,t.current)),t.current=i(e),t.changesets.forward=[]}},{changeset:12,lodash:14,udc:15}],3:[function(e,t,n){"use strict";t.exports=function(){this.move("backward")}},{}],4:[function(e,t,n){"use strict";t.exports=function(){this.forgetAllInDirection("backward")}},{}],5:[function(e,t,n){"use strict";t.exports=function(){this.forgetAllInDirection("forward")}},{}],6:[function(e,t,n){t.exports=function(e){var t=this.changesets;if(!t.hasOwnProperty(e))throw new Error("there is no such direction");t[e]=[]}},{}],7:[function(e,t,n){"use strict";t.exports=function(){this.move("forward")}},{}],8:[function(e,t,n){"use strict";var r=e("udc");t.exports=function(){return r(this.current)}},{udc:15}],9:[function(e,t,n){"use strict";t.exports=function(){return this.changesets.backward.length}},{}],10:[function(e,t,n){"use strict";t.exports=function(){return this.changesets.forward.length}},{}],11:[function(e,t,n){"use strict";var s=e("changeset"),l=s.apply,d=e("lodash").without;t.exports=function(e){var t=this;if(!e||!t.changesets.hasOwnProperty(e))throw new Error("Invalid direction");var n=Object.getOwnPropertyNames(t.changesets),r=d(n,e)[0],o=t.changesets[e],i=t.changesets[r];if(0===o.length)throw new Error("There's no going "+e);var a=l(o.pop(),t.current);i.push(s(a,t.current)),t.current=a}},{changeset:12,lodash:14}],12:[function(o,e,t){var u=o("underscore");function c(e){return"put"===e.type&&void 0===e.value&&(e.type="del",delete e.value),e}e.exports=function(e,t){var n=[];return n=n.concat(function n(r,o,i){var a=[];if(null===o||null===i||"object"!=typeof o||u.contains(f,o))o!==i&&a.push(c({type:"put",key:r,value:i}));else{f.push(o);var e=Object.keys(o),t=Object.keys(i),s=u.intersection(e,t);s.forEach(function(e){var t=n(r.concat(e),o[e],i[e]);a=a.concat(t)});var l=u.difference(e,t);l.forEach(function(e){a.push({type:"del",key:r.concat(e)})});var d=u.difference(t,e);d.forEach(function(e){a.push(c({type:"put",key:r.concat(e),value:i[e]}))})}return a}([],e,t)),f=[],n};var f=[];e.exports.apply=function(e,t,n){var i,r;n?i=t:(r=o("udc"),i=r(t));return e.forEach(function(n){var r,e,o;switch(n.type){case"put":r=i,e=n.key,(o=e.length)?e.forEach(function(e,t){e in r||(r[e]={}),t<o-1?r=r[e]:r[e]=n.value}):i=n.value;break;case"del":r=i,e=n.key,(o=e.length)?e.forEach(function(e,t){e in r||(r[e]={}),t<o-1?r=r[e]:delete r[e]}):i=null}}),i}},{udc:15,underscore:13}],13:[function(e,j,P){(function(){var e=this,t=e._,a={},o=Array.prototype,n=Object.prototype,r=Function.prototype,i=o.push,s=o.slice,l=o.concat,c=n.toString,d=n.hasOwnProperty,u=o.forEach,f=o.map,p=o.reduce,h=o.reduceRight,m=o.filter,g=o.every,_=o.some,y=o.indexOf,v=o.lastIndexOf,b=Array.isArray,C=Object.keys,S=r.bind,T=function(e){return e instanceof T?e:this instanceof T?void(this._wrapped=e):new T(e)};void 0!==P?(void 0!==j&&j.exports&&(P=j.exports=T),P._=T):e._=T,T.VERSION="1.4.4";var w=T.each=T.forEach=function(e,t,n){if(null!=e)if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e)===a)return}else for(var i in e)if(T.has(e,i)&&t.call(n,e[i],i,e)===a)return};T.map=T.collect=function(e,r,o){var i=[];return null==e?i:f&&e.map===f?e.map(r,o):(w(e,function(e,t,n){i[i.length]=r.call(o,e,t,n)}),i)};var E="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(e,r,o,i){var a=2<arguments.length;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(r=T.bind(r,i)),a?e.reduce(r,o):e.reduce(r);if(w(e,function(e,t,n){a?o=r.call(i,o,e,t,n):(o=e,a=!0)}),!a)throw new TypeError(E);return o},T.reduceRight=T.foldr=function(r,o,i,a){var s=2<arguments.length;if(null==r&&(r=[]),h&&r.reduceRight===h)return a&&(o=T.bind(o,a)),s?r.reduceRight(o,i):r.reduceRight(o);var l=r.length;if(l!==+l){var d=T.keys(r);l=d.length}if(w(r,function(e,t,n){t=d?d[--l]:--l,s?i=o.call(a,i,r[t],t,n):(i=r[t],s=!0)}),!s)throw new TypeError(E);return i},T.find=T.detect=function(e,r,o){var i;return M(e,function(e,t,n){if(r.call(o,e,t,n))return i=e,!0}),i},T.filter=T.select=function(e,r,o){var i=[];return null==e?i:m&&e.filter===m?e.filter(r,o):(w(e,function(e,t,n){r.call(o,e,t,n)&&(i[i.length]=e)}),i)},T.reject=function(e,r,o){return T.filter(e,function(e,t,n){return!r.call(o,e,t,n)},o)},T.every=T.all=function(e,r,o){r||(r=T.identity);var i=!0;return null==e?i:g&&e.every===g?e.every(r,o):(w(e,function(e,t,n){if(!(i=i&&r.call(o,e,t,n)))return a}),!!i)};var M=T.some=T.any=function(e,r,o){r||(r=T.identity);var i=!1;return null==e?i:_&&e.some===_?e.some(r,o):(w(e,function(e,t,n){if(i||(i=r.call(o,e,t,n)))return a}),!!i)};T.contains=T.include=function(e,t){return null!=e&&(y&&e.indexOf===y?-1!=e.indexOf(t):M(e,function(e){return e===t}))},T.invoke=function(e,t){var n=s.call(arguments,2),r=T.isFunction(t);return T.map(e,function(e){return(r?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.where=function(e,n,t){return T.isEmpty(n)?t?null:[]:T[t?"find":"filter"](e,function(e){for(var t in n)if(n[t]!==e[t])return!1;return!0})},T.findWhere=function(e,t){return T.where(e,t,!0)},T.max=function(e,o,i){if(!o&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!o&&T.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return w(e,function(e,t,n){var r=o?o.call(i,e,t,n):e;r>=a.computed&&(a={value:e,computed:r})}),a.value},T.min=function(e,o,i){if(!o&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!o&&T.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return w(e,function(e,t,n){var r=o?o.call(i,e,t,n):e;r<a.computed&&(a={value:e,computed:r})}),a.value},T.shuffle=function(e){var t,n=0,r=[];return w(e,function(e){t=T.random(n++),r[n-1]=r[t],r[t]=e}),r};var N=function(t){return T.isFunction(t)?t:function(e){return e[t]}};T.sortBy=function(e,t,r){var o=N(t);return T.pluck(T.map(e,function(e,t,n){return{value:e,index:t,criteria:o.call(r,e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var R=function(r,e,o,i){var a={},s=N(e||T.identity);return w(r,function(e,t){var n=s.call(o,e,t,r);i(a,n,e)}),a};T.groupBy=function(e,t,n){return R(e,t,n,function(e,t,n){(T.has(e,t)?e[t]:e[t]=[]).push(n)})},T.countBy=function(e,t,n){return R(e,t,n,function(e,t){T.has(e,t)||(e[t]=0),e[t]++})},T.sortedIndex=function(e,t,n,r){for(var o=(n=null==n?T.identity:N(n)).call(r,t),i=0,a=e.length;i<a;){var s=i+a>>>1;n.call(r,e[s])<o?i=s+1:a=s}return i},T.toArray=function(e){return e?T.isArray(e)?s.call(e):e.length===+e.length?T.map(e,T.identity):T.values(e):[]},T.size=function(e){return null==e?0:e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:s.call(e,0,t)},T.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},T.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},T.rest=T.tail=T.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},T.compact=function(e){return T.filter(e,T.identity)};var L=function(e,t,n){return w(e,function(e){T.isArray(e)?t?i.apply(n,e):L(e,t,n):n.push(e)}),n};T.flatten=function(e,t){return L(e,t,[])},T.without=function(e){return T.difference(e,s.call(arguments,1))},T.uniq=T.unique=function(n,r,e,t){T.isFunction(r)&&(t=e,e=r,r=!1);var o=e?T.map(n,e,t):n,i=[],a=[];return w(o,function(e,t){(r?t&&a[a.length-1]===e:T.contains(a,e))||(a.push(e),i.push(n[t]))}),i},T.union=function(){return T.uniq(l.apply(o,arguments))},T.intersection=function(e){var n=s.call(arguments,1);return T.filter(T.uniq(e),function(t){return T.every(n,function(e){return 0<=T.indexOf(e,t)})})},T.difference=function(e){var t=l.apply(o,s.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){for(var e=s.call(arguments),t=T.max(T.pluck(e,"length")),n=new Array(t),r=0;r<t;r++)n[r]=T.pluck(e,""+r);return n},T.object=function(e,t){if(null==e)return{};for(var n={},r=0,o=e.length;r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},T.indexOf=function(e,t,n){if(null==e)return-1;var r=0,o=e.length;if(n){if("number"!=typeof n)return e[r=T.sortedIndex(e,t)]===t?r:-1;r=n<0?Math.max(0,o+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<o;r++)if(e[r]===t)return r;return-1},T.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(v&&e.lastIndexOf===v)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var o=r?n:e.length;o--;)if(e[o]===t)return o;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=0,i=new Array(r);o<r;)i[o++]=e,e+=n;return i},T.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,s.call(arguments,1));var n=s.call(arguments,2);return function(){return e.apply(t,n.concat(s.call(arguments)))}},T.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},T.bindAll=function(t){var e=s.call(arguments,1);return 0===e.length&&(e=T.functions(t)),w(e,function(e){t[e]=T.bind(t[e],t)}),t},T.memoize=function(t,n){var r={};return n||(n=T.identity),function(){var e=n.apply(this,arguments);return T.has(r,e)?r[e]:r[e]=t.apply(this,arguments)}},T.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(s.call(arguments,1)))},T.throttle=function(n,r){var o,i,a,s,l=0,d=function(){l=new Date,a=null,s=n.apply(o,i)};return function(){var e=new Date,t=r-(e-l);return o=this,i=arguments,t<=0?(clearTimeout(a),a=null,l=e,s=n.apply(o,i)):a||(a=setTimeout(d,t)),s}},T.debounce=function(r,o,i){var a,s;return function(){var e=this,t=arguments,n=i&&!a;return clearTimeout(a),a=setTimeout(function(){a=null,i||(s=r.apply(e,t))},o),n&&(s=r.apply(e,t)),s}},T.once=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}},T.wrap=function(t,n){return function(){var e=[t];return i.apply(e,arguments),n.apply(this,e)}},T.compose=function(){var n=arguments;return function(){for(var e=arguments,t=n.length-1;0<=t;t--)e=[n[t].apply(this,e)];return e[0]}},T.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},T.keys=C||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push(e[n]);return t},T.pairs=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push([n,e[n]]);return t},T.invert=function(e){var t={};for(var n in e)T.has(e,n)&&(t[e[n]]=n);return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(n){return w(s.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n},T.pick=function(t){var n={},e=l.apply(o,s.call(arguments,1));return w(e,function(e){e in t&&(n[e]=t[e])}),n},T.omit=function(e){var t={},n=l.apply(o,s.call(arguments,1));for(var r in e)T.contains(n,r)||(t[r]=e[r]);return t},T.defaults=function(n){return w(s.call(arguments,1),function(e){if(e)for(var t in e)null==n[t]&&(n[t]=e[t])}),n},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var W=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var o=c.call(e);if(o!=c.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var i=n.length;i--;)if(n[i]==e)return r[i]==t;n.push(e),r.push(t);var a=0,s=!0;if("[object Array]"==o){if(s=(a=e.length)==t.length)for(;a--&&(s=W(e[a],t[a],n,r)););}else{var l=e.constructor,d=t.constructor;if(l!==d&&!(T.isFunction(l)&&l instanceof l&&T.isFunction(d)&&d instanceof d))return!1;for(var u in e)if(T.has(e,u)&&(a++,!(s=T.has(t,u)&&W(e[u],t[u],n,r))))break;if(s){for(u in t)if(T.has(t,u)&&!a--)break;s=!a}}return n.pop(),r.pop(),s};T.isEqual=function(e,t){return W(e,t,[],[])},T.isEmpty=function(e){if(null==e)return!0;if(T.isArray(e)||T.isString(e))return 0===e.length;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!(!e||1!==e.nodeType)},T.isArray=b||function(e){return"[object Array]"==c.call(e)},T.isObject=function(e){return e===Object(e)},w(["Arguments","Function","String","Number","Date","RegExp"],function(t){T["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!(!e||!T.has(e,"callee"))}),"function"!=typeof/./&&(T.isFunction=function(e){return"function"==typeof e}),T.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==c.call(e)},T.isNull=function(e){return null===e},T.isUndefined=function(e){return void 0===e},T.has=function(e,t){return d.call(e,t)},T.noConflict=function(){return e._=t,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=Array(e),o=0;o<e;o++)r[o]=t.call(n,o);return r},T.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=T.invert(I.escape);var k={escape:new RegExp("["+T.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(I.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(t){T[t]=function(e){return null==e?"":(""+e).replace(k[t],function(e){return I[t][e]})}}),T.result=function(e,t){if(null==e)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(n){w(T.functions(n),function(e){var t=T[e]=n[e];T.prototype[e]=function(){var e=[this._wrapped];return i.apply(e,arguments),H.call(this,t.apply(T,e))}})};var x=0;T.uniqueId=function(e){var t=++x+"";return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(i,e,t){var n;t=T.defaults({},t,T.templateSettings);var r=new RegExp([(t.escape||O).source,(t.interpolate||O).source,(t.evaluate||O).source].join("|")+"|$","g"),a=0,s="__p+='";i.replace(r,function(e,t,n,r,o){return s+=i.slice(a,o).replace(Y,function(e){return"\\"+A[e]}),t&&(s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),a=o+e.length,e}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(e)return n(e,T);var o=function(e){return n.call(this,e,T)};return o.source="function("+(t.variable||"obj")+"){\n"+s+"}",o},T.chain=function(e){return T(e).chain()};var H=function(e){return this._chain?T(e).chain():e};T.mixin(T),w(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=o[t];T.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],H.call(this,e)}}),w(["concat","join","slice"],function(e){var t=o[e];T.prototype[e]=function(){return H.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],14:[function(e,u,c){(function(d){(function(){var at,t=[],n=[],st=0,lt=+new Date+"",dt=75,r=40,ut=" \t\v\fÂ \ufeff\n\r\u2028\u2029áá ââââââââââââ¯âã",ct=/\b__p \+= '';/g,ft=/\b(__p \+=) '' \+/g,pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^\s*function[ \n\r\t]+\w/,_t=/<%=([\s\S]+?)%>/g,yt=RegExp("^["+ut+"]*0+(?=.$)"),vt=/($^)/,bt=/\bthis\b/,Ct=/['\n\r\t\u2028\u2029\\]/g,St=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],Tt=0,wt="[object Arguments]",Et="[object Array]",Mt="[object Boolean]",Nt="[object Date]",Rt="[object Function]",Lt="[object Number]",Wt="[object Object]",It="[object RegExp]",kt="[object String]",xt={};xt[Rt]=!1,xt[wt]=xt[Et]=xt[Mt]=xt[Nt]=xt[Lt]=xt[Wt]=xt[It]=xt[kt]=!0;var Ot={leading:!1,maxWait:0,trailing:!1},At={configurable:!1,enumerable:!1,value:null,writable:!1},Yt={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},o={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Ht=Yt[typeof window]&&window||this,e=Yt[typeof c]&&c&&!c.nodeType&&c,i=Yt[typeof u]&&u&&!u.nodeType&&u,a=i&&i.exports===e&&e,s=Yt[typeof d]&&d;function jt(e,t,n){for(var r=(n||0)-1,o=e?e.length:0;++r<o;)if(e[r]===t)return r;return-1}function Pt(e,t){var n=typeof t;if(e=e.cache,"boolean"==n||null==t)return e[t]?0:-1;"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:lt+t;return e=(e=e[n])&&e[r],"object"==n?e&&-1<jt(e,t)?0:-1:e?0:-1}function l(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:lt+e,o=t[n]||(t[n]={});"object"==n?(o[r]||(o[r]=[])).push(e):o[r]=!0}}function Dt(e){return e.charCodeAt(0)}function Bt(e,t){for(var n=e.criteria,r=t.criteria,o=-1,i=n.length;++o<i;){var a=n[o],s=r[o];if(a!==s){if(s<a||void 0===a)return 1;if(a<s||void 0===s)return-1}}return e.index-t.index}function Qt(e){var t=-1,n=e.length,r=e[0],o=e[n/2|0],i=e[n-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&i&&"object"==typeof i)return!1;var a=Ft();a.false=a.null=a.true=a[void 0]=!1;var s=Ft();for(s.array=e,s.cache=a,s.push=l;++t<n;)s.push(e[t]);return s}function Ut(e){return"\\"+o[e]}function zt(){return t.pop()||[]}function Ft(){return n.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function Kt(e){e.length=0,t.length<r&&t.push(e)}function qt(e){var t=e.cache;t&&qt(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,n.length<r&&n.push(e)}function $t(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}!s||s.global!==s&&s.window!==s||(Ht=s);var Xt=function e(r){var l=(r=r?Xt.defaults(Ht.Object(),r,Xt.pick(Ht,St)):Ht).Array,t=r.Boolean,n=r.Date,g=r.Function,o=r.Math,i=r.Number,a=r.Object,_=r.RegExp,b=r.String,y=r.TypeError,s=[],d=a.prototype,u=r._,C=d.toString,c=_("^"+b(C).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),f=o.ceil,v=r.clearTimeout,p=o.floor,h=g.prototype.toString,m=ne(m=a.getPrototypeOf)&&m,S=d.hasOwnProperty,T=s.push,w=r.setTimeout,E=s.splice,M=s.unshift,N=function(){try{var e={},t=ne(t=a.defineProperty)&&t,n=t(e,e,e)&&t}catch(e){}return n}(),R=ne(R=a.create)&&R,L=ne(L=l.isArray)&&L,W=r.isFinite,I=r.isNaN,k=ne(k=a.keys)&&k,x=o.max,O=o.min,A=r.parseInt,Y=o.random,H={};function j(e){return e&&"object"==typeof e&&!se(e)&&S.call(e,"__wrapped__")?e:new P(e)}function P(e,t){this.__chain__=!!t,this.__wrapped__=e}H[Et]=l,H[Mt]=t,H[Nt]=n,H[Rt]=g,H[Wt]=a,H[Lt]=i,H[It]=_,H[kt]=b,P.prototype=j.prototype;var D=j.support={};function B(e){var r=e[0],o=e[2],i=e[4];function a(){if(o){var e=$t(o);T.apply(e,arguments)}if(this instanceof a){var t=U(r.prototype),n=r.apply(t,e||arguments);return Ce(n)?n:t}return r.apply(i,e||arguments)}return re(a,e),a}function Q(e,n,r,o,i){if(r){var a=r(e);if(void 0!==a)return a}if(!Ce(e))return e;var t=C.call(e);if(!xt[t])return e;var s=H[t];switch(t){case Mt:case Nt:return new s(+e);case Lt:case kt:return new s(e);case It:return(a=s(e.source,mt.exec(e))).lastIndex=e.lastIndex,a}var l=se(e);if(n){var d=!o;o||(o=zt()),i||(i=zt());for(var u=o.length;u--;)if(o[u]==e)return i[u];a=l?s(e.length):{}}else a=l?$t(e):pe({},e);return l&&(S.call(e,"index")&&(a.index=e.index),S.call(e,"input")&&(a.input=e.input)),n&&(o.push(e),i.push(a),(l?Ie:ge)(e,function(e,t){a[t]=Q(e,n,r,o,i)}),d&&(Kt(o),Kt(i))),a}function U(e,t){return Ce(e)?R(e):{}}function z(o,i,e){if("function"!=typeof o)return Ze;if(void 0===i||!("prototype"in o))return o;var t=o.__bindData__;if(void 0===t&&(D.funcNames&&(t=!o.name),!(t=t||!D.funcDecomp))){var n=h.call(o);D.funcNames||(t=!gt.test(n)),t||(t=bt.test(n),re(o,t))}if(!1===t||!0!==t&&1&t[1])return o;switch(e){case 1:return function(e){return o.call(i,e)};case 2:return function(e,t){return o.call(i,e,t)};case 3:return function(e,t,n){return o.call(i,e,t,n)};case 4:return function(e,t,n,r){return o.call(i,e,t,n,r)}}return Ge(o,i)}function F(e){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],d=1&o,u=2&o,c=4&o,f=8&o,p=r;function h(){var e=d?s:this;if(i){var t=$t(i);T.apply(t,arguments)}if((a||c)&&(t||(t=$t(arguments)),a&&T.apply(t,a),c&&t.length<l))return o|=16,F([r,f?o:-4&o,t,null,s,l]);if(t||(t=arguments),u&&(r=e[p]),this instanceof h){e=U(r.prototype);var n=r.apply(e,t);return Ce(n)?n:e}return r.apply(e,t)}return re(h,e),h}function K(e,t){var n=-1,r=te(),o=e?e.length:0,i=dt<=o&&r===jt,a=[];if(i){var s=Qt(t);s?(r=Pt,t=s):i=!1}for(;++n<o;){var l=e[n];r(t,l)<0&&a.push(l)}return i&&qt(t),a}function q(e,t,n,r){for(var o=(r||0)-1,i=e?e.length:0,a=[];++o<i;){var s=e[o];if(s&&"object"==typeof s&&"number"==typeof s.length&&(se(s)||ae(s))){t||(s=q(s,t,n));var l=-1,d=s.length,u=a.length;for(a.length+=d;++l<d;)a[u++]=s[l]}else n||a.push(s)}return a}function $(r,e,o,i,a,s){if(o){var l=o(r,e);if(void 0!==l)return!!l}if(r===e)return 0!==r||1/r==1/e;var t=typeof e;if(!(r!=r||r&&Yt[typeof r]||e&&Yt[t]))return!1;if(null==r||null==e)return r===e;var n=C.call(r),d=C.call(e);if(n==wt&&(n=Wt),d==wt&&(d=Wt),n!=d)return!1;switch(n){case Mt:case Nt:return+r==+e;case Lt:return r!=+r?e!=+e:0==r?1/r==1/e:r==+e;case It:case kt:return r==b(e)}var u=n==Et;if(!u){var c=S.call(r,"__wrapped__"),f=S.call(e,"__wrapped__");if(c||f)return $(c?r.__wrapped__:r,f?e.__wrapped__:e,o,i,a,s);if(n!=Wt)return!1;var p=r.constructor,h=e.constructor;if(p!=h&&!(be(p)&&p instanceof p&&be(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}var m=!a;a||(a=zt()),s||(s=zt());for(var g=a.length;g--;)if(a[g]==r)return s[g]==e;var _=0;if(l=!0,a.push(r),s.push(e),u){if(g=r.length,_=e.length,(l=_==g)||i)for(;_--;){var y=g,v=e[_];if(i)for(;y--&&!(l=$(r[y],v,o,i,a,s)););else if(!(l=$(r[_],v,o,i,a,s)))break}}else me(e,function(e,t,n){if(S.call(n,t))return _++,l=S.call(r,t)&&$(r[t],e,o,i,a,s)}),l&&!i&&me(r,function(e,t,n){if(S.call(n,t))return l=-1<--_});return a.pop(),s.pop(),m&&(Kt(a),Kt(s)),l}function X(l,e,d,u,c){(se(e)?Ie:ge)(e,function(e,t){var n,r,o=e,i=l[t];if(e&&((r=se(e))||Te(e))){for(var a,s=u.length;s--;)if(n=u[s]==e){i=c[s];break}n||(d&&(a=void 0!==(o=d(i,e)))&&(i=o),a||(i=r?se(i)?i:[]:Te(i)?i:{}),u.push(e),c.push(i),a||X(i,e,d,u,c))}else d&&void 0===(o=d(i,e))&&(o=e),void 0!==o&&(i=o);l[t]=i})}function G(e,t){return e+p(Y()*(t-e+1))}function V(e,t,n){var r=-1,o=te(),i=e?e.length:0,a=[],s=!t&&dt<=i&&o===jt,l=n||s?zt():a;for(s&&(o=Pt,l=Qt(l));++r<i;){var d=e[r],u=n?n(d,r,e):d;(t?!r||l[l.length-1]!==u:o(l,u)<0)&&((n||s)&&l.push(u),a.push(d))}return s?(Kt(l.array),qt(l)):n&&Kt(l),a}function Z(s){return function(e,r,t){var o={};r=j.createCallback(r,t,3);var n=-1,i=e?e.length:0;if("number"==typeof i)for(;++n<i;){var a=e[n];s(o,a,r(a,n,e),e)}else ge(e,function(e,t,n){s(o,e,r(e,t,n),n)});return o}}function J(e,t,n,r,o,i){var a=1&t,s=4&t,l=16&t,d=32&t;if(!(2&t||be(e)))throw new y;l&&!n.length&&(t&=-17,l=n=!1),d&&!r.length&&(t&=-33,d=r=!1);var u=e&&e.__bindData__;return u&&!0!==u?((u=$t(u))[2]&&(u[2]=$t(u[2])),u[3]&&(u[3]=$t(u[3])),!a||1&u[1]||(u[4]=o),!a&&1&u[1]&&(t|=8),!s||4&u[1]||(u[5]=i),l&&T.apply(u[2]||(u[2]=[]),n),d&&M.apply(u[3]||(u[3]=[]),r),u[1]|=t,J.apply(null,u)):(1==t||17===t?B:F)([e,t,n,r,o,i])}function ee(e){return de[e]}function te(){var e=(e=j.indexOf)===ze?jt:e;return e}function ne(e){return"function"==typeof e&&c.test(e)}D.funcDecomp=!ne(r.WinRTError)&&bt.test(e),D.funcNames="string"==typeof g.name,j.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:_t,variable:"",imports:{_:j}},R||(U=function(){function n(){}return function(e){if(Ce(e)){n.prototype=e;var t=new n;n.prototype=null}return t||r.Object()}}());var re=N?function(e,t){At.value=t,N(e,"__bindData__",At),At.value=null}:et;function oe(e){var t,n;return!(!e||C.call(e)!=Wt||be(t=e.constructor)&&!(t instanceof t))&&(me(e,function(e,t){n=t}),void 0===n||S.call(e,n))}function ie(e){return ue[e]}function ae(e){return e&&"object"==typeof e&&"number"==typeof e.length&&C.call(e)==wt||!1}var se=L||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&C.call(e)==Et||!1},le=k?function(e){return Ce(e)?k(e):[]}:function(e){var t,n=e,r=[];if(!n)return r;if(!Yt[typeof e])return r;for(t in n)S.call(n,t)&&r.push(t);return r},de={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ue=ve(de),ce=_("("+le(ue).join("|")+")","g"),fe=_("["+le(de).join("")+"]","g"),pe=function(e,t,n){var r,o=e,i=o;if(!o)return i;var a=arguments,s=0,l="number"==typeof n?2:a.length;if(3<l&&"function"==typeof a[l-2])var d=z(a[--l-1],a[l--],2);else 2<l&&"function"==typeof a[l-1]&&(d=a[--l]);for(;++s<l;)if((o=a[s])&&Yt[typeof o])for(var u=-1,c=Yt[typeof o]&&le(o),f=c?c.length:0;++u<f;)i[r=c[u]]=d?d(i[r],o[r]):o[r];return i};var he=function(e,t,n){var r,o=e,i=o;if(!o)return i;for(var a=arguments,s=0,l="number"==typeof n?2:a.length;++s<l;)if((o=a[s])&&Yt[typeof o])for(var d=-1,u=Yt[typeof o]&&le(o),c=u?u.length:0;++d<c;)void 0===i[r=u[d]]&&(i[r]=o[r]);return i};var me=function(e,t,n){var r,o=e,i=o;if(!o)return i;if(!Yt[typeof o])return i;for(r in t=t&&void 0===n?t:z(t,n,3),o)if(!1===t(o[r],r,e))return i;return i};var ge=function(e,t,n){var r,o=e,i=o;if(!o)return i;if(!Yt[typeof o])return i;t=t&&void 0===n?t:z(t,n,3);for(var a=-1,s=Yt[typeof o]&&le(o),l=s?s.length:0;++a<l;)if(!1===t(o[r=s[a]],r,e))return i;return i};function _e(e,t,n){var r=le(e),o=r.length;for(t=z(t,n,3);o--;){var i=r[o];if(!1===t(e[i],i,e))break}return e}function ye(e){var n=[];return me(e,function(e,t){be(e)&&n.push(t)}),n.sort()}function ve(e){for(var t=-1,n=le(e),r=n.length,o={};++t<r;){var i=n[t];o[e[i]]=i}return o}function be(e){return"function"==typeof e}function Ce(e){return!(!e||!Yt[typeof e])}function Se(e){return"number"==typeof e||e&&"object"==typeof e&&C.call(e)==Lt||!1}var Te=m?function(e){if(!e||C.call(e)!=Wt)return!1;var t=e.valueOf,n=ne(t)&&(n=m(t))&&m(n);return n?e==n||m(e)==n:oe(e)}:oe;function we(e){return"string"==typeof e||e&&"object"==typeof e&&C.call(e)==kt||!1}function Ee(e){for(var t=-1,n=le(e),r=n.length,o=l(r);++t<r;)o[t]=e[n[t]];return o}function Me(e,t,n){var r=-1,o=te(),i=e?e.length:0,a=!1;return n=(n<0?x(0,i+n):n)||0,se(e)?a=-1<o(e,t,n):"number"==typeof i?a=-1<(we(e)?e.indexOf(t,n):o(e,t,n)):ge(e,function(e){if(++r>=n)return!(a=e===t)}),a}var Ne=Z(function(e,t,n){S.call(e,n)?e[n]++:e[n]=1});function Re(e,r,t){var o=!0;r=j.createCallback(r,t,3);var n=-1,i=e?e.length:0;if("number"==typeof i)for(;++n<i&&(o=!!r(e[n],n,e)););else ge(e,function(e,t,n){return o=!!r(e,t,n)});return o}function Le(e,r,t){var o=[];r=j.createCallback(r,t,3);var n=-1,i=e?e.length:0;if("number"==typeof i)for(;++n<i;){var a=e[n];r(a,n,e)&&o.push(a)}else ge(e,function(e,t,n){r(e,t,n)&&o.push(e)});return o}function We(e,r,t){r=j.createCallback(r,t,3);var o,n=-1,i=e?e.length:0;if("number"!=typeof i)return ge(e,function(e,t,n){if(r(e,t,n))return o=e,!1}),o;for(;++n<i;){var a=e[n];if(r(a,n,e))return a}}function Ie(e,t,n){var r=-1,o=e?e.length:0;if(t=t&&void 0===n?t:z(t,n,3),"number"==typeof o)for(;++r<o&&!1!==t(e[r],r,e););else ge(e,t);return e}function ke(e,r,t){var o=e?e.length:0;if(r=r&&void 0===t?r:z(r,t,3),"number"==typeof o)for(;o--&&!1!==r(e[o],o,e););else{var i=le(e);o=i.length,ge(e,function(e,t,n){return t=i?i[--o]:--o,r(n[t],t,n)})}return e}var xe=Z(function(e,t,n){(S.call(e,n)?e[n]:e[n]=[]).push(t)}),Oe=Z(function(e,t,n){e[n]=t});function Ae(e,r,t){var o=-1,n=e?e.length:0;if(r=j.createCallback(r,t,3),"number"==typeof n)for(var i=l(n);++o<n;)i[o]=r(e[o],o,e);else i=[],ge(e,function(e,t,n){i[++o]=r(e,t,n)});return i}function Ye(e,o,t){var i=-1/0,a=i;if("function"!=typeof o&&t&&t[o]===e&&(o=null),null==o&&se(e))for(var n=-1,r=e.length;++n<r;){var s=e[n];a<s&&(a=s)}else o=null==o&&we(e)?Dt:j.createCallback(o,t,3),Ie(e,function(e,t,n){var r=o(e,t,n);i<r&&(i=r,a=e)});return a}var He=Ae;function je(e,r,o,t){if(!e)return o;var i=arguments.length<3;r=j.createCallback(r,t,4);var n=-1,a=e.length;if("number"==typeof a)for(i&&(o=e[++n]);++n<a;)o=r(o,e[n],n,e);else ge(e,function(e,t,n){o=i?(i=!1,e):r(o,e,t,n)});return o}function Pe(e,r,o,t){var i=arguments.length<3;return r=j.createCallback(r,t,4),ke(e,function(e,t,n){o=i?(i=!1,e):r(o,e,t,n)}),o}function De(e){var n=-1,t=e?e.length:0,r=l("number"==typeof t?t:0);return Ie(e,function(e){var t=G(0,++n);r[n]=r[t],r[t]=e}),r}function Be(e,r,t){var o;r=j.createCallback(r,t,3);var n=-1,i=e?e.length:0;if("number"==typeof i)for(;++n<i&&!(o=r(e[n],n,e)););else ge(e,function(e,t,n){return!(o=r(e,t,n))});return!!o}var Qe=Le;function Ue(e,t,n){var r=0,o=e?e.length:0;if("number"!=typeof t&&null!=t){var i=-1;for(t=j.createCallback(t,n,3);++i<o&&t(e[i],i,e);)r++}else if(null==(r=t)||n)return e?e[0]:at;return $t(e,0,O(x(0,r),o))}function ze(e,t,n){if("number"==typeof n){var r=e?e.length:0;n=n<0?x(0,r+n):n||0}else if(n){var o=Ke(e,t);return e[o]===t?o:-1}return jt(e,t,n)}function Fe(e,t,n){if("number"!=typeof t&&null!=t){var r=0,o=-1,i=e?e.length:0;for(t=j.createCallback(t,n,3);++o<i&&t(e[o],o,e);)r++}else r=null==t||n?1:x(0,t);return $t(e,r)}function Ke(e,t,n,r){var o=0,i=e?e.length:o;for(t=(n=n?j.createCallback(n,r,1):Ze)(t);o<i;){var a=o+i>>>1;n(e[a])<t?o=a+1:i=a}return o}function qe(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=j.createCallback(n,r,3)),V(e,t,n)}function $e(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,n=e?Ye(He(e,"length")):0,r=l(n<0?0:n);++t<n;)r[t]=He(e,t);return r}function Xe(e,t){var n=-1,r=e?e.length:0,o={};for(t||!r||se(e[0])||(t=[]);++n<r;){var i=e[n];t?o[i]=t[n]:i&&(o[i[0]]=i[1])}return o}function Ge(e,t){return 2<arguments.length?J(e,17,$t(arguments,2),null,t):J(e,1,null,null,t)}function Ve(r,o,e){var i,a,s,l,d,u,c,f=0,p=!1,h=!0;if(!be(r))throw new y;if(o=x(0,o)||0,!0===e){var m=!0;h=!1}else Ce(e)&&(m=e.leading,p="maxWait"in e&&(x(o,e.maxWait)||0),h="trailing"in e?e.trailing:h);var g=function(){var e=o-(nt()-l);if(e<=0){a&&v(a);var t=c;a=u=c=at,t&&(f=nt(),s=r.apply(d,i),u||a||(i=d=null))}else u=w(g,e)},_=function(){u&&v(u),a=u=c=at,(h||p!==o)&&(f=nt(),s=r.apply(d,i),u||a||(i=d=null))};return function(){if(i=arguments,l=nt(),d=this,c=h&&(u||!m),!1===p)var e=m&&!u;else{a||m||(f=l);var t=p-(l-f),n=t<=0;n?(a&&(a=v(a)),f=l,s=r.apply(d,i)):a||(a=w(_,t))}return n&&u?u=v(u):u||o===p||(u=w(g,o)),e&&(n=!0,s=r.apply(d,i)),!n||u||a||(i=d=null),s}}function Ze(e){return e}function Je(i,t,e){var a=!0,n=t&&ye(t);t&&(e||n.length)||(null==e&&(e=t),s=P,t=i,i=j,n=ye(t)),!1===e?a=!1:Ce(e)&&"chain"in e&&(a=e.chain);var s=i,r=be(s);Ie(n,function(e){var o=i[e]=t[e];r&&(s.prototype[e]=function(){var e=this.__chain__,t=this.__wrapped__,n=[t];T.apply(n,arguments);var r=o.apply(i,n);if(a||e){if(t===r&&Ce(r))return this;(r=new s(r)).__chain__=e}return r})})}function et(){}var tt,nt=ne(nt=n.now)&&nt||function(){return(new n).getTime()},rt=8==A(ut+"08")?A:function(e,t){return A(we(e)?e.replace(yt,""):e,t||0)};function ot(t){return function(e){return e[t]}}function it(){return this.__wrapped__}return j.after=function(e,t){if(!be(t))throw new y;return function(){if(--e<1)return t.apply(this,arguments)}},j.assign=pe,j.at=function(e){for(var t=arguments,n=-1,r=q(t,!0,!1,1),o=t[2]&&t[2][t[1]]===e?1:r.length,i=l(o);++n<o;)i[n]=e[r[n]];return i},j.bind=Ge,j.bindAll=function(e){for(var t=1<arguments.length?q(arguments,!0,!1,1):ye(e),n=-1,r=t.length;++n<r;){var o=t[n];e[o]=J(e[o],1,null,null,e)}return e},j.bindKey=function(e,t){return 2<arguments.length?J(t,19,$t(arguments,2),null,e):J(t,3,null,null,e)},j.chain=function(e){return(e=new P(e)).__chain__=!0,e},j.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var o=e[t];o&&r.push(o)}return r},j.compose=function(){for(var n=arguments,e=n.length;e--;)if(!be(n[e]))throw new y;return function(){for(var e=arguments,t=n.length;t--;)e=[n[t].apply(this,e)];return e[0]}},j.constant=function(e){return function(){return e}},j.countBy=Ne,j.create=function(e,t){var n=U(e);return t?pe(n,t):n},j.createCallback=function(r,e,t){var n=typeof r;if(null==r||"function"==n)return z(r,e,t);if("object"!=n)return ot(r);var o=le(r),i=o[0],a=r[i];return 1!=o.length||a!=a||Ce(a)?function(e){for(var t=o.length,n=!1;t--&&(n=$(e[o[t]],r[o[t]],null,!0)););return n}:function(e){var t=e[i];return a===t&&(0!==a||1/a==1/t)}},j.curry=function(e,t){return J(e,4,null,null,null,t="number"==typeof t?t:+t||e.length)},j.debounce=Ve,j.defaults=he,j.defer=function(e){if(!be(e))throw new y;var t=$t(arguments,1);return w(function(){e.apply(at,t)},1)},j.delay=function(e,t){if(!be(e))throw new y;var n=$t(arguments,2);return w(function(){e.apply(at,n)},t)},j.difference=function(e){return K(e,q(arguments,!0,!0,1))},j.filter=Le,j.flatten=function(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=Ae(e,n,r)),q(e,t)},j.forEach=Ie,j.forEachRight=ke,j.forIn=me,j.forInRight=function(e,t,n){var r=[];me(e,function(e,t){r.push(t,e)});var o=r.length;for(t=z(t,n,3);o--&&!1!==t(r[o--],r[o],e););return e},j.forOwn=ge,j.forOwnRight=_e,j.functions=ye,j.groupBy=xe,j.indexBy=Oe,j.initial=function(e,t,n){var r=0,o=e?e.length:0;if("number"!=typeof t&&null!=t){var i=o;for(t=j.createCallback(t,n,3);i--&&t(e[i],i,e);)r++}else r=null==t||n?1:t||r;return $t(e,0,O(x(0,o-r),o))},j.intersection=function(){for(var e=[],t=-1,n=arguments.length,r=zt(),o=te(),i=o===jt,a=zt();++t<n;){var s=arguments[t];(se(s)||ae(s))&&(e.push(s),r.push(i&&s.length>=dt&&Qt(t?e[t]:a)))}var l=e[0],d=-1,u=l?l.length:0,c=[];e:for(;++d<u;){var f=r[0];if(s=l[d],(f?Pt(f,s):o(a,s))<0){for(t=n,(f||a).push(s);--t;)if(((f=r[t])?Pt(f,s):o(e[t],s))<0)continue e;c.push(s)}}for(;n--;)(f=r[n])&&qt(f);return Kt(r),Kt(a),c},j.invert=ve,j.invoke=function(e,t){var n=$t(arguments,2),r=-1,o="function"==typeof t,i=e?e.length:0,a=l("number"==typeof i?i:0);return Ie(e,function(e){a[++r]=(o?t:e[t]).apply(e,n)}),a},j.keys=le,j.map=Ae,j.mapValues=function(e,r,t){var o={};return r=j.createCallback(r,t,3),ge(e,function(e,t,n){o[t]=r(e,t,n)}),o},j.max=Ye,j.memoize=function(n,r){if(!be(n))throw new y;var o=function(){var e=o.cache,t=r?r.apply(this,arguments):lt+arguments[0];return S.call(e,t)?e[t]:e[t]=n.apply(this,arguments)};return o.cache={},o},j.merge=function(e){var t=arguments,n=2;if(!Ce(e))return e;if("number"!=typeof t[2]&&(n=t.length),3<n&&"function"==typeof t[n-2])var r=z(t[--n-1],t[n--],2);else 2<n&&"function"==typeof t[n-1]&&(r=t[--n]);for(var o=$t(arguments,1,n),i=-1,a=zt(),s=zt();++i<n;)X(e,o[i],r,a,s);return Kt(a),Kt(s),e},j.min=function(e,o,t){var i=1/0,a=i;if("function"!=typeof o&&t&&t[o]===e&&(o=null),null==o&&se(e))for(var n=-1,r=e.length;++n<r;){var s=e[n];s<a&&(a=s)}else o=null==o&&we(e)?Dt:j.createCallback(o,t,3),Ie(e,function(e,t,n){var r=o(e,t,n);r<i&&(i=r,a=e)});return a},j.omit=function(e,r,t){var o={};if("function"!=typeof r){var n=[];me(e,function(e,t){n.push(t)});for(var i=-1,a=(n=K(n,q(arguments,!0,!1,1))).length;++i<a;){var s=n[i];o[s]=e[s]}}else r=j.createCallback(r,t,3),me(e,function(e,t,n){r(e,t,n)||(o[t]=e)});return o},j.once=function(e){var t,n;if(!be(e))throw new y;return function(){return t||(t=!0,n=e.apply(this,arguments),e=null),n}},j.pairs=function(e){for(var t=-1,n=le(e),r=n.length,o=l(r);++t<r;){var i=n[t];o[t]=[i,e[i]]}return o},j.partial=function(e){return J(e,16,$t(arguments,1))},j.partialRight=function(e){return J(e,32,null,$t(arguments,1))},j.pick=function(e,r,t){var o={};if("function"!=typeof r)for(var n=-1,i=q(arguments,!0,!1,1),a=Ce(e)?i.length:0;++n<a;){var s=i[n];s in e&&(o[s]=e[s])}else r=j.createCallback(r,t,3),me(e,function(e,t,n){r(e,t,n)&&(o[t]=e)});return o},j.pluck=He,j.property=ot,j.pull=function(e){for(var t=arguments,n=0,r=t.length,o=e?e.length:0;++n<r;)for(var i=-1,a=t[n];++i<o;)e[i]===a&&(E.call(e,i--,1),o--);return e},j.range=function(e,t,n){e=+e||0,null==t&&(t=e,e=0);for(var r=-1,o=x(0,f((t-e)/((n="number"==typeof n?n:+n||1)||1))),i=l(o);++r<o;)i[r]=e,e+=n;return i},j.reject=function(e,r,t){return r=j.createCallback(r,t,3),Le(e,function(e,t,n){return!r(e,t,n)})},j.remove=function(e,t,n){var r=-1,o=e?e.length:0,i=[];for(t=j.createCallback(t,n,3);++r<o;){var a=e[r];t(a,r,e)&&(i.push(a),E.call(e,r--,1),o--)}return i},j.rest=Fe,j.shuffle=De,j.sortBy=function(e,o,t){var i=-1,a=se(o),n=e?e.length:0,s=l("number"==typeof n?n:0);for(a||(o=j.createCallback(o,t,3)),Ie(e,function(t,e,n){var r=s[++i]=Ft();a?r.criteria=Ae(o,function(e){return t[e]}):(r.criteria=zt())[0]=o(t,e,n),r.index=i,r.value=t}),n=s.length,s.sort(Bt);n--;){var r=s[n];s[n]=r.value,a||Kt(r.criteria),qt(r)}return s},j.tap=function(e,t){return t(e),e},j.throttle=function(e,t,n){var r=!0,o=!0;if(!be(e))throw new y;return!1===n?r=!1:Ce(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),Ot.leading=r,Ot.maxWait=t,Ot.trailing=o,Ve(e,t,Ot)},j.times=function(e,t,n){e=-1<(e=+e)?e:0;var r=-1,o=l(e);for(t=z(t,n,1);++r<e;)o[r]=t(r);return o},j.toArray=function(e){return e&&"number"==typeof e.length?$t(e):Ee(e)},j.transform=function(e,r,o,t){var n=se(e);if(null==o)if(n)o=[];else{var i=e&&e.constructor,a=i&&i.prototype;o=U(a)}return r&&(r=j.createCallback(r,t,4),(n?Ie:ge)(e,function(e,t,n){return r(o,e,t,n)})),o},j.union=function(){return V(q(arguments,!0,!0))},j.uniq=qe,j.values=Ee,j.where=Qe,j.without=function(e){return K(e,$t(arguments,1))},j.wrap=function(e,t){return J(t,16,[e])},j.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(se(n)||ae(n))var r=r?V(K(r,n).concat(K(n,r))):n}return r||[]},j.zip=$e,j.zipObject=Xe,j.collect=Ae,j.drop=Fe,j.each=Ie,j.eachRight=ke,j.extend=pe,j.methods=ye,j.object=Xe,j.select=Le,j.tail=Fe,j.unique=qe,j.unzip=$e,Je(j),j.clone=function(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),Q(e,t,"function"==typeof n&&z(n,r,1))},j.cloneDeep=function(e,t,n){return Q(e,!0,"function"==typeof t&&z(t,n,1))},j.contains=Me,j.escape=function(e){return null==e?"":b(e).replace(fe,ee)},j.every=Re,j.find=We,j.findIndex=function(e,t,n){var r=-1,o=e?e.length:0;for(t=j.createCallback(t,n,3);++r<o;)if(t(e[r],r,e))return r;return-1},j.findKey=function(e,r,t){var o;return r=j.createCallback(r,t,3),ge(e,function(e,t,n){if(r(e,t,n))return o=t,!1}),o},j.findLast=function(e,r,t){var o;return r=j.createCallback(r,t,3),ke(e,function(e,t,n){if(r(e,t,n))return o=e,!1}),o},j.findLastIndex=function(e,t,n){var r=e?e.length:0;for(t=j.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1},j.findLastKey=function(e,r,t){var o;return r=j.createCallback(r,t,3),_e(e,function(e,t,n){if(r(e,t,n))return o=t,!1}),o},j.has=function(e,t){return!!e&&S.call(e,t)},j.identity=Ze,j.indexOf=ze,j.isArguments=ae,j.isArray=se,j.isBoolean=function(e){return!0===e||!1===e||e&&"object"==typeof e&&C.call(e)==Mt||!1},j.isDate=function(e){return e&&"object"==typeof e&&C.call(e)==Nt||!1},j.isElement=function(e){return e&&1===e.nodeType||!1},j.isEmpty=function(e){var t=!0;if(!e)return t;var n=C.call(e),r=e.length;return n==Et||n==kt||n==wt||n==Wt&&"number"==typeof r&&be(e.splice)?!r:(ge(e,function(){return t=!1}),t)},j.isEqual=function(e,t,n,r){return $(e,t,"function"==typeof n&&z(n,r,2))},j.isFinite=function(e){return W(e)&&!I(parseFloat(e))},j.isFunction=be,j.isNaN=function(e){return Se(e)&&e!=+e},j.isNull=function(e){return null===e},j.isNumber=Se,j.isObject=Ce,j.isPlainObject=Te,j.isRegExp=function(e){return e&&"object"==typeof e&&C.call(e)==It||!1},j.isString=we,j.isUndefined=function(e){return void 0===e},j.lastIndexOf=function(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(n<0?x(0,r+n):O(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},j.mixin=Je,j.noConflict=function(){return r._=u,this},j.noop=et,j.now=nt,j.parseInt=rt,j.random=function(e,t,n){var r=null==e,o=null==t;if(null==n&&("boolean"==typeof e&&o?(n=e,e=1):o||"boolean"!=typeof t||(n=t,o=!0)),r&&o&&(t=1),e=+e||0,o?(t=e,e=0):t=+t||0,n||e%1||t%1){var i=Y();return O(e+i*(t-e+parseFloat("1e-"+((i+"").length-1))),t)}return G(e,t)},j.reduce=je,j.reduceRight=Pe,j.result=function(e,t){if(e){var n=e[t];return be(n)?e[t]():n}},j.runInContext=e,j.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:le(e).length},j.some=Be,j.sortedIndex=Ke,j.template=function(a,e,t){var n=j.templateSettings;a=b(a||""),t=he({},t,n);var s,r=he({},t.imports,n.imports),o=le(r),i=Ee(r),l=0,d=t.interpolate||vt,u="__p += '",c=_((t.escape||vt).source+"|"+d.source+"|"+(d===_t?ht:vt).source+"|"+(t.evaluate||vt).source+"|$","g");a.replace(c,function(e,t,n,r,o,i){return n||(n=r),u+=a.slice(l,i).replace(Ct,Ut),t&&(u+="' +\n__e("+t+") +\n'"),o&&(s=!0,u+="';\n"+o+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=i+e.length,e}),u+="';\n";var f=t.variable,p=f;p||(u="with ("+(f="obj")+") {\n"+u+"\n}\n"),u=(s?u.replace(ct,""):u).replace(ft,"$1").replace(pt,"$1;"),u="function("+f+") {\n"+(p?"":f+" || ("+f+" = {});\n")+"var __t, __p = '', __e = _.escape"+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var h="\n/*\n//# sourceURL="+(t.sourceURL||"/lodash/template/source["+Tt+++"]")+"\n*/";try{var m=g(o,"return "+u+h).apply(at,i)}catch(e){throw e.source=u,e}return e?m(e):(m.source=u,m)},j.unescape=function(e){return null==e?"":b(e).replace(ce,ie)},j.uniqueId=function(e){var t=++st;return b(null==e?"":e)+t},j.all=Re,j.any=Be,j.detect=We,j.findWhere=We,j.foldl=je,j.foldr=Pe,j.include=Me,j.inject=je,Je((tt={},ge(j,function(e,t){j.prototype[t]||(tt[t]=e)}),tt),!1),j.first=Ue,j.last=function(e,t,n){var r=0,o=e?e.length:0;if("number"!=typeof t&&null!=t){var i=o;for(t=j.createCallback(t,n,3);i--&&t(e[i],i,e);)r++}else if(null==(r=t)||n)return e?e[o-1]:at;return $t(e,x(0,o-r))},j.sample=function(e,t,n){if(e&&"number"!=typeof e.length&&(e=Ee(e)),null==t||n)return e?e[G(0,e.length-1)]:at;var r=De(e);return r.length=O(x(0,t),r.length),r},j.take=Ue,j.head=Ue,ge(j,function(o,e){var i="sample"!==e;j.prototype[e]||(j.prototype[e]=function(e,t){var n=this.__chain__,r=o(this.__wrapped__,e,t);return n||null!=e&&(!t||i&&"function"==typeof e)?new P(r,n):r})}),j.VERSION="2.4.2",j.prototype.chain=function(){return this.__chain__=!0,this},j.prototype.toString=function(){return b(this.__wrapped__)},j.prototype.value=it,j.prototype.valueOf=it,Ie(["join","pop","shift"],function(e){var n=s[e];j.prototype[e]=function(){var e=this.__chain__,t=n.apply(this.__wrapped__,arguments);return e?new P(t,e):t}}),Ie(["push","reverse","sort","unshift"],function(e){var t=s[e];j.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Ie(["concat","slice","splice"],function(e){var t=s[e];j.prototype[e]=function(){return new P(t.apply(this.__wrapped__,arguments),this.__chain__)}}),j}();e&&i?a?(i.exports=Xt)._=Xt:e._=Xt:Ht._=Xt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,n,r){!function(e,t){"use strict";"object"==typeof r?n.exports=t():e.UltraDeepClone=t()}(this,function(){var t=r(function(e){return e}),n=o(r(function(e){var t=e.length;return new e.constructor(t)}),["BYTES_PER_ELEMENT","get","set","slice","subarray","buffer","length","byteOffset","byteLength"]);function e(e){return"[object "+e+"]"}var i={};function r(o){return function(e,t,n){t.push(e);var r=o(e);return n.push(r),r}}function o(e,t){return function(r,o,i){var a=this;return Object.getOwnPropertyNames(r).filter(function(e){return!t||-1===t.indexOf(e)}).reduce(function(e,t){var n=o.indexOf(r[t]);return e[t]=-1===n?a(r[t]):i[n],e},e(r,o,i))}}return i[e("RegExp")]=r(function(e){return new RegExp(e)}),i[e("Date")]=r(function(e){return new Date(e.getTime())}),i[e("Function")]=o(r(function(e){return t=e,n=function(e){for(var t=[],n=1;n<=e;n++)t.push("arg"+n);return t}(t.length),r="return false || function ",r+=t.name+"(",r+=n.join(", ")+") {\n",r+="return fn.apply(this, arguments);\n",r+="};",Function("fn",r)(t);var t,n,r}),["caller","arguments"]),i[e("Object")]=o(r(function(e){return Object.create(Object.getPrototypeOf(e))})),i[e("Array")]=o(r(function(e){return[]})),["Null","Undefined","Number","String","Boolean"].map(e).forEach(function(e){i[e]=t}),["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].map(e).forEach(function(e){i[e]=n}),function(e){var r=[],o=[];return function e(t){var n=Object.prototype.toString.call(t);return i[n].call(e,t,r,o)}(e)}})},{}],16:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}},{}],17:[function(e,t,n){WYMeditor.EXTERNAL_MODULES.ObjectHistory=e("object-history")},{"object-history":1}]},{},[17])(17)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).foo=e()}}(function(){return function i(a,s,l){function d(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[n]={exports:{}};a[n][0].call(o.exports,function(e){var t=a[n][1][e];return d(t||e)},o,o.exports,i,a,s,l)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=this,n=t.constructor;return t.callbacks={},t.directMap={},t.sequenceLevels={},t.resetTimer,t.ignoreNextKeyup=!1,t.ignoreNextKeypress=!1,t.nextExpectedAction=!1,t.element=e,t.addEvents(),n.instances.push(t),t},t.exports.prototype.bind=e("./prototype/bind"),t.exports.prototype.bindMultiple=e("./prototype/bindMultiple"),t.exports.prototype.unbind=e("./prototype/unbind"),t.exports.prototype.trigger=e("./prototype/trigger"),t.exports.prototype.reset=e("./prototype/reset.js"),t.exports.prototype.stopCallback=e("./prototype/stopCallback"),t.exports.prototype.handleKey=e("./prototype/handleKey"),t.exports.prototype.addEvents=e("./prototype/addEvents"),t.exports.prototype.bindSingle=e("./prototype/bindSingle"),t.exports.prototype.getKeyInfo=e("./prototype/getKeyInfo"),t.exports.prototype.pickBestAction=e("./prototype/pickBestAction"),t.exports.prototype.getReverseMap=e("./prototype/getReverseMap"),t.exports.prototype.getMatches=e("./prototype/getMatches"),t.exports.prototype.resetSequences=e("./prototype/resetSequences"),t.exports.prototype.fireCallback=e("./prototype/fireCallback"),t.exports.prototype.bindSequence=e("./prototype/bindSequence"),t.exports.prototype.resetSequenceTimer=e("./prototype/resetSequenceTimer"),t.exports.prototype.detach=e("./prototype/detach"),t.exports.instances=[],t.exports.reset=e("./reset"),t.exports.REVERSE_MAP=null},{"./prototype/addEvents":2,"./prototype/bind":3,"./prototype/bindMultiple":4,"./prototype/bindSequence":5,"./prototype/bindSingle":6,"./prototype/detach":7,"./prototype/fireCallback":8,"./prototype/getKeyInfo":9,"./prototype/getMatches":10,"./prototype/getReverseMap":11,"./prototype/handleKey":12,"./prototype/pickBestAction":15,"./prototype/reset.js":16,"./prototype/resetSequenceTimer":17,"./prototype/resetSequences":18,"./prototype/stopCallback":19,"./prototype/trigger":20,"./prototype/unbind":21,"./reset":22}],2:[function(r,e,t){"use strict";e.exports=function(){var e=this,t=r("dom-event"),n=e.element;e.eventHandler=r("./handleKeyEvent").bind(e),t(n,"keypress",e.eventHandler),t(n,"keydown",e.eventHandler),t(n,"keyup",e.eventHandler)}},{"./handleKeyEvent":13,"dom-event":33}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e=e instanceof Array?e:[e],this.bindMultiple(e,t,n),this}},{}],4:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r=0;r<e.length;++r)this.bindSingle(e[r],t,n)}},{}],5:[function(d,e,t){"use strict";e.exports=function(n,e,r,o){var i=this;function t(e){return function(){i.nextExpectedAction=e,++i.sequenceLevels[n],i.resetSequenceTimer()}}function a(e){var t;i.fireCallback(r,e,n),"keyup"!==o&&(t=d("../../helpers/characterFromEvent"),i.ignoreNextKeyup=t(e)),setTimeout(function(){i.resetSequences()},10)}for(var s=i.sequenceLevels[n]=0;s<e.length;++s){var l=s+1===e.length?a:t(o||i.getKeyInfo(e[s+1]).action);i.bindSingle(e[s],l,o,n,s)}}},{"../../helpers/characterFromEvent":23}],6:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,o){var i=this;i.directMap[e+":"+n]=t;var a,s=(e=e.replace(/\s+/g," ")).split(" ");1<s.length?i.bindSequence(e,s,t,n):(a=i.getKeyInfo(e,n),i.callbacks[a.key]=i.callbacks[a.key]||[],i.getMatches(a.key,a.modifiers,{type:a.action},r,e,o),i.callbacks[a.key][r?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:r,level:o,combo:e}))}},{}],7:[function(e,t,n){var r=e("dom-event").off;t.exports=function(){var e=this.element;r(e,"keypress",this.eventHandler),r(e,"keydown",this.eventHandler),r(e,"keyup",this.eventHandler)}},{"dom-event":33}],8:[function(o,e,t){"use strict";e.exports=function(e,t,n,r){this.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(o("../../helpers/preventDefault")(t),o("../../helpers/stopPropagation")(t))}},{"../../helpers/preventDefault":27,"../../helpers/stopPropagation":32}],9:[function(d,e,t){"use strict";e.exports=function(e,t){var n,r,o,i,a,s,l=[];for(n=d("../../helpers/keysFromString")(e),i=d("../../helpers/special-aliases"),a=d("../../helpers/shift-map"),s=d("../../helpers/isModifier"),o=0;o<n.length;++o)i[r=n[o]]&&(r=i[r]),t&&"keypress"!==t&&a[r]&&(r=a[r],l.push("shift")),s(r)&&l.push(r);return{key:r,modifiers:l,action:t=this.pickBestAction(r,l,t)}}},{"../../helpers/isModifier":25,"../../helpers/keysFromString":26,"../../helpers/shift-map":28,"../../helpers/special-aliases":29}],10:[function(m,e,t){"use strict";e.exports=function(e,t,n,r,o,i){var a,s,l,d,u=this,c=[],f=n.type;"keypress"===f&&(u.callbacks["any-character"]||[]).forEach(function(e){c.push(e)});if(!u.callbacks[e])return c;for(l=m("../../helpers/isModifier"),"keyup"===f&&l(e)&&(t=[e]),a=0;a<u.callbacks[e].length;++a)if(s=u.callbacks[e][a],(r||!s.seq||u.sequenceLevels[s.seq]===s.level)&&f===s.action&&(d=m("./modifiersMatch"),"keypress"===f&&!n.metaKey&&!n.ctrlKey||d(t,s.modifiers))){var p=!r&&s.combo===o,h=r&&s.seq===r&&s.level===i;(p||h)&&u.callbacks[e].splice(a,1),c.push(s)}return c}},{"../../helpers/isModifier":25,"./modifiersMatch":14}],11:[function(r,e,t){"use strict";e.exports=function(){var e,t=this.constructor;if(!t.REVERSE_MAP)for(var n in t.REVERSE_MAP={},e=r("../../helpers/special-keys-map"))95<n&&n<112||e.hasOwnProperty(n)&&(t.REVERSE_MAP[e[n]]=n);return t.REVERSE_MAP}},{"../../helpers/special-keys-map":31}],12:[function(c,e,t){"use strict";e.exports=function(e,t,n){var r,o,i,a,s=this,l={},d=0,u=!1;for(r=s.getMatches(e,t,n),o=0;o<r.length;++o)r[o].seq&&(d=Math.max(d,r[o].level));for(o=0;o<r.length;++o)if(r[o].seq){if(r[o].level!==d)continue;u=!0,l[r[o].seq]=1,s.fireCallback(r[o].callback,n,r[o].combo,r[o].seq)}else u||s.fireCallback(r[o].callback,n,r[o].combo);a="keypress"===n.type&&s.ignoreNextKeypress,i=c("../../helpers/isModifier"),n.type!==s.nextExpectedAction||i(e)||a||s.resetSequences(l),s.ignoreNextKeypress=u&&"keydown"===n.type}},{"../../helpers/isModifier":25}],13:[function(r,e,t){"use strict";e.exports=function(e){var t;"number"!=typeof e.which&&(e.which=e.keyCode);var n=r("../../helpers/characterFromEvent")(e);n&&("keyup"!==e.type||this.ignoreNextKeyup!==n?(t=r("../../helpers/eventModifiers"),this.handleKey(n,t(e),e)):this.ignoreNextKeyup=!1)}},{"../../helpers/characterFromEvent":23,"../../helpers/eventModifiers":24}],14:[function(e,t,n){"use strict";t.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},{}],15:[function(e,t,n){"use strict";t.exports=function(e,t,n){return n||(n=this.getReverseMap()[e]?"keydown":"keypress"),"keypress"===n&&t.length&&(n="keydown"),n}},{}],16:[function(e,t,n){"use strict";t.exports=function(){return this.callbacks={},this.directMap={},this}},{}],17:[function(e,t,n){"use strict";t.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout(function(){e.resetSequences()},1e3)}},{}],18:[function(e,t,n){"use strict";t.exports=function(e){e=e||{};var t,n=!1;for(t in this.sequenceLevels)e[t]?n=!0:this.sequenceLevels[t]=0;n||(this.nextExpectedAction=!1)}},{}],19:[function(e,t,n){"use strict";t.exports=function(e,t){if(-1<(" "+t.className+" ").indexOf(" combokeys "))return!1;var n=t.tagName.toLowerCase();return"input"===n||"select"===n||"textarea"===n||t.isContentEditable}},{}],20:[function(e,t,n){"use strict";t.exports=function(e,t){return this.directMap[e+":"+t]&&this.directMap[e+":"+t]({},e),this}},{}],21:[function(e,t,n){"use strict";t.exports=function(e,t){return this.bind(e,function(){},t)}},{}],22:[function(e,t,n){"use strict";t.exports=function(){this.instances.forEach(function(e){e.reset()})}},{}],23:[function(o,e,t){"use strict";e.exports=function(e){var t,n;if(t=o("./special-keys-map"),n=o("./special-characters-map"),"keypress"===e.type){var r=String.fromCharCode(e.which);return e.shiftKey||(r=r.toLowerCase()),r}return t[e.which]?t[e.which]:n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase()}},{"./special-characters-map":30,"./special-keys-map":31}],24:[function(e,t,n){"use strict";t.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},{}],25:[function(e,t,n){"use strict";t.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},{}],26:[function(e,t,n){"use strict";t.exports=function(e){return"+"===e?["+"]:e.split("+")}},{}],27:[function(e,t,n){"use strict";t.exports=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},{}],28:[function(e,t,n){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},{}],29:[function(e,t,n){"use strict";t.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},{}],30:[function(e,t,n){"use strict";t.exports={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},{}],31:[function(e,t,n){"use strict";t.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",187:"plus",189:"minus",224:"meta"};for(var r=1;r<20;++r)t.exports[111+r]="f"+r;for(r=0;r<=9;++r)t.exports[r+96]=r},{}],32:[function(e,t,n){"use strict";t.exports=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},{}],33:[function(e,t,n){function r(e,t,n,r){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,n,r),n}t.exports=r,t.exports.on=r,t.exports.off=function(e,t,n,r){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,n,r),n}},{}],34:[function(e,t,n){WYMeditor.EXTERNAL_MODULES.Combokeys=e("combokeys")},{combokeys:1}]},{},[34])(34)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).foo=e()}}(function(){return function i(a,s,l){function d(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[n]={exports:{}};a[n][0].call(o.exports,function(e){var t=a[n][1][e];return d(t||e)},o,o.exports,i,a,s,l)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=this;if("function"!=typeof t)throw new Error("Expected a function");return r.element=e,r.onSensible=t,r.onAny=n,r.listen(),r},t.exports.prototype.listen=e("./prototype/listen"),t.exports.prototype.discern=e("./prototype/discern"),t.exports.prototype.reset=e("./prototype/reset"),t.exports.prototype.detach=e("./prototype/detach"),t.exports.prototype.callbackSensible=e("./prototype/callback-sensible"),t.exports.prototype.callbackAny=e("./prototype/callback-any")},{"./prototype/callback-any":2,"./prototype/callback-sensible":3,"./prototype/detach":4,"./prototype/discern":5,"./prototype/listen":6,"./prototype/reset":7}],2:[function(e,t,n){"use strict";t.exports=function(){(this.onAny||function(){}).call(this)}},{}],3:[function(e,t,n){"use strict";t.exports=function(){this.onSensible()}},{}],4:[function(e,t,n){"use strict";var r=e("dom-events").off,o=e("../../text-altering-event-types");t.exports=function(){var t=this;o.forEach(function(e){r(t.element,e,t.listener)})}},{"../../text-altering-event-types":8,"dom-events":11}],5:[function(e,t,n){"use strict";var r=e("../../textEditType");t.exports=function(e){var t=this,n=r(e);n&&(t.callbackAny(),t.previousEditType=t.lastEditType,t.lastEditType=n,t.previousEditType&&(t.lastEditType===t.previousEditType&&"paste"!==t.lastEditType&&"drop"!==t.lastEditType||t.callbackSensible()))}},{"../../textEditType":9}],6:[function(e,t,n){"use strict";var r,o;r=e("add-event-handler"),o=e("../../text-altering-event-types"),t.exports=function(){var t=this;t.listener=function(e){t.discern(e)},o.forEach(function(e){r(t.element,e,t.listener)})}},{"../../text-altering-event-types":8,"add-event-handler":10}],7:[function(e,t,n){"use strict";t.exports=function(){delete this.lastEditType}},{}],8:[function(e,t,n){"use strict";t.exports=["keydown","paste","drop"]},{}],9:[function(e,t,n){"use strict";var r=["backspace"],o=["del","delete"],i=["altKey","ctrlKey","metaKey"],a=e("keycode");t.exports=function(t){if("keydown"===t.type){var n;if(i.forEach(function(e){t[e]&&(n=!0)}),n)return!1;var e=a(t);return-1<r.indexOf(e)?"backwardsRemoval":-1<o.indexOf(e)?"forwardRemoval":"space"===e?e:"enter"===e?e:"characterAddition"}if("paste"===t.type)return t.type;if("drop"===t.type)return t.type;throw new Error("Shouldn't get this far")}},{keycode:15}],10:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent)return e.attachEvent("on"+t,n);throw"No event handler adding interface found"}},{}],11:[function(e,t,n){var o=e("synthetic-dom-events"),a=function(e,t,n,r){return e.addEventListener(t,n,r||!1)},s=function(e,t,n,r){return e.removeEventListener(t,n,r||!1)},r=function(e,t,n){var r=o(t,n);e.dispatchEvent(r)};document.addEventListener||(a=function(e,t,n){return e.attachEvent("on"+t,n)}),document.removeEventListener||(s=function(e,t,n){return e.detachEvent("on"+t,n)}),document.dispatchEvent||(r=function(e,t,n){var r=o(t,n);return e.fireEvent("on"+r.type,r)}),t.exports={on:a,off:s,once:function(n,r,o,i){a(n,r,function e(t){s(n,r,e,i),o(t)},i)},emit:r}},{"synthetic-dom-events":12}],12:[function(e,t,n){window;var m=document||{},g=(m.documentElement,!0);try{m.createEvent("KeyEvents")}catch(e){g=!1}t.exports=m.createEvent?function(e,t){t=t||{};var n=y(e),r=n;"KeyboardEvent"===n&&g&&(n="KeyEvents",r="KeyEvent");var o,i,a=m.createEvent(n),s="init"+r,l="function"==typeof a[s]?s:"initEvent",d=_[l],u=[],c={};t.type=e;for(var f=0;f<d.length;++f){var p=t[h=d[f]];void 0===p&&(p=a[h]),c[h]=!0,u.push(p)}for(var h in a[l].apply(a,u),"KeyboardEvent"===n&&(i=t,(o=a).ctrlKey==(i.ctrlKey||!1)&&o.altKey==(i.altKey||!1)&&o.shiftKey==(i.shiftKey||!1)&&o.metaKey==(i.metaKey||!1)&&o.keyCode==(i.keyCode||0)&&o.charCode==(i.charCode||0)||((o=document.createEvent("Event")).initEvent(i.type,i.bubbles,i.cancelable),o.ctrlKey=i.ctrlKey||!1,o.altKey=i.altKey||!1,o.shiftKey=i.shiftKey||!1,o.metaKey=i.metaKey||!1,o.keyCode=i.keyCode||0,o.charCode=i.charCode||0),a=o),t)c[h]||(a[h]=t[h]);return a}:function(e,t){t=t||{};var n=m.createEventObject();for(var r in n.type=e,t)void 0!==t[r]&&(n[r]=t[r]);return n};var _=e("./init.json"),o=e("./types.json"),y=function(){var t={};for(var e in o)for(var n=o[e],r=0;r<n.length;r++)t[n[r]]=e;return function(e){return t[e]||"Event"}}()},{"./init.json":13,"./types.json":14}],13:[function(e,t,n){t.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],14:[function(e,t,n){t.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],15:[function(e,t,n){var o=(n=t.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,r=String(e);return(n=o[r.toLowerCase()])?n:(n=i[r.toLowerCase()])||(1===r.length?r.charCodeAt(0):void 0)}).code=n.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=n.aliases={windows:91,"â§":16,"â¥":18,"â":17,"â":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};for(r=97;r<123;r++)o[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)o[r-48]=r;for(r=1;r<13;r++)o["f"+r]=r+111;for(r=0;r<10;r++)o["numpad "+r]=r+96;var a=n.names=n.title={};for(r in o)a[o[r]]=r;for(var s in i)o[s]=i[s]},{}],16:[function(e,t,n){WYMeditor.EXTERNAL_MODULES.Edited=e("edited")},{edited:1}]},{},[16])(16)}),WYMeditor.UndoRedo=function(e){(this.wym=e).keyboard.combokeys.bind("mod+z",function(){return e.undoRedo.undo(),!1}),e.keyboard.combokeys.bind(["shift+meta+z","mod+y"],function(){return e.undoRedo.redo(),!1})},WYMeditor.UndoRedo.prototype._onBodyFocus=function(){var e=this,t=e.wym;e.history||setTimeout(function(){e._instantiateHistory(t.getCurrentState())},0)},WYMeditor.UndoRedo.prototype._add=function(){var e=this.wym;this.history&&(this.history.add(e.getCurrentState()),this.hasUnregisteredModification=!1)},WYMeditor.UndoRedo.prototype._do=function(e){var t,n,r=this,o=r.wym,i=r.history;if(r.history){if(e===WYMeditor.UndoRedo.UN){if(0===i.lengthBackward())return;r.hasUnregisteredModification&&r._add(),i.backward(),n="postUndo"}else{if(e!==WYMeditor.UndoRedo.RE)throw"Single parameter must be either `'un'` or `'re'` (there are constants for those).";if(0===i.lengthForward())return;i.forward(),n="postRedo"}t=i.get(),o.rawHtml(t.html),t.savedSelection&&(t.savedSelection.win=o._iframe.contentWindow,t.savedSelection.doc=o._doc,rangy.restoreSelection(t.savedSelection)),jQuery(o.element).trigger(WYMeditor.EVENTS[n])}},WYMeditor.UndoRedo.UN="un",WYMeditor.UndoRedo.RE="re",WYMeditor.UndoRedo.prototype.redo=function(){this._do(WYMeditor.UndoRedo.RE)},WYMeditor.UndoRedo.prototype.undo=function(){this._do(WYMeditor.UndoRedo.UN)},WYMeditor.UndoRedo.prototype.reset=function(){var e=this.wym;this._instantiateHistory(e.getCurrentState()),this.hasUnregisteredModification=null},WYMeditor.UndoRedo.prototype._instantiateHistory=function(e){this.history=new WYMeditor.EXTERNAL_MODULES.ObjectHistory(e,{limit:100})},WYMeditor.Keyboard=function(e){return this._wym=e,this.combokeys=new WYMeditor.EXTERNAL_MODULES.Combokeys(e._doc),this},WYMeditor.Keyboard.DEFAULT_KEYBOARD_SHORTCUTS=[{combo:"mod+b",cb:function(){return this.exec(WYMeditor.EXEC_COMMANDS.BOLD),!1}},{combo:"mod+i",cb:function(){return this.exec(WYMeditor.EXEC_COMMANDS.ITALIC),!1}},{combo:"mod+k",cb:function(){return this.dialog(WYMeditor.DIALOGS.CreateLink),!1}},{combo:"tab",cb:function(){return!1}}],WYMeditor.Keyboard.prototype._attachDefaultKeyboardShortcuts=function(){var e,t,n=this._wym,r=this.constructor.DEFAULT_KEYBOARD_SHORTCUTS;for(t=0;t<r.length;t++)e=r[t],this.combokeys.bind(e.combo,function(e){return function(){return e.call(n)}}(e.cb))},WYMeditor.NativeEditRegistration=function(e){var t=this;t.wym=e,t.edited=new WYMeditor.EXTERNAL_MODULES.Edited(e._doc.body,t._onSensibleNativeEdit.bind(t),t._onAnyNativeEdit.bind(t))},WYMeditor.NativeEditRegistration.prototype._onSensibleNativeEdit=function(){this.wym.registerModification(!0)},WYMeditor.NativeEditRegistration.prototype._onAnyNativeEdit=function(){var e=this.wym.undoRedo;e.history&&e.history.forgetAllForward(),e.hasUnregisteredModification=!0},WYMeditor.LEXER_ENTER=1,WYMeditor.LEXER_MATCHED=2,WYMeditor.LEXER_UNMATCHED=3,WYMeditor.LEXER_EXIT=4,WYMeditor.LEXER_SPECIAL=5,WYMeditor.Lexer=function(e,t,n){return t=t||"accept",this._case=n||!1,this._regexes={},this._parser=e,this._mode=new WYMeditor.StateStack(t),this._mode_handlers={},this._mode_handlers[t]=t,this},WYMeditor.Lexer.prototype.addPattern=function(e,t){t=t||"accept",void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e),void 0===this._mode_handlers[t]&&(this._mode_handlers[t]=t)},WYMeditor.Lexer.prototype.addEntryPattern=function(e,t,n){void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,n),void 0===this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.addExitPattern=function(e,t){void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,"__exit"),void 0===this._mode_handlers[t]&&(this._mode_handlers[t]=t)},WYMeditor.Lexer.prototype.addSpecialPattern=function(e,t,n){void 0===this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,"_"+n),void 0===this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.mapHandler=function(e,t){this._mode_handlers[e]=t},WYMeditor.Lexer.prototype.parse=function(e){if(void 0===this._parser)return!1;for(var t,n=e.length;"object"==typeof(t=this._reduce(e));){e=t[0];var r=t[1],o=t[2],i=t[3];if(!this._dispatchTokens(r,o,i))return!1;if(""===e)return!0;if(e.length==n)return!1;n=e.length}return!!t&&this._invokeParser(e,WYMeditor.LEXER_UNMATCHED)},WYMeditor.Lexer.prototype._dispatchTokens=function(e,t,n){return n=n||!1,!!this._invokeParser(e,WYMeditor.LEXER_UNMATCHED)&&("boolean"==typeof n?this._invokeParser(t,WYMeditor.LEXER_MATCHED):this._isModeEnd(n)?!!this._invokeParser(t,WYMeditor.LEXER_EXIT)&&this._mode.leave():this._isSpecialMode(n)?(this._mode.enter(this._decodeSpecial(n)),!!this._invokeParser(t,WYMeditor.LEXER_SPECIAL)&&this._mode.leave()):(this._mode.enter(n),this._invokeParser(t,WYMeditor.LEXER_ENTER)))},WYMeditor.Lexer.prototype._isModeEnd=function(e){return"__exit"===e},WYMeditor.Lexer.prototype._isSpecialMode=function(e){return"_"==e.substring(0,1)},WYMeditor.Lexer.prototype._decodeSpecial=function(e){return e.substring(1)},WYMeditor.Lexer.prototype._invokeParser=function(e,t){if(""===e)return!0;var n=this._mode.getCurrent(),r=this._mode_handlers[n];return this._parser[r](e,t)},WYMeditor.Lexer.prototype._reduce=function(e){var t=this._regexes[this._mode.getCurrent()].match(e),n=t[1],r=t[0];if(r){var o=e.indexOf(n),i=e.substr(0,o);return[e=e.substring(o+n.length),i,n,r]}return!0},WYMeditor.ParallelRegex=function(e){return this._case=e,this._patterns=[],this._labels=[],this._regex=null,this},WYMeditor.ParallelRegex.prototype.addPattern=function(e,t){t=t||!0;var n=this._patterns.length;this._patterns[n]=e,this._labels[n]=t,this._regex=null},WYMeditor.ParallelRegex.prototype.match=function(e){if(0===this._patterns.length)return[!1,""];var t=e.match(this._getCompoundedRegex());if(!t)return[!1,""];for(var n=t[0],r=1;r<t.length;r++)if(t[r])return[this._labels[r-1],n];return[!0,t[0]]},WYMeditor.ParallelRegex.prototype._getCompoundedRegex=function(){if(null===this._regex){for(var e=0,t=this._patterns.length;e<t;e++)this._patterns[e]="("+this._untokenizeRegex(this._tokenizeRegex(this._patterns[e]).replace(/([\/\(\)])/g,"\\$1"))+")";this._regex=new RegExp(this._patterns.join("|"),this._getPerlMatchingFlags())}return this._regex},WYMeditor.ParallelRegex.prototype._tokenizeRegex=function(e){return e.replace(/\(\?(i|m|s|x|U)\)/,"~~~~~~Tk1$1~~~~~~").replace(/\(\?(\-[i|m|s|x|U])\)/,"~~~~~~Tk2$1~~~~~~").replace(/\(\?\=(.*)\)/,"~~~~~~Tk3$1~~~~~~").replace(/\(\?\!(.*)\)/,"~~~~~~Tk4$1~~~~~~").replace(/\(\?\<\=(.*)\)/,"~~~~~~Tk5$1~~~~~~").replace(/\(\?\<\!(.*)\)/,"~~~~~~Tk6$1~~~~~~").replace(/\(\?\:(.*)\)/,"~~~~~~Tk7$1~~~~~~")},WYMeditor.ParallelRegex.prototype._untokenizeRegex=function(e){return e.replace(/~~~~~~Tk1(.{1})~~~~~~/,"(?$1)").replace(/~~~~~~Tk2(.{2})~~~~~~/,"(?$1)").replace(/~~~~~~Tk3(.*)~~~~~~/,"(?=$1)").replace(/~~~~~~Tk4(.*)~~~~~~/,"(?!$1)").replace(/~~~~~~Tk5(.*)~~~~~~/,"(?<=$1)").replace(/~~~~~~Tk6(.*)~~~~~~/,"(?<!$1)").replace(/~~~~~~Tk7(.*)~~~~~~/,"(?:$1)")},WYMeditor.ParallelRegex.prototype._getPerlMatchingFlags=function(){return this._case?"m":"mi"},WYMeditor.StateStack=function(e){return this._stack=[e],this},WYMeditor.StateStack.prototype.getCurrent=function(){return this._stack[this._stack.length-1]},WYMeditor.StateStack.prototype.enter=function(e){this._stack.push(e)},WYMeditor.StateStack.prototype.leave=function(){return 1!=this._stack.length&&(this._stack.pop(),!0)},WYMeditor.XhtmlLexer=function(e){return jQuery.extend(this,new WYMeditor.Lexer(e,"Text")),this.mapHandler("Text","Text"),this.addTokens(),this.init(),this},WYMeditor.XhtmlLexer.prototype.init=function(){},WYMeditor.XhtmlLexer.prototype.addTokens=function(){this.addCommentTokens("Text"),this.addScriptTokens("Text"),this.addCssTokens("Text"),this.addTagTokens("Text")},WYMeditor.XhtmlLexer.prototype.addCommentTokens=function(e){this.addEntryPattern("\x3c!--",e,"Comment"),this.addExitPattern("--\x3e","Comment")},WYMeditor.XhtmlLexer.prototype.addScriptTokens=function(e){this.addEntryPattern("<script",e,"Script"),this.addExitPattern("<\/script>","Script")},WYMeditor.XhtmlLexer.prototype.addCssTokens=function(e){this.addEntryPattern("<style",e,"Css"),this.addExitPattern("</style>","Css")},WYMeditor.XhtmlLexer.prototype.addTagTokens=function(e){this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*/>",e,"SelfClosingTag"),this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*>",e,"OpeningTag"),this.addEntryPattern("<[a-z0-9:-]+[\\/ \\>]+",e,"OpeningTag"),this.addInTagDeclarationTokens("OpeningTag"),this.addSpecialPattern("</\\s*[a-z0-9:-]+\\s*>",e,"ClosingTag")},WYMeditor.XhtmlLexer.prototype.addInTagDeclarationTokens=function(e){this.addSpecialPattern("\\s+",e,"Ignore"),this.addAttributeTokens(e),this.addExitPattern("/>",e),this.addExitPattern(">",e)},WYMeditor.XhtmlLexer.prototype.addAttributeTokens=function(e){this.addSpecialPattern("\\s*[a-z-_0-9]*:?[a-z-_0-9]+\\s*(?==)\\s*",e,"TagAttributes"),this.addEntryPattern('=\\s*"',e,"DoubleQuotedAttribute"),this.addPattern('\\\\"',"DoubleQuotedAttribute"),this.addExitPattern('"',"DoubleQuotedAttribute"),this.addEntryPattern("=\\s*'",e,"SingleQuotedAttribute"),this.addPattern("\\\\'","SingleQuotedAttribute"),this.addExitPattern("'","SingleQuotedAttribute"),this.addSpecialPattern("=\\s*[^>\\s]*",e,"UnquotedAttribute")},WYMeditor.XhtmlParser=function(e,t){return t=t||"Text",this._Lexer=new WYMeditor.XhtmlLexer(this),this._Listener=e,this._mode=t,this._matches=[],this._last_match="",this._current_match="",this},WYMeditor.XhtmlParser.prototype.parse=function(e){return this._Lexer.parse(this.beforeParsing(e)),this.afterParsing(this._Listener.getResult())},WYMeditor.XhtmlParser.prototype.beforeParsing=function(e){return(e.match(/class="MsoNormal"/)||e.match(/ns = "urn:schemas-microsoft-com/))&&this._Listener.avoidStylingTagsAndAttributes(),this._Listener.beforeParsing(e)},WYMeditor.XhtmlParser.prototype.afterParsing=function(e){return this._Listener._avoiding_tags_implicitly&&this._Listener.allowStylingTagsAndAttributes(),this._Listener.afterParsing(e)},WYMeditor.XhtmlParser.prototype.Ignore=function(e,t){return!0},WYMeditor.XhtmlParser.prototype.Text=function(e){return this._Listener.addContent(e),!0},WYMeditor.XhtmlParser.prototype.Comment=function(e,t){return this._addNonTagBlock(e,t,"addComment")},WYMeditor.XhtmlParser.prototype.Script=function(e,t){return this._addNonTagBlock(e,t,"addScript")},WYMeditor.XhtmlParser.prototype.Css=function(e,t){return this._addNonTagBlock(e,t,"addCss")},WYMeditor.XhtmlParser.prototype._addNonTagBlock=function(e,t,n){switch(t){case WYMeditor.LEXER_ENTER:this._non_tag=e;break;case WYMeditor.LEXER_UNMATCHED:this._non_tag+=e;break;case WYMeditor.LEXER_EXIT:switch(n){case"addComment":this._Listener.addComment(this._non_tag+e);break;case"addScript":this._Listener.addScript(this._non_tag+e);break;case"addCss":this._Listener.addCss(this._non_tag+e)}}return!0},WYMeditor.XhtmlParser.prototype.SelfClosingTag=function(e,t){this.OpeningTag(e,t),this.normalizeTag(e);return this.ClosingTag(e,t)},WYMeditor.XhtmlParser.prototype.OpeningTag=function(e,t){switch(t){case WYMeditor.LEXER_ENTER:this._tag=this.normalizeTag(e),this._tag_attributes={};break;case WYMeditor.LEXER_SPECIAL:this._callOpenTagListener(this.normalizeTag(e));break;case WYMeditor.LEXER_EXIT:this._callOpenTagListener(this._tag,this._tag_attributes)}return!0},WYMeditor.XhtmlParser.prototype.ClosingTag=function(e,t){return this._callCloseTagListener(this.normalizeTag(e)),!0},WYMeditor.XhtmlParser.prototype._callOpenTagListener=function(e,t){t=t||{},this.autoCloseUnclosedBeforeNewOpening(e),this._Listener.isBlockTag(e)?(this._Listener._tag_stack.push(e),this._Listener.fixNestingBeforeOpeningBlockTag(e,t),this._Listener.openBlockTag(e,t),this._increaseOpenTagCounter(e)):this._Listener.isInlineTag(e)?this._Listener.inlineTag(e,t):(this._Listener.openUnknownTag(e,t),this._increaseOpenTagCounter(e)),this._Listener.last_tag=e,this._Listener.last_tag_opened=!0,this._Listener.last_tag_attributes=t},WYMeditor.XhtmlParser.prototype._callCloseTagListener=function(e){if(this._decreaseOpenTagCounter(e)){if(this.autoCloseUnclosedBeforeTagClosing(e),this._Listener.isBlockTag(e)){var t=this._Listener._tag_stack.pop();if(!1===t)return;if(t!==e){if(this._Listener._extraBlockClosingTags)return this._Listener._tag_stack.push(t),void this._Listener.removedExtraBlockClosingTag();e=t}this._Listener.closeBlockTag(e)}}else this._Listener.isInlineTag(e)||this._Listener.closeUnopenedTag(e);this._Listener.last_tag=e,this._Listener.last_tag_opened=!1},WYMeditor.XhtmlParser.prototype._increaseOpenTagCounter=function(e){this._Listener._open_tags[e]=this._Listener._open_tags[e]||0,this._Listener._open_tags[e]++},WYMeditor.XhtmlParser.prototype._decreaseOpenTagCounter=function(e){return!!this._Listener._open_tags[e]&&(this._Listener._open_tags[e]--,0===this._Listener._open_tags[e]&&(this._Listener._open_tags[e]=void 0),!0)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeNewOpening=function(e){this._autoCloseUnclosed(e,!1)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeTagClosing=function(e){this._autoCloseUnclosed(e,!0)},WYMeditor.XhtmlParser.prototype._autoCloseUnclosed=function(e,t){if(t=t||!1,this._Listener._open_tags)for(var n in this._Listener._open_tags)this._Listener.shouldCloseTagAutomatically(n,e,t)&&this._callCloseTagListener(n,!0)},WYMeditor.XhtmlParser.prototype.getTagReplacements=function(){return this._Listener.getTagReplacements()},WYMeditor.XhtmlParser.prototype.normalizeTag=function(e){e=e.replace(/^([\s<\/>]*)|([\s<\/>]*)$/gm,"").toLowerCase();var t=this._Listener.getTagReplacements();return t[e]?t[e]:e},WYMeditor.XhtmlParser.prototype.TagAttributes=function(e,t){return WYMeditor.LEXER_SPECIAL==t&&(this._current_attribute=e),!0},WYMeditor.XhtmlParser.prototype.DoubleQuotedAttribute=function(e,t){return WYMeditor.LEXER_UNMATCHED==t&&(this._tag_attributes[this._current_attribute]=e),!0},WYMeditor.XhtmlParser.prototype.SingleQuotedAttribute=function(e,t){return WYMeditor.LEXER_UNMATCHED==t&&(this._tag_attributes[this._current_attribute]=e),!0},WYMeditor.XhtmlParser.prototype.UnquotedAttribute=function(e,t){return this._tag_attributes[this._current_attribute]=e.replace(/^=/,""),!0},WYMeditor.XhtmlSaxListener=function(){return this.output="",this.helper=new WYMeditor.XmlHelper,this._open_tags={},this.validator=WYMeditor.XhtmlValidator,this._tag_stack=[],this.avoided_tags=[],this._insert_before_closing=[],this._insert_after_closing=[],this._last_node_was_text=!1,this._consecutive_brs=0,this._lastAddedOpenTag="",this._insideLI=!1,this.tagsToUnwrapInLists=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,this._rootInlineTagsToRemove=["br"],this._extraBlockClosingTags=0,this._insideTagToRemove=!1,this._addSpacerBeforeElementInLI=!1,this._insideTagToRemove=!1,this._lastTagRemoved=!1,this._extraLIClosingTags=0,this._removedTagStackIndex=0,this.entities={"&nbsp;":"&#160;","&iexcl;":"&#161;","&cent;":"&#162;","&pound;":"&#163;","&curren;":"&#164;","&yen;":"&#165;","&brvbar;":"&#166;","&sect;":"&#167;","&uml;":"&#168;","&copy;":"&#169;","&ordf;":"&#170;","&laquo;":"&#171;","&not;":"&#172;","&shy;":"&#173;","&reg;":"&#174;","&macr;":"&#175;","&deg;":"&#176;","&plusmn;":"&#177;","&sup2;":"&#178;","&sup3;":"&#179;","&acute;":"&#180;","&micro;":"&#181;","&para;":"&#182;","&middot;":"&#183;","&cedil;":"&#184;","&sup1;":"&#185;","&ordm;":"&#186;","&raquo;":"&#187;","&frac14;":"&#188;","&frac12;":"&#189;","&frac34;":"&#190;","&iquest;":"&#191;","&Agrave;":"&#192;","&Aacute;":"&#193;","&Acirc;":"&#194;","&Atilde;":"&#195;","&Auml;":"&#196;","&Aring;":"&#197;","&AElig;":"&#198;","&Ccedil;":"&#199;","&Egrave;":"&#200;","&Eacute;":"&#201;","&Ecirc;":"&#202;","&Euml;":"&#203;","&Igrave;":"&#204;","&Iacute;":"&#205;","&Icirc;":"&#206;","&Iuml;":"&#207;","&ETH;":"&#208;","&Ntilde;":"&#209;","&Ograve;":"&#210;","&Oacute;":"&#211;","&Ocirc;":"&#212;","&Otilde;":"&#213;","&Ouml;":"&#214;","&times;":"&#215;","&Oslash;":"&#216;","&Ugrave;":"&#217;","&Uacute;":"&#218;","&Ucirc;":"&#219;","&Uuml;":"&#220;","&Yacute;":"&#221;","&THORN;":"&#222;","&szlig;":"&#223;","&agrave;":"&#224;","&aacute;":"&#225;","&acirc;":"&#226;","&atilde;":"&#227;","&auml;":"&#228;","&aring;":"&#229;","&aelig;":"&#230;","&ccedil;":"&#231;","&egrave;":"&#232;","&eacute;":"&#233;","&ecirc;":"&#234;","&euml;":"&#235;","&igrave;":"&#236;","&iacute;":"&#237;","&icirc;":"&#238;","&iuml;":"&#239;","&eth;":"&#240;","&ntilde;":"&#241;","&ograve;":"&#242;","&oacute;":"&#243;","&ocirc;":"&#244;","&otilde;":"&#245;","&ouml;":"&#246;","&divide;":"&#247;","&oslash;":"&#248;","&ugrave;":"&#249;","&uacute;":"&#250;","&ucirc;":"&#251;","&uuml;":"&#252;","&yacute;":"&#253;","&thorn;":"&#254;","&yuml;":"&#255;","&OElig;":"&#338;","&oelig;":"&#339;","&Scaron;":"&#352;","&scaron;":"&#353;","&Yuml;":"&#376;","&fnof;":"&#402;","&circ;":"&#710;","&tilde;":"&#732;","&Alpha;":"&#913;","&Beta;":"&#914;","&Gamma;":"&#915;","&Delta;":"&#916;","&Epsilon;":"&#917;","&Zeta;":"&#918;","&Eta;":"&#919;","&Theta;":"&#920;","&Iota;":"&#921;","&Kappa;":"&#922;","&Lambda;":"&#923;","&Mu;":"&#924;","&Nu;":"&#925;","&Xi;":"&#926;","&Omicron;":"&#927;","&Pi;":"&#928;","&Rho;":"&#929;","&Sigma;":"&#931;","&Tau;":"&#932;","&Upsilon;":"&#933;","&Phi;":"&#934;","&Chi;":"&#935;","&Psi;":"&#936;","&Omega;":"&#937;","&alpha;":"&#945;","&beta;":"&#946;","&gamma;":"&#947;","&delta;":"&#948;","&epsilon;":"&#949;","&zeta;":"&#950;","&eta;":"&#951;","&theta;":"&#952;","&iota;":"&#953;","&kappa;":"&#954;","&lambda;":"&#955;","&mu;":"&#956;","&nu;":"&#957;","&xi;":"&#958;","&omicron;":"&#959;","&pi;":"&#960;","&rho;":"&#961;","&sigmaf;":"&#962;","&sigma;":"&#963;","&tau;":"&#964;","&upsilon;":"&#965;","&phi;":"&#966;","&chi;":"&#967;","&psi;":"&#968;","&omega;":"&#969;","&thetasym;":"&#977;","&upsih;":"&#978;","&piv;":"&#982;","&ensp;":"&#8194;","&emsp;":"&#8195;","&thinsp;":"&#8201;","&zwnj;":"&#8204;","&zwj;":"&#8205;","&lrm;":"&#8206;","&rlm;":"&#8207;","&ndash;":"&#8211;","&mdash;":"&#8212;","&lsquo;":"&#8216;","&rsquo;":"&#8217;","&sbquo;":"&#8218;","&ldquo;":"&#8220;","&rdquo;":"&#8221;","&bdquo;":"&#8222;","&dagger;":"&#8224;","&Dagger;":"&#8225;","&bull;":"&#8226;","&hellip;":"&#8230;","&permil;":"&#8240;","&prime;":"&#8242;","&Prime;":"&#8243;","&lsaquo;":"&#8249;","&rsaquo;":"&#8250;","&oline;":"&#8254;","&frasl;":"&#8260;","&euro;":"&#8364;","&image;":"&#8465;","&weierp;":"&#8472;","&real;":"&#8476;","&trade;":"&#8482;","&alefsym;":"&#8501;","&larr;":"&#8592;","&uarr;":"&#8593;","&rarr;":"&#8594;","&darr;":"&#8595;","&harr;":"&#8596;","&crarr;":"&#8629;","&lArr;":"&#8656;","&uArr;":"&#8657;","&rArr;":"&#8658;","&dArr;":"&#8659;","&hArr;":"&#8660;","&forall;":"&#8704;","&part;":"&#8706;","&exist;":"&#8707;","&empty;":"&#8709;","&nabla;":"&#8711;","&isin;":"&#8712;","&notin;":"&#8713;","&ni;":"&#8715;","&prod;":"&#8719;","&sum;":"&#8721;","&minus;":"&#8722;","&lowast;":"&#8727;","&radic;":"&#8730;","&prop;":"&#8733;","&infin;":"&#8734;","&ang;":"&#8736;","&and;":"&#8743;","&or;":"&#8744;","&cap;":"&#8745;","&cup;":"&#8746;","&int;":"&#8747;","&there4;":"&#8756;","&sim;":"&#8764;","&cong;":"&#8773;","&asymp;":"&#8776;","&ne;":"&#8800;","&equiv;":"&#8801;","&le;":"&#8804;","&ge;":"&#8805;","&sub;":"&#8834;","&sup;":"&#8835;","&nsub;":"&#8836;","&sube;":"&#8838;","&supe;":"&#8839;","&oplus;":"&#8853;","&otimes;":"&#8855;","&perp;":"&#8869;","&sdot;":"&#8901;","&lceil;":"&#8968;","&rceil;":"&#8969;","&lfloor;":"&#8970;","&rfloor;":"&#8971;","&lang;":"&#9001;","&rang;":"&#9002;","&loz;":"&#9674;","&spades;":"&#9824;","&clubs;":"&#9827;","&hearts;":"&#9829;","&diams;":"&#9830;"},this.block_tags=["a","abbr","acronym","address","area","b","base","bdo","big","blockquote","body","button","caption","cite","code","colgroup","dd","del","div","dfn","dl","dt","em","fieldset","form","head","h1","h2","h3","h4","h5","h6","html","i","iframe","ins","kbd","label","legend","li","map","noscript","object","ol","optgroup","option","p","param","pre","q","samp","script","select","small","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","ul","var","extends"],this.inline_tags=["br","col","hr","img","input"],this},WYMeditor.XhtmlSaxListener.prototype.shouldCloseTagAutomatically=function(e,t,n){if("td"!=e&&"option"!=e)return!1;var r=this._open_tags[e];if(!r)return!1;if("td"==e){var o=this._open_tags.tr||0;if(!n&&"td"===t&&o<=r)return!0;if(n&&"tr"==t&&o<r)return!0}else if("option"==e&&(n&&"select"==t||!n&&"option"==t))return!0;return!1},WYMeditor.XhtmlSaxListener.prototype.beforeParsing=function(e){return this.output="",this._insert_before_closing=[],this._insert_after_closing=[],this._open_tags={},this._tag_stack=[],this._last_node_was_text=!1,this._lastTagRemoved=!1,this._insideTagToRemove=!1,this.last_tag=null,e},WYMeditor.XhtmlSaxListener.prototype.afterParsing=function(e){return e=this.replaceNamedEntities(e),e=this.joinRepeatedEntities(e),e=this.removeEmptyTags(e),e=this.removeBrInPre(e)},WYMeditor.XhtmlSaxListener.prototype.replaceNamedEntities=function(e){for(var t in this.entities)e=e.replace(new RegExp(t,"g"),this.entities[t]);return e},WYMeditor.XhtmlSaxListener.prototype.joinRepeatedEntities=function(e){var t="em|strong|sub|sup|acronym|pre|del|address";return e.replace(new RegExp("</("+t+")><\\1>",""),"").replace(new RegExp("(s*<("+t+")>s*){2}(.*)(s*</\\2>s*){2}",""),"<$2>$3<$2>")},WYMeditor.XhtmlSaxListener.prototype.removeEmptyTags=function(e){return e.replace(new RegExp("<("+this.block_tags.join("|").replace(/\|td/,"").replace(/\|th/,"")+")>(<br />|&#160;|&nbsp;|\\s)*</\\1>","g"),"")},WYMeditor.XhtmlSaxListener.prototype.removeBrInPre=function(e){var t=e.match(new RegExp("<pre[^>]*>(.*?)</pre>","gmi"));if(t)for(var n=0;n<t.length;n++)e=e.replace(t[n],t[n].replace(new RegExp("<br />","g"),String.fromCharCode(13,10)));return e},WYMeditor.XhtmlSaxListener.prototype.getResult=function(){return this.output},WYMeditor.XhtmlSaxListener.prototype.getTagReplacements=function(){return{b:"strong",i:"em"}},WYMeditor.XhtmlSaxListener.prototype.getTagForStyle=function(e){return/sub/.test(e)?"sub":/super/.test(e)?"sup":/bold/.test(e)?"strong":!!/italic/.test(e)&&"em"},WYMeditor.XhtmlSaxListener.prototype.addContent=function(e){this.last_tag&&"li"==this.last_tag&&(e=(e=e.replace(/(\r|\n|\r\n)+$/g,"")).replace(/(\r|\n|\r\n)+/g," ")),0<e.replace(/^\s+|\s+$/g,"").length&&(this._last_node_was_text=!0,this._addSpacerBeforeElementInLI&&(this.output+="<br />",this._addSpacerBeforeElementInLI=!1)),this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addComment=function(e){this.remove_comments||this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addScript=function(e){this.remove_scripts||this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addCss=function(e){this.remove_embeded_styles||this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.openBlockTag=function(e,t){var n=this._last_node_was_text;if(this._last_node_was_text=!1,!this._insideTagToRemove){if(this._shouldRemoveTag(e,t))return this._insideTagToRemove=!0,void(this._removedTagStackIndex=this._tag_stack.length-1);if(this._insideLI&&-1<jQuery.inArray(e,this.tagsToUnwrapInLists))return("li"!==this._lastAddedOpenTag||n)&&(this.output+="<br />",this._addSpacerBeforeElementInLI=!1),this._tag_stack.pop(),void this._extraBlockClosingTags++;if(this._addSpacerBeforeElementInLI&&"li"!==e&&-1===jQuery.inArray(e,WYMeditor.LIST_TYPE_ELEMENTS)&&(this.output+="<br />",this._addSpacerBeforeElementInLI=!1),t=this.validator.getValidTagAttributes(e,t),t=this.removeUnwantedClasses(t),"span"===e&&t.style){var r=this.getTagForStyle(t.style);r&&(e=r,this._tag_stack.pop(),this._tag_stack.push(e),t.style="")}"li"===e&&(this._insideLI=!0,this._addSpacerBeforeElementInLI=!1),this.output+=this.helper.tag(e,t,!0),this._lastAddedOpenTag=e,this._lastTagRemoved=!1}},WYMeditor.XhtmlSaxListener.prototype.inlineTag=function(e,t){this._insideTagToRemove||this._shouldRemoveTag(e,t)||(this._last_node_was_text=!1,t=this.validator.getValidTagAttributes(e,t),t=this.removeUnwantedClasses(t),this.output+=this.helper.tag(e,t),this._lastTagRemoved=!1)},WYMeditor.XhtmlSaxListener.prototype.openUnknownTag=function(e,t){},WYMeditor.XhtmlSaxListener.prototype.closeBlockTag=function(e){if(this._last_node_was_text=!1,this._insideTagToRemove)return this._tag_stack.length===this._removedTagStackIndex&&(this._insideTagToRemove=!1),void(this._lastTagRemoved=!0);"li"===e&&(this._insideLI=!1,this._addSpacerBeforeElementInLI=!1),-1<jQuery.inArray(e,WYMeditor.LIST_TYPE_ELEMENTS)&&(this._insideLI=!1),this.output=this.output+this._getClosingTagContent("before",e)+"</"+e+">"+this._getClosingTagContent("after",e)},WYMeditor.XhtmlSaxListener.prototype.removedExtraBlockClosingTag=function(){this._extraBlockClosingTags--,this._addSpacerBeforeElementInLI=!0,this._last_node_was_text=!1},WYMeditor.XhtmlSaxListener.prototype.closeUnknownTag=function(e){},WYMeditor.XhtmlSaxListener.prototype.closeUnopenedTag=function(e){this._last_node_was_text=!1,this._insideTagToRemove||("li"===e&&this._extraLIClosingTags?this._extraLIClosingTags--:this.output+="</"+e+">")},WYMeditor.XhtmlSaxListener.prototype.avoidStylingTagsAndAttributes=function(){this.avoided_tags=["div","span"],this.validator.skiped_attributes=["style"],this.validator.skiped_attribute_values=["MsoNormal","main1"],this._avoiding_tags_implicitly=!0},WYMeditor.XhtmlSaxListener.prototype.allowStylingTagsAndAttributes=function(){this.avoided_tags=[],this.validator.skiped_attributes=[],this.validator.skiped_attribute_values=[],this._avoiding_tags_implicitly=!1},WYMeditor.XhtmlSaxListener.prototype.isBlockTag=function(e){return!WYMeditor.Helper.arrayContains(this.avoided_tags,e)&&WYMeditor.Helper.arrayContains(this.block_tags,e)},WYMeditor.XhtmlSaxListener.prototype.isInlineTag=function(e){return!WYMeditor.Helper.arrayContains(this.avoided_tags,e)&&WYMeditor.Helper.arrayContains(this.inline_tags,e)},WYMeditor.XhtmlSaxListener.prototype.insertContentAfterClosingTag=function(e,t){this._insertContentWhenClosingTag("after",e,t)},WYMeditor.XhtmlSaxListener.prototype.insertContentBeforeClosingTag=function(e,t){this._insertContentWhenClosingTag("before",e,t)},WYMeditor.XhtmlSaxListener.prototype.removeUnwantedClasses=function(e){var t,n;if(!e.class)return e;for(n=0;n<WYMeditor.CLASSES_REMOVED_BY_PARSER.length;++n)t=new RegExp("(^|\\s)"+WYMeditor.CLASSES_REMOVED_BY_PARSER[n]+"($|\\s)","gi"),e.class=e.class.replace(t,"$1");return e.class=e.class.replace(/\s$/,""),e},WYMeditor.XhtmlSaxListener.prototype.fixNestingBeforeOpeningBlockTag=function(e,t){if(this._last_node_was_text||"ul"!=e&&"ol"!=e||!this.last_tag||this.last_tag_opened||"li"!=this.last_tag)if("ul"!=e&&"ol"!=e||!this.last_tag||!this.last_tag_opened||"ul"!=this.last_tag&&"ol"!=this.last_tag){if("li"==e){if(2<=this._tag_stack.length)"li"!=this._tag_stack[this._tag_stack.length-2]||this._shouldRemoveTag(e,t)||(this._open_tags.li-=1,0===this._open_tags.li&&(this._open_tags.li=void 0),this._tag_stack.splice(this._tag_stack.length-2,1),this._last_node_was_text=!1,this._insideTagToRemove?this._tag_stack.length-1===this._removedTagStackIndex&&(this._insideTagToRemove=!1,this._lastTagRemoved=!0,this._extraLIClosingTags++):this.output+="</li>")}}else this._shouldRemoveTag(e,t)||(this.output+=this.helper.tag("li",{},!0),this.insertContentAfterClosingTag(e,"</li>")),this._last_node_was_text=!1;else this._lastTagRemoved?(this._insideTagToRemove=!0,this._removedTagStackIndex=this._tag_stack.length-1):this._shouldRemoveTag(e,t)||(this.output=this.output.replace(/<\/li>\s*$/,""),this.insertContentAfterClosingTag(e,"</li>"))},WYMeditor.XhtmlSaxListener.prototype._insertContentWhenClosingTag=function(e,t,n){this["_insert_"+e+"_closing"]||(this["_insert_"+e+"_closing"]=[]),this["_insert_"+e+"_closing"][t]||(this["_insert_"+e+"_closing"][t]=[]),this["_insert_"+e+"_closing"][t].push(n)},WYMeditor.XhtmlSaxListener.prototype._getClosingTagContent=function(e,t){return this["_insert_"+e+"_closing"]&&this["_insert_"+e+"_closing"][t]&&0<this["_insert_"+e+"_closing"][t].length?this["_insert_"+e+"_closing"][t].pop():""},WYMeditor.XhtmlSaxListener.prototype._shouldRemoveTag=function(e,t){return!!this._isEditorOnlyTag(e,t)||(!!this._isRootInlineTagToRemove(e,t,this._tag_stack)||!!this._isThirdConsecutiveBrWithNoAttributes(e,t))},WYMeditor.XhtmlSaxListener.prototype._isEditorOnlyTag=function(e,t){var n;return!!t.class&&(n=t.class.split(" "),!!WYMeditor.Helper.arrayContains(n,WYMeditor.EDITOR_ONLY_CLASS))},WYMeditor.XhtmlSaxListener.prototype._isRootInlineTagToRemove=function(e,t,n){return!!this.isInlineTag(e)&&(!(0<n.length)&&!!WYMeditor.Helper.arrayContains(this._rootInlineTagsToRemove,e))},WYMeditor.XhtmlSaxListener.prototype._isThirdConsecutiveBrWithNoAttributes=function(e,t){var n;if("br"!==e)return this._consecutive_brs=0,!1;if(0!==this._consecutive_brs&&this._last_node_was_text)return this._consecutive_brs=0,!1;for(n in t)if(t.hasOwnProperty(n))return this._consecutive_brs=0,!1;return this._consecutive_brs++,2<this._consecutive_brs},WYMeditor.XhtmlValidator={_attributes:{core:{except:["base","head","html","meta","param","script","style","title"],attributes:["class","id","title","accesskey","tabindex","/^data-.*/"]},styleAttr:{except:["img"],attributes:["style"]},language:{except:["base","br","hr","iframe","param","script"],attributes:{dir:["ltr","rtl"],0:"lang",1:"xml:lang"}},keyboard:{attributes:{accesskey:/^(\w){1}$/,tabindex:/^(\d)+$/}}},_events:{window:{only:["body"],attributes:["onload","onunload"]},form:{only:["form","input","textarea","select","a","label","button"],attributes:["onchange","onsubmit","onreset","onselect","onblur","onfocus"]},keyboard:{except:["base","bdo","br","frame","frameset","head","html","iframe","meta","param","script","style","title"],attributes:["onkeydown","onkeypress","onkeyup"]},mouse:{except:["base","bdo","br","head","html","meta","param","script","style","title"],attributes:["onclick","ondblclick","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup"]}},_tags:{a:{attributes:{0:"charset",1:"coords",2:"href",3:"hreflang",4:"name",5:"rel",6:"rev",shape:/^(rect|rectangle|circ|circle|poly|polygon)$/,7:"type"}},0:"abbr",1:"acronym",2:"address",area:{attributes:{0:"alt",1:"coords",2:"href",nohref:/^(true|false)$/,shape:/^(rect|rectangle|circ|circle|poly|polygon)$/},required:["alt"]},3:"b",base:{attributes:["href"],required:["href"]},bdo:{attributes:{dir:/^(ltr|rtl)$/},required:["dir"]},4:"big",blockquote:{attributes:["cite"]},5:"body",6:"br",button:{attributes:{disabled:/^(disabled)$/,type:/^(button|reset|submit)$/,0:"value"},inside:"form"},7:"caption",8:"cite",9:"code",col:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"},inside:"colgroup"},colgroup:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"}},10:"dd",del:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},11:"div",12:"dfn",13:"dl",14:"dt",15:"em",fieldset:{inside:"form"},form:{attributes:{0:"action",1:"accept",2:"accept-charset",3:"enctype",method:/^(get|post)$/},required:["action"]},head:{attributes:["profile"]},16:"h1",17:"h2",18:"h3",19:"h4",20:"h5",21:"h6",22:"hr",html:{attributes:["xmlns"]},23:"i",img:{attributes:["alt","src","height","ismap","longdesc","usemap","width"],required:["alt","src"]},input:{attributes:{0:"accept",1:"alt",checked:/^(checked)$/,disabled:/^(disabled)$/,maxlength:/^(\d)+$/,2:"name",readonly:/^(readonly)$/,size:/^(\d)+$/,3:"src",type:/^(button|checkbox|file|hidden|image|password|radio|reset|submit|text)$/,4:"value"},inside:"form"},ins:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},24:"kbd",label:{attributes:["for"],inside:"form"},25:"legend",26:"li",link:{attributes:{0:"charset",1:"href",2:"hreflang",media:/^(all|braille|print|projection|screen|speech|,|;| )+$/i,rel:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,rev:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,3:"type"},inside:"head"},map:{attributes:["id","name"],required:["id"]},meta:{attributes:{0:"content","http-equiv":/^(content\-type|expires|refresh|set\-cookie)$/i,1:"name",2:"scheme"},required:["content"]},27:"noscript",object:{attributes:["archive","classid","codebase","codetype","data","declare","height","name","standby","type","usemap","width"]},28:"ol",optgroup:{attributes:{0:"label",disabled:/^(disabled)$/},required:["label"]},option:{attributes:{0:"label",disabled:/^(disabled)$/,selected:/^(selected)$/,1:"value"},inside:"select"},29:"p",param:{attributes:{0:"type",valuetype:/^(data|ref|object)$/,1:"valuetype",2:"value"},required:["name"]},30:"pre",q:{attributes:["cite"]},31:"samp",script:{attributes:{type:/^(text\/ecmascript|text\/javascript|text\/jscript|text\/vbscript|text\/vbs|text\/xml)$/,0:"charset",defer:/^(defer)$/,1:"src"},required:["type"]},select:{attributes:{disabled:/^(disabled)$/,multiple:/^(multiple)$/,0:"name",1:"size"},inside:"form"},32:"small",33:"span",34:"strong",style:{attributes:{0:"type",media:/^(screen|tty|tv|projection|handheld|print|braille|aural|all)$/},required:["type"]},35:"sub",36:"sup",table:{attributes:{0:"border",1:"cellpadding",2:"cellspacing",frame:/^(void|above|below|hsides|lhs|rhs|vsides|box|border)$/,rules:/^(none|groups|rows|cols|all)$/,3:"summary",4:"width"}},tbody:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},td:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},textarea:{attributes:["cols","rows","disabled","name","readonly"],required:["cols","rows"],inside:"form"},tfoot:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom)$/,2:"baseline"}},th:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},thead:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},37:"title",tr:{attributes:{align:/^(right|left|center|justify|char)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},38:"tt",39:"ul",40:"var"},skiped_attributes:[],skiped_attribute_values:[],getValidTagAttributes:function(e,t){var n={},r=this.getPossibleTagAttributes(e);for(var o in t){var i=t[o];o=o.toLowerCase();var a=WYMeditor.Helper;a.arrayContains(this.skiped_attributes,o)||a.arrayContains(this.skiped_attribute_values,i)||("function"!=typeof i&&a.arrayContains(r,o)?this.doesAttributeNeedsValidation(e,o)?this.validateAttribute(e,o,i)&&(n[o]=i):n[o]=i:jQuery.each(r,function(){this.match(/\/(.*)\//)&&(regex=new RegExp(this.match(/\/(.*)\//)[1]),regex.test(o)&&(n[o]=i))}))}return n},getUniqueAttributesAndEventsForTag:function(e){var t=[];if(this._tags[e]&&this._tags[e].attributes)for(var n in this._tags[e].attributes)t.push(parseInt(n,10)==n?this._tags[e].attributes[n]:n);return t},getDefaultAttributesAndEventsForTags:function(){var e=[];for(var t in this._events)e.push(this._events[t]);for(t in this._attributes)e.push(this._attributes[t]);return e},isValidTag:function(e){if(this._tags[e])return!0;for(var t in this._tags)if(this._tags[t]==e)return!0;return!1},getDefaultAttributesAndEventsForTag:function(e){var t=[];if(this.isValidTag(e)){var n=this.getDefaultAttributesAndEventsForTags();for(var r in n){var o=n[r];if("object"==typeof o){var i=WYMeditor.Helper;if(o.except&&i.arrayContains(o.except,e)||o.only&&!i.arrayContains(o.only,e))continue;var a=o.attributes?o.attributes:o.events;for(var s in a)t.push("string"!=typeof a[s]?s:a[s])}}}return t},doesAttributeNeedsValidation:function(e,t){return this._tags[e]&&(this._tags[e].attributes&&this._tags[e].attributes[t]||this._tags[e].required&&WYMeditor.Helper.arrayContains(this._tags[e].required,t))},validateAttribute:function(e,t,n){return!(this._tags[e]&&this._tags[e].attributes&&this._tags[e].attributes[t]&&0<n.length&&!n.match(this._tags[e].attributes[t])||this._tags[e]&&this._tags[e].required&&WYMeditor.Helper.arrayContains(this._tags[e].required,t)&&0===n.length)&&void 0!==this._tags[e]},getPossibleTagAttributes:function(e){return this._possible_tag_attributes||(this._possible_tag_attributes={}),this._possible_tag_attributes[e]||(this._possible_tag_attributes[e]=this.getUniqueAttributesAndEventsForTag(e).concat(this.getDefaultAttributesAndEventsForTag(e))),this._possible_tag_attributes[e]}},WYMeditor.XmlHelper=function(){return this._entitiesDiv=document.createElement("div"),this},WYMeditor.XmlHelper.prototype.tag=function(e,t,n){return n=n||!1,"<"+e+((t=t||!1)?this.tagOptions(t):"")+(n?">":" />")},WYMeditor.XmlHelper.prototype.contentTag=function(e,t,n){return"<"+e+((n=n||!1)?this.tagOptions(n):"")+">"+t+"</"+e+">"},WYMeditor.XmlHelper.prototype.cdataSection=function(e){return"<![CDATA["+e+"]]>"},WYMeditor.XmlHelper.prototype.escapeOnce=function(e){return this._fixDoubleEscape(this.escapeEntities(e))},WYMeditor.XmlHelper.prototype._fixDoubleEscape=function(e){return e.replace(/&amp;([a-z]+|(#\d+));/gi,"&$1;")},WYMeditor.XmlHelper.prototype.tagOptions=function(e){for(var t in this._formated_options="",e){var n=e[t];"function"!=typeof n&&0<n.length&&(parseInt(t,10)==t&&"object"==typeof n&&(t=n.shift(),n=n.pop()),""!==t&&""!==n&&(this._formated_options+=" "+t+'="'+this.escapeOnce(n)+'"'))}return this._formated_options},WYMeditor.XmlHelper.prototype.escapeEntities=function(e,t){this._entitiesDiv.innerHTML=e,this._entitiesDiv.textContent=e;var n=this._entitiesDiv.innerHTML;return void 0===t&&(!1!==t&&(n=n.replace('"',"&quot;")),!0===t&&(n=n.replace('"',"&#039;"))),n},WYMeditor.XmlHelper.prototype.parseAttributes=function(e){var t=[],n=e.split(/((=\s*")(")("))|((=\s*\')(\')(\'))|((=\s*[^>\s]*))/g);if(n.toString()!=e)for(var r in n){var o=n[r];if("function"!=typeof o&&0!==o.length){var i=new RegExp("(\\w+)\\s*"+o),a=e.match(i);if(a){var s=o.replace(/^[\s=]+/,""),l=s.charAt(0);""!==(l='"'==l?'"':"'"==l?"'":"")&&(s='"'==l?s.replace(/^"|"+$/g,""):s.replace(/^'|'+$/g,"")),e=e.replace(a[0],""),t.push([a[1],s])}}}return t},WYMeditor.STRINGS.bg={Strong:"ÐÐ¾Ð»ÑÑÐµÑ",Emphasis:"ÐÑÑÑÐ¸Ð²",Superscript:"ÐÐ¾ÑÐµÐ½ Ð¸Ð½Ð´ÐµÐºÑ",Subscript:"ÐÐ¾Ð»ÐµÐ½ Ð¸Ð½Ð´ÐµÐºÑ",Ordered_List:"ÐÐ¾Ð´ÑÐµÐ´ÐµÐ½ ÑÐ¿Ð¸ÑÑÐº",Unordered_List:"ÐÐµÐ¿Ð¾Ð´ÑÐµÐ´ÐµÐ½ ÑÐ¿Ð¸ÑÑÐº",Indent:"ÐÐ»Ð¾Ðº Ð½Ð°Ð²ÑÑÑÐµ",Outdent:"ÐÐ»Ð¾Ðº Ð½Ð°Ð²ÑÐ½",Undo:"Ð¡ÑÑÐ¿ÐºÐ° Ð½Ð°Ð·Ð°Ð´",Redo:"Ð¡ÑÑÐ¿ÐºÐ° Ð½Ð°Ð¿ÑÐµÐ´",Link:"Ð¡ÑÐ·Ð´Ð°Ð¹ ÑÐ¸Ð¿ÐµÑÐ²ÑÑÐ·ÐºÐ°",Unlink:"ÐÑÐµÐ¼Ð°ÑÐ½Ð¸ ÑÐ¸Ð¿ÐµÑÐ²ÑÑÐ·ÐºÐ°ÑÐ°",Image:"ÐÐ·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ðµ",Table:"Ð¢Ð°Ð±Ð»Ð¸ÑÐ°",HTML:"HTML",Paragraph:"ÐÐ±Ð·Ð°Ñ",Heading_1:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 1",Heading_2:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 2",Heading_3:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 3",Heading_4:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 4",Heading_5:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 5",Heading_6:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 6",Preformatted:"ÐÑÐµÑÐ¾ÑÐ¼Ð°ÑÐ¸ÑÐ°Ð½",Blockquote:"Ð¦Ð¸ÑÐ°Ñ",Table_Header:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ Ð½Ð° ÑÐ°Ð±Ð»Ð¸ÑÐ°ÑÐ°",URL:"URL",Title:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ",Alternative_Text:"ÐÐ»ÑÐµÑÐ½Ð°ÑÐ¸Ð²ÐµÐ½ ÑÐµÐºÑÑ",Caption:"ÐÑÐ¸ÐºÐµÑ",Summary:"ÐÐ±ÑÐ¾",Number_Of_Rows:"ÐÑÐ¾Ð¹ ÑÐµÐ´Ð¾Ð²Ðµ",Number_Of_Cols:"ÐÑÐ¾Ð¹ ÐºÐ¾Ð»Ð¾Ð½Ð¸",Submit:"ÐÐ·Ð¿ÑÐ°ÑÐ¸",Cancel:"ÐÑÐ¼ÐµÐ½Ð¸",Choose:"ÐÐ°ÑÐ²Ð¾ÑÐ¸",Preview:"ÐÑÐµÐ´Ð²Ð°ÑÐ¸ÑÐµÐ»ÐµÐ½ Ð¿ÑÐµÐ³Ð»ÐµÐ´",Paste_From_Word:"ÐÐ¼ÑÐºÐ½Ð¸ Ð¾Ñ MS WORD",Tools:"ÐÐ½ÑÑÑÑÐ¼ÐµÐ½ÑÐ¸",Containers:"ÐÐ¾Ð½ÑÐµÐ¹Ð½ÐµÑÐ¸",Classes:"ÐÐ»Ð°ÑÐ¾Ð²Ðµ",Status:"Ð¡ÑÐ°ÑÑÑ",Source_Code:"ÐÐ·ÑÐ¾ÑÐ½Ð¸Ðº, ÐºÐ¾Ð´"},WYMeditor.STRINGS.ca={Strong:"Ressaltar",Emphasis:"Emfatitzar",Superscript:"Superindex",Subscript:"Subindex",Ordered_List:"Llistat ordenat",Unordered_List:"Llistat sense ordenar",Indent:"Indentat",Outdent:"Sense indentar",Undo:"Desfer",Redo:"Refer",Link:"EnllaÃ§ar",Unlink:"Eliminar enllaÃ§",Image:"Imatge",Table:"Taula",HTML:"HTML",Paragraph:"ParÃ graf",Heading_1:"CapÃ§alera 1",Heading_2:"CapÃ§alera 2",Heading_3:"CapÃ§alera 3",Heading_4:"CapÃ§alera 4",Heading_5:"CapÃ§alera 5",Heading_6:"CapÃ§alera 6",Preformatted:"Pre-formatejat",Blockquote:"Cita",Table_Header:"CapÃ§alera de la taula",URL:"URL",Title:"TÃ­tol",Alternative_Text:"Text alternatiu",Caption:"Llegenda",Summary:"Summary",Number_Of_Rows:"Nombre de files",Number_Of_Cols:"Nombre de columnes",Submit:"Enviar",Cancel:"CancelÂ·lar",Choose:"Triar",Preview:"Vista prÃ¨via",Paste_From_Word:"Pegar des de Word",Tools:"Eines",Containers:"Contenidors",Classes:"Classes",Status:"Estat",Source_Code:"Codi font"},WYMeditor.STRINGS.cs={Strong:"TuÄnÃ©",Emphasis:"KurzÃ­va",Superscript:"HornÃ­ index",Subscript:"DolnÃ­ index",Ordered_List:"ÄÃ­slovanÃ½ seznam",Unordered_List:"NeÄÃ­slovanÃ½ seznam",Indent:"ZvÄtÅ¡it odsazenÃ­",Outdent:"ZmenÅ¡it odsazenÃ­",Undo:"ZpÄt",Redo:"Znovu",Link:"VytvoÅit odkaz",Unlink:"ZruÅ¡it odkaz",Image:"ObrÃ¡zek",Table:"Tabulka",HTML:"HTML",Paragraph:"Odstavec",Heading_1:"Nadpis 1. ÃºrovnÄ",Heading_2:"Nadpis 2. ÃºrovnÄ",Heading_3:"Nadpis 3. ÃºrovnÄ",Heading_4:"Nadpis 4. ÃºrovnÄ",Heading_5:"Nadpis 5. ÃºrovnÄ",Heading_6:"Nadpis 6. ÃºrovnÄ",Preformatted:"PÅedformÃ¡tovanÃ½ text",Blockquote:"Citace",Table_Header:"HlaviÄkovÃ¡ buÅka tabulky",URL:"Adresa",Title:"Text po najetÃ­ myÅ¡Ã­",Alternative_Text:"Text pro pÅÃ­pad nezobrazenÃ­ obrÃ¡zku",Caption:"Titulek tabulky",Summary:"ShrnutÃ­ obsahu",Number_Of_Rows:"PoÄet ÅÃ¡dek",Number_Of_Cols:"PoÄet sloupcÅ¯",Submit:"VytvoÅit",Cancel:"ZruÅ¡it",Choose:"Vybrat",Preview:"NÃ¡hled",Paste_From_Word:"VloÅ¾it z Wordu",Tools:"NÃ¡stroje",Containers:"Typy obsahu",Classes:"TÅÃ­dy",Status:"Stav",Source_Code:"ZdrojovÃ½ kÃ³d"},WYMeditor.STRINGS.cy={Strong:"Bras",Emphasis:"Italig",Superscript:"Uwchsgript",Subscript:"Is-sgript",Ordered_List:"Rhestr mewn Trefn",Unordered_List:"Pwyntiau Bwled",Indent:"Mewnoli",Outdent:"Alloli",Undo:"Dadwneud",Redo:"Ailwneud",Link:"Cysylltu",Unlink:"Datgysylltu",Image:"Delwedd",Table:"Tabl",HTML:"HTML",Paragraph:"Paragraff",Heading_1:"Pennawd 1",Heading_2:"Pennawd 2",Heading_3:"Pennawd 3",Heading_4:"Pennawd 4",Heading_5:"Pennawd 5",Heading_6:"Pennawd 6",Preformatted:"Rhagfformat",Blockquote:"Bloc Dyfyniad",Table_Header:"Pennyn Tabl",URL:"URL",Title:"Teitl",Alternative_Text:"Testun Amgen",Caption:"Pennawd",Summary:"Crynodeb",Number_Of_Rows:"Nifer y rhesi",Number_Of_Cols:"Nifer y colofnau",Submit:"Anfon",Cancel:"Diddymu",Choose:"Dewis",Preview:"Rhagolwg",Paste_From_Word:"Gludo o Word",Tools:"Offer",Containers:"Cynhwysyddion",Classes:"Dosbarthiadau",Status:"Statws",Source_Code:"Cod ffynhonnell"},WYMeditor.STRINGS.da={Strong:"Fed",Emphasis:"SkrÃ¥",Superscript:"Superscript",Subscript:"Subscript",Ordered_List:"Ordnet liste",Unordered_List:"Uordnet liste",Indent:"Indrykke",Outdent:"Udrykke",Undo:"Fortryd",Redo:"Fortryd",Link:"Link",Unlink:"Fjern link",Image:"Billede",Table:"Tabel",HTML:"HTML",Paragraph:"Paragraf",Heading_1:"Overskrift 1",Heading_2:"Overskrift 2",Heading_3:"Overskrift 3",Heading_4:"Overskrift 4",Heading_5:"Overskrift 5",Heading_6:"Overskrift 6",Preformatted:"Forudformateret",Blockquote:"Citat",Table_Header:"Tabel Overskrift",URL:"URL",Title:"Titel",Alternative_Text:"Alternativ tekst",Caption:"Billedtekst",Summary:"ResumÃ©",Number_Of_Rows:"Antal rÃ¦kker",Number_Of_Cols:"Antal kolonner",Submit:"Indsend",Cancel:"Afbryd",Choose:"VÃ¦lg",Preview:"ForhÃ¥ndsvisning",Paste_From_Word:"IndsÃ¦t fra Word",Tools:"VÃ¦rktÃ¸jer",Containers:"Containere",Classes:"Klasser",Status:"Status",Source_Code:"Kildekode"},WYMeditor.STRINGS.de={Strong:"Fett",Emphasis:"Kursiv",Superscript:"Text hochstellen",Subscript:"Text tiefstellen",Ordered_List:"Geordnete Liste einfÃ¼gen",Unordered_List:"Ungeordnete Liste einfÃ¼gen",Indent:"Einzug erhÃ¶hen",Outdent:"Einzug vermindern",Undo:"Befehle rÃ¼ckgÃ¤ngig machen",Redo:"Befehle wiederherstellen",Link:"Hyperlink einfÃ¼gen",Unlink:"Hyperlink entfernen",Image:"Bild einfÃ¼gen",Table:"Tabelle einfÃ¼gen",HTML:"HTML anzeigen/verstecken",Paragraph:"Absatz",Heading_1:"Ãberschrift 1",Heading_2:"Ãberschrift 2",Heading_3:"Ãberschrift 3",Heading_4:"Ãberschrift 4",Heading_5:"Ãberschrift 5",Heading_6:"Ãberschrift 6",Preformatted:"Vorformatiert",Blockquote:"Zitat",Table_Header:"TabellenÃ¼berschrift",URL:"URL",Title:"Titel",Alternative_Text:"Alternativer Text",Caption:"TabellenÃ¼berschrift",Summary:"Summary",Number_Of_Rows:"Anzahl Zeilen",Number_Of_Cols:"Anzahl Spalten",Submit:"Absenden",Cancel:"Abbrechen",Choose:"AuswÃ¤hlen",Preview:"Vorschau",Paste_From_Word:"Aus Word einfÃ¼gen",Tools:"Werkzeuge",Containers:"Inhaltstyp",Classes:"Klassen",Status:"Status",Source_Code:"Quellcode"},WYMeditor.STRINGS.en={Strong:"Strong",Emphasis:"Emphasis",Superscript:"Superscript",Subscript:"Subscript",Ordered_List:"Ordered List",Unordered_List:"Unordered List",Indent:"Indent",Outdent:"Outdent",Undo:"Undo",Redo:"Redo",Link:"Link",Unlink:"Unlink",Image:"Image",Table:"Table",HTML:"HTML",Paragraph:"Paragraph",Heading_1:"Heading 1",Heading_2:"Heading 2",Heading_3:"Heading 3",Heading_4:"Heading 4",Heading_5:"Heading 5",Heading_6:"Heading 6",Preformatted:"Preformatted",Blockquote:"Blockquote",Table_Header:"Table Header",URL:"URL",Title:"Title",Relationship:"Relationship",Alternative_Text:"Alternative text",Caption:"Caption",Summary:"Summary",Number_Of_Rows:"Number of rows",Number_Of_Cols:"Number of cols",Submit:"Submit",Cancel:"Cancel",Choose:"Choose",Preview:"Preview",Paste_From_Word:"Paste from Word",Tools:"Tools",Containers:"Formatting",Classes:"Style",Status:"Status",Source_Code:"Source code"},WYMeditor.STRINGS.es={Strong:"Resaltar",Emphasis:"Enfatizar",Superscript:"Superindice",Subscript:"Subindice",Ordered_List:"Lista ordenada",Unordered_List:"Lista sin ordenar",Indent:"Indentado",Outdent:"Sin indentar",Undo:"Deshacer",Redo:"Rehacer",Link:"Enlazar",Unlink:"Eliminar enlace",Image:"Imagen",Table:"Tabla",HTML:"HTML",Paragraph:"PÃ¡rrafo",Heading_1:"Cabecera 1",Heading_2:"Cabecera 2",Heading_3:"Cabecera 3",Heading_4:"Cabecera 4",Heading_5:"Cabecera 5",Heading_6:"Cabecera 6",Preformatted:"Preformateado",Blockquote:"Cita",Table_Header:"Cabecera de la tabla",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto alternativo",Caption:"Leyenda",Summary:"Summary",Number_Of_Rows:"NÃºmero de filas",Number_Of_Cols:"NÃºmero de columnas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Seleccionar",Preview:"Vista previa",Paste_From_Word:"Pegar desde Word",Tools:"Herramientas",Containers:"Contenedores",Classes:"Clases",Status:"Estado",Source_Code:"CÃ³digo fuente"},WYMeditor.STRINGS.fa={Strong:"Ù¾Ø±Ø±ÙÚ¯",Emphasis:"Ø§ÛØªØ§ÙÛÚ©",Superscript:"Ø¨Ø§ÙØ§ÙÙÙØ³â ",Subscript:"Ø²ÙØ±ÙÙÙØ³â",Ordered_List:"ÙÛØ³Øª ÙØ±ØªØ¨",Unordered_List:"ÙÛØ³Øª ÙØ§ÙØ±ØªØ¨",Indent:"Ø§ÙØ²ÙØ¯Ù Ø¯ÙØ¯Ø§ÙÙ",Outdent:"Ú©Ø§ÙØ´ Ø¯ÙØ¯Ø§ÙÙ",Undo:"ÙØ§Ú¯Ø±Ø¯Ø§ÙÛ",Redo:"ØªÚ©Ø±Ø§Ø±",Link:"Ø³Ø§Ø®ØªÙ Ù¾ÛÙÙØ¯",Unlink:"Ø¨Ø±Ø¯Ø§Ø´ØªÙ Ù¾ÛÙÙØ¯",Image:"ØªØµÙÛØ±",Table:"Ø¬Ø¯ÙÙ",HTML:"HTML",Paragraph:"Ù¾Ø§Ø±Ø§Ú¯Ø±Ø§Ù",Heading_1:"Ø³Ø±ØªÛØªØ± Û±",Heading_2:"Ø³Ø±ØªÛØªØ± Û²",Heading_3:"Ø³Ø±ØªÛØªØ± Û³",Heading_4:"Ø³Ø±ØªÛØªØ± Û´",Heading_5:"Ø³Ø±ØªÛØªØ± Ûµ",Heading_6:"Ø³Ø±ØªÛØªØ± Û¶",Preformatted:"ÙØ§ÙØ¨ Ø¢ÙØ§Ø¯Ù",Blockquote:"ÙÙÙ ÙÙÙ",Table_Header:"Ø³Ø±Ø¬Ø¯ÙÙ",URL:"Ø¢Ø¯Ø±Ø³ Ø§ÛÙØªØ±ÙØªÛ",Title:"Ø¹ÙÙØ§Ù",Alternative_Text:"ÙØªÙ Ø¬Ø§ÛÚ¯Ø²ÛÙ",Caption:"Ø¹ÙÙØ§Ù",Summary:"Summary",Number_Of_Rows:"ØªØ¹Ø¯Ø§Ø¯ Ø³Ø·Ø±ÙØ§",Number_Of_Cols:"ØªØ¹Ø¯Ø§Ø¯ Ø³ØªÙÙâÙØ§",Submit:"ÙØ±Ø³ØªØ§Ø¯Ù",Cancel:"ÙØºÙ",Choose:"Ø§ÙØªØ®Ø§Ø¨",Preview:"Ù¾ÛØ´âÙÙØ§ÛØ´",Paste_From_Word:"Ø§ÙØªÙØ§Ù Ø§Ø² ÙØ±Ø¯",Tools:"Ø§Ø¨Ø²Ø§Ø±",Containers:"âÙØ§ÙØ¨âÙØ§",Classes:"Ú©ÙØ§Ø³âÙØ§",Status:"ÙØ¶Ø¹ÛØª",Source_Code:"Ú©Ø¯ ÙØ¨Ø¯Ø£"},WYMeditor.STRINGS.fi={Strong:"Lihavoitu",Emphasis:"Korostus",Superscript:"YlÃ¤indeksi",Subscript:"Alaindeksi",Ordered_List:"Numeroitu lista",Unordered_List:"Luettelomerkit",Indent:"Suurenna sisennystÃ¤",Outdent:"PienennÃ¤ sisennystÃ¤",Undo:"Kumoa",Redo:"Toista",Link:"LinkitÃ¤",Unlink:"Poista linkitys",Image:"Kuva",Table:"Taulukko",HTML:"HTML",Paragraph:"Kappale",Heading_1:"Otsikko 1",Heading_2:"Otsikko 2",Heading_3:"Otsikko 3",Heading_4:"Otsikko 4",Heading_5:"Otsikko 5",Heading_6:"Otsikko 6",Preformatted:"Esimuotoilu",Blockquote:"Sitaatti",Table_Header:"Taulukon otsikko",URL:"URL",Title:"Otsikko",Alternative_Text:"Vaihtoehtoinen teksti",Caption:"Kuvateksti",Summary:"Yhteenveto",Number_Of_Rows:"Rivien mÃ¤Ã¤rÃ¤",Number_Of_Cols:"Palstojen mÃ¤Ã¤rÃ¤",Submit:"LÃ¤hetÃ¤",Cancel:"Peruuta",Choose:"Valitse",Preview:"Esikatsele",Paste_From_Word:"Tuo Wordista",Tools:"TyÃ¶kalut",Containers:"Muotoilut",Classes:"Luokat",Status:"Tila",Source_Code:"LÃ¤hdekoodi"},WYMeditor.STRINGS.fr={Strong:"Mise en Ã©vidence",Emphasis:"Emphase",Superscript:"Exposant",Subscript:"Indice",Ordered_List:"Liste OrdonnÃ©e",Unordered_List:"Liste Non-OrdonnÃ©e",Indent:"ImbriquÃ©",Outdent:"Non-imbriquÃ©",Undo:"Annuler",Redo:"RÃ©tablir",Link:"Lien",Unlink:"Supprimer le Lien",Image:"Image",Table:"Tableau",HTML:"HTML",Paragraph:"Paragraphe",Heading_1:"Titre 1",Heading_2:"Titre 2",Heading_3:"Titre 3",Heading_4:"Titre 4",Heading_5:"Titre 5",Heading_6:"Titre 6",Preformatted:"PrÃ©-formattÃ©",Blockquote:"Citation",Table_Header:"Cellule de titre",URL:"URL",Title:"Titre",Alternative_Text:"Texte alternatif",Caption:"LÃ©gende",Summary:"RÃ©sumÃ©",Number_Of_Rows:"Nombre de lignes",Number_Of_Cols:"Nombre de colonnes",Submit:"Envoyer",Cancel:"Annuler",Choose:"Choisir",Preview:"PrÃ©visualisation",Paste_From_Word:"Copier depuis Word",Tools:"Outils",Containers:"Type de texte",Classes:"Type de contenu",Status:"Infos",Source_Code:"Code source"},WYMeditor.STRINGS.gl={Strong:"Moita Ã©nfase",Emphasis:"Ãnfase",Superscript:"SuperÃ­ndice",Subscript:"SubÃ­ndice",Ordered_List:"Lista ordenada",Unordered_List:"Lista sen ordenar",Indent:"AniÃ±ar",Outdent:"DesaniÃ±ar",Undo:"Desfacer",Redo:"Refacer",Link:"LigazÃ³n",Unlink:"Desligar",Image:"Imaxe",Table:"TÃ¡boa",HTML:"HTML",Paragraph:"ParÃ¡grafo",Heading_1:"TÃ­tulo 1",Heading_2:"TÃ­tulo 2",Heading_3:"TÃ­tulo 3",Heading_4:"TÃ­tulo 4",Heading_5:"TÃ­tulo 5",Heading_6:"TÃ­tulo 6",Preformatted:"Preformatado",Blockquote:"Cita en parÃ¡grafo",Table_Header:"Cabeceira da tÃ¡boa",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto alternativo",Caption:"TÃ­tulo",Summary:"Resumo",Number_Of_Rows:"NÃºmero de filas",Number_Of_Cols:"NÃºmero de columnas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Escoller",Preview:"Previsualizar",Paste_From_Word:"Colar dende Word",Tools:"Ferramentas",Containers:"Contenedores",Classes:"Clases",Status:"Estado",Source_Code:"CÃ³digo fonte"},WYMeditor.STRINGS.he={Strong:"×××§",Emphasis:"×××××",Superscript:"××ª× ×¢×××",Subscript:"××ª× ×ª××ª×",Ordered_List:"×¨×©××× ××××¡×¤×¨×ª",Unordered_List:"×¨×©××× ×× ××××¡×¤×¨×ª",Indent:"×××× ×¤× ×××",Outdent:"×××× ××××¦×",Undo:"××× ×¤×¢×××",Redo:"××¦×¢ ××××© ×¤×¢×××",Link:"×§××©××¨",Unlink:"××× ×§××©××¨",Image:"×ª××× ×",Table:"××××",HTML:"×§×× HTML",Paragraph:"×¤×¡×§×",Heading_1:"×××ª×¨×ª 1 ; ×ª× &lt;h1&gt;",Heading_2:"×××ª×¨×ª 2 ; ×ª× &lt;h2&gt;",Heading_3:"×××ª×¨×ª 3 ; ×ª× &lt;h3&gt;",Heading_4:"×××ª×¨×ª 4 ; ×ª× &lt;h4&gt;",Heading_5:"×××ª×¨×ª 5 ; ×ª× &lt;h5&gt;",Heading_6:"×××ª×¨×ª 6 ; ×ª× &lt;h6&gt;",Preformatted:"××©××¨ ×¨×××××",Blockquote:"×¦××××",Table_Header:"×××ª×¨×ª ××××",URL:"×§××©××¨ (URL)",Title:"×××ª×¨×ª",Alternative_Text:"××§×¡× ××××¤×",Caption:"×××ª×¨×ª",Summary:"×¡××××",Number_Of_Rows:"××¡×¤×¨ ×©××¨××ª",Number_Of_Cols:"××¡×¤×¨ ×××¨××",Submit:"×©××",Cancel:"×××",Choose:"×××¨",Preview:"×ª×¦××× ××§××××",Paste_From_Word:"××¢×ª×§ ×-Word",Tools:"××××",Containers:"××××××",Classes:"××××§××ª",Status:"××¦×",Source_Code:"×§×× ××§××¨"},WYMeditor.STRINGS.hr={Strong:"Podebljano",Emphasis:"NaglaÅ¡eno",Superscript:"Iznad",Subscript:"Ispod",Ordered_List:"Pobrojana lista",Unordered_List:"Nepobrojana lista",Indent:"Uvuci",Outdent:"Izvuci",Undo:"PoniÅ¡ti promjenu",Redo:"Ponovno promjeni",Link:"Hiperveza",Unlink:"Ukloni hipervezu",Image:"Slika",Table:"Tablica",HTML:"HTML",Paragraph:"Paragraf",Heading_1:"Naslov 1",Heading_2:"Naslov 2",Heading_3:"Naslov 3",Heading_4:"Naslov 4",Heading_5:"Naslov 5",Heading_6:"Naslov 6",Preformatted:"Unaprijed formatirano",Blockquote:"Citat",Table_Header:"Zaglavlje tablice",URL:"URL",Title:"Naslov",Alternative_Text:"Alternativni tekst",Caption:"Zaglavlje",Summary:"SaÅ¾etak",Number_Of_Rows:"Broj redova",Number_Of_Cols:"Broj kolona",Submit:"Snimi",Cancel:"Odustani",Choose:"Izaberi",Preview:"Pregled",Paste_From_Word:"Zalijepi iz Word-a",Tools:"Alati",Containers:"Kontejneri",Classes:"Klase",Status:"Status",Source_Code:"Izvorni kod"},WYMeditor.STRINGS.hu={Strong:"FÃ©lkÃ¶vÃ©r",Emphasis:"Kiemelt",Superscript:"FelsÅ index",Subscript:"AlsÃ³ index",Ordered_List:"Rendezett lista",Unordered_List:"Rendezetlen lista",Indent:"BekezdÃ©s",Outdent:"BekezdÃ©s tÃ¶rlÃ©se",Undo:"Visszavon",Redo:"VisszaÃ¡llÃ­t",Link:"Link",Unlink:"Link tÃ¶rlÃ©se",Image:"KÃ©p",Table:"TÃ¡bla",HTML:"HTML",Paragraph:"BekezdÃ©s",Heading_1:"CÃ­msor 1",Heading_2:"CÃ­msor 2",Heading_3:"CÃ­msor 3",Heading_4:"CÃ­msor 4",Heading_5:"CÃ­msor 5",Heading_6:"CÃ­msor 6",Preformatted:"ElÅformÃ¡zott",Blockquote:"IdÃ©zet",Table_Header:"TÃ¡bla FejlÃ©c",URL:"WebcÃ­m",Title:"MegnevezÃ©s",Alternative_Text:"AlternatÃ­v szÃ¶veg",Caption:"FejlÃ©c",Summary:"Summary",Number_Of_Rows:"Sorok szÃ¡ma",Number_Of_Cols:"Oszlopok szÃ¡ma",Submit:"ElkÃ¼ld",Cancel:"MÃ©gsem",Choose:"VÃ¡laszt",Preview:"ElÅnÃ©zet",Paste_From_Word:"MÃ¡solÃ¡s Word-bÃ³l",Tools:"EszkÃ¶zÃ¶k",Containers:"Tartalmak",Classes:"OsztÃ¡lyok",Status:"Ãllapot",Source_Code:"ForrÃ¡skÃ³d"},WYMeditor.STRINGS.it={Strong:"Grassetto",Emphasis:"Corsetto",Superscript:"Apice",Subscript:"Pedice",Ordered_List:"Lista Ordinata",Unordered_List:"Lista Puntata",Indent:"Indenta",Outdent:"Caccia",Undo:"Indietro",Redo:"Avanti",Link:"Inserisci Link",Unlink:"Togli Link",Image:"Inserisci Immagine",Table:"Inserisci Tabella",HTML:"HTML",Paragraph:"Paragrafo",Heading_1:"Heading 1",Heading_2:"Heading 2",Heading_3:"Heading 3",Heading_4:"Heading 4",Heading_5:"Heading 5",Heading_6:"Heading 6",Preformatted:"Preformattato",Blockquote:"Blockquote",Table_Header:"Header Tabella",URL:"Indirizzo",Title:"Titolo",Alternative_Text:"Testo Alternativo",Caption:"Caption",Summary:"Summary",Number_Of_Rows:"Numero di Righe",Number_Of_Cols:"Numero di Colonne",Submit:"Invia",Cancel:"Cancella",Choose:"Scegli",Preview:"Anteprima",Paste_From_Word:"Incolla",Tools:"Tools",Containers:"Contenitori",Classes:"Classi",Status:"Stato",Source_Code:"Codice Sorgente"},WYMeditor.STRINGS.ja={Strong:"å¼·èª¿<strong>",Emphasis:"å¼·èª¿<em>",Superscript:"ä¸ä»ã",Subscript:"ä¸ä»ã",Ordered_List:"çªå·ä»ããªã¹ã",Unordered_List:"çªå·ç¡ãªã¹ã",Indent:"ã¤ã³ãã³ããå¢ãã",Outdent:"ã¤ã³ãã³ããæ¸ãã",Undo:"åã«æ»ã",Redo:"ããç´ã",Link:"ãªã³ã¯",Unlink:"ãªã³ã¯åæ¶",Image:"ç»å",Table:"ãã¼ãã«",HTML:"HTML",Paragraph:"æ®µè½",Heading_1:"è¦åºã 1",Heading_2:"è¦åºã 2",Heading_3:"è¦åºã 3",Heading_4:"è¦åºã 4",Heading_5:"è¦åºã 5",Heading_6:"è¦åºã 6",Preformatted:"æ´å½¢æ¸ã¿ãã­ã¹ã",Blockquote:"å¼ç¨æ",Table_Header:"è¡¨è¦åºã",URL:"URL",Title:"ã¿ã¤ãã«",Alternative_Text:"ä»£æ¿ãã­ã¹ã",Caption:"ã­ã£ãã·ã§ã³",Summary:"ãµããªã¼",Number_Of_Rows:"è¡æ°",Number_Of_Cols:"åæ°",Submit:"éä¿¡",Cancel:"ã­ã£ã³ã»ã«",Choose:"é¸æ",Preview:"ãã¬ãã¥ã¼",Paste_From_Word:"è²¼ãä»ã",Tools:"ãã¼ã«",Containers:"ã³ã³ãã",Classes:"ã¯ã©ã¹",Status:"ã¹ãã¼ã¿ã¹",Source_Code:"ã½ã¼ã¹ã³ã¼ã"},WYMeditor.STRINGS.lt={Strong:"Pusjuodis",Emphasis:"Kursyvas",Superscript:"VirÅ¡utinis indeksas",Subscript:"Apatinis indeksas",Ordered_List:"Numeruotas sÄraÅ¡as",Unordered_List:"SuÅ¾enklintas sÄraÅ¡as",Indent:"Padidinti Ä¯traukÄ",Outdent:"SumaÅ¾inti Ä¯traukÄ",Undo:"AtÅ¡aukti",Redo:"Atstatyti",Link:"Nuoroda",Unlink:"Panaikinti nuorodÄ",Image:"Vaizdas",Table:"LentelÄ",HTML:"HTML",Paragraph:"Paragrafas",Heading_1:"AntraÅ¡tinis 1",Heading_2:"AntraÅ¡tinis 2",Heading_3:"AntraÅ¡tinis 3",Heading_4:"AntraÅ¡tinis 4",Heading_5:"AntraÅ¡tinis 5",Heading_6:"AntraÅ¡tinis 6",Preformatted:"Formuotas",Blockquote:"Citata",Table_Header:"LentelÄs antraÅ¡tÄ",URL:"URL",Title:"AntraÅ¡tinis tekstas",Relationship:"SÄryÅ¡is",Alternative_Text:"Alternatyvus tekstas",Caption:"AntraÅ¡tÄ",Summary:"Santrauka",Number_Of_Rows:"EiluÄiÅ³ skaiÄius",Number_Of_Cols:"StulpeliÅ³ skaiÄius",Submit:"IÅ¡saugoti",Cancel:"Nutraukti",Choose:"Rinktis",Preview:"PerÅ¾iÅ«ra",Paste_From_Word:"Ä®kelti iÅ¡ MS Word",Tools:"Ä®rankiai",Containers:"Stiliai",Classes:"KlasÄs",Status:"Statusas",Source_Code:"IÅ¡eities tekstas"},WYMeditor.STRINGS.nb={Strong:"Fet",Emphasis:"Uthevet",Superscript:"OpphÃ¸yet",Subscript:"Nedsenket",Ordered_List:"Nummerert liste",Unordered_List:"Punktliste",Indent:"Rykk inn",Outdent:"Rykk ut",Undo:"Angre",Redo:"Gjenta",Link:"Lenke",Unlink:"Ta bort lenken",Image:"Bilde",Table:"Tabell",HTML:"HTML",Paragraph:"Avsnitt",Heading_1:"Overskrift 1",Heading_2:"Overskrift 2",Heading_3:"Overskrift 3",Heading_4:"Overskrift 4",Heading_5:"Overskrift 5",Heading_6:"Overskrift 6",Preformatted:"Preformatert",Blockquote:"Sitat",Table_Header:"Tabelloverskrift",URL:"URL",Title:"Tittel",Alternative_Text:"Alternativ tekst",Caption:"Overskrift",Summary:"Sammendrag",Number_Of_Rows:"Antall rader",Number_Of_Cols:"Antall kolonner",Submit:"Ok",Cancel:"Avbryt",Choose:"Velg",Preview:"ForhÃ¥ndsvis",Paste_From_Word:"Lim inn fra Word",Tools:"VerktÃ¸y",Containers:"Formatering",Classes:"Klasser",Status:"Status",Source_Code:"Kildekode"},WYMeditor.STRINGS.nl={Strong:"Sterk benadrukken",Emphasis:"Benadrukken",Superscript:"Bovenschrift",Subscript:"Onderschrift",Ordered_List:"Geordende lijst",Unordered_List:"Ongeordende lijst",Indent:"Inspringen",Outdent:"Terugspringen",Undo:"Ongedaan maken",Redo:"Opnieuw uitvoeren",Link:"Linken",Unlink:"Ontlinken",Image:"Afbeelding",Table:"Tabel",HTML:"HTML",Paragraph:"Paragraaf",Heading_1:"Kop 1",Heading_2:"Kop 2",Heading_3:"Kop 3",Heading_4:"Kop 4",Heading_5:"Kop 5",Heading_6:"Kop 6",Preformatted:"Voorgeformatteerd",Blockquote:"Citaat",Table_Header:"Tabel-kop",URL:"URL",Title:"Titel",Relationship:"Relatie",Alternative_Text:"Alternatieve tekst",Caption:"Bijschrift",Summary:"Summary",Number_Of_Rows:"Aantal rijen",Number_Of_Cols:"Aantal kolommen",Submit:"Versturen",Cancel:"Annuleren",Choose:"Kiezen",Preview:"Voorbeeld bekijken",Paste_From_Word:"Plakken uit Word",Tools:"Hulpmiddelen",Containers:"Teksttypes",Classes:"Klassen",Status:"Status",Source_Code:"Broncode"},WYMeditor.STRINGS.nn={Strong:"Feit",Emphasis:"Utheva",Superscript:"OpphÃ¸gd",Subscript:"Nedsenka",Ordered_List:"Nummerert liste",Unordered_List:"Punktliste",Indent:"Rykk inn",Outdent:"Rykk ut",Undo:"Angre",Redo:"Gjentaka",Link:"Lenkje",Unlink:"Ta bort lenkja",Image:"Bilete",Table:"Tabell",HTML:"HTML",Paragraph:"Avsnitt",Heading_1:"Overskrift 1",Heading_2:"Overskrift 2",Heading_3:"Overskrift 3",Heading_4:"Overskrift 4",Heading_5:"Overskrift 5",Heading_6:"Overskrift 6",Preformatted:"Preformatert",Blockquote:"Sitat",Table_Header:"Tabelloverskrift",URL:"URL",Title:"Tittel",Alternative_Text:"Alternativ tekst",Caption:"Overskrift",Summary:"Samandrag",Number_Of_Rows:"Tal pÃ¥ rader",Number_Of_Cols:"Tal pÃ¥ kolonnar",Submit:"Ok",Cancel:"Avbryt",Choose:"Vel",Preview:"FÃ¸rehandsvis",Paste_From_Word:"Lim inn frÃ¥ Word",Tools:"Verkty",Containers:"Formatering",Classes:"Klassar",Status:"Status",Source_Code:"Kjeldekode"},WYMeditor.STRINGS.pl={Strong:"Nacisk",Emphasis:"Emfaza",Superscript:"Indeks gÃ³rny",Subscript:"Indeks dolny",Ordered_List:"Lista numerowana",Unordered_List:"Lista wypunktowana",Indent:"ZwiÄksz wciÄcie",Outdent:"Zmniejsz wciÄcie",Undo:"Cofnij",Redo:"PonÃ³w",Link:"Wstaw link",Unlink:"UsuÅ link",Image:"Obraz",Table:"Tabela",HTML:"Å¹rÃ³dÅo HTML",Paragraph:"Akapit",Heading_1:"NagÅÃ³wek 1",Heading_2:"NagÅÃ³wek 2",Heading_3:"NagÅÃ³wek 3",Heading_4:"NagÅÃ³wek 4",Heading_5:"NagÅÃ³wek 5",Heading_6:"NagÅÃ³wek 6",Preformatted:"Preformatowany",Blockquote:"Cytat blokowy",Table_Header:"NagÅÃ³wek tabeli",URL:"URL",Title:"TytuÅ",Alternative_Text:"Tekst alternatywny",Caption:"TytuÅ tabeli",Summary:"Summary",Number_Of_Rows:"Liczba wierszy",Number_Of_Cols:"Liczba kolumn",Submit:"WyÅlij",Cancel:"Anuluj",Choose:"Wybierz",Preview:"PodglÄd",Paste_From_Word:"Wklej z Worda",Tools:"NarzÄdzia",Containers:"Format",Classes:"Styl",Status:"Status",Source_Code:"Kod ÅºrÃ³dÅowy"},WYMeditor.STRINGS["pt-br"]={Strong:"Resaltar",Emphasis:"Enfatizar",Superscript:"Sobre escrito",Subscript:"Sub escrito ",Ordered_List:"Lista ordenada",Unordered_List:"Lista desordenada",Indent:"Indentado",Outdent:"Desidentar",Undo:"Desfazer",Redo:"Refazer",Link:"Link",Unlink:"Remover Link",Image:"Imagem",Table:"Tabela",HTML:"HTML",Paragraph:"ParÃ¡grafo",Heading_1:"TÃ­tulo 1",Heading_2:"TÃ­tulo 2",Heading_3:"TÃ­tulo 3",Heading_4:"TÃ­tulo 4",Heading_5:"TÃ­tulo 5",Heading_6:"TÃ­tulo 6",Preformatted:"Preformatado",Blockquote:"CitaÃ§Ã£o",Table_Header:"TÃ­tulo de tabela",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto alternativo",Caption:"Legenda",Summary:"Summary",Number_Of_Rows:"NÃºmero de linhas",Number_Of_Cols:"NÃºmero de colunas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Selecionar",Preview:"Previsualizar",Paste_From_Word:"Copiar do Word",Tools:"Ferramentas",Containers:"Conteneiners",Classes:"Classes",Status:"Estado",Source_Code:"CÃ³digo fonte"},WYMeditor.STRINGS.pt={Strong:"Negrito",Emphasis:"ItÃ¡lico",Superscript:"Sobrescrito",Subscript:"Subsescrito",Ordered_List:"Lista Numerada",Unordered_List:"Lista Marcada",Indent:"Aumentar IndentaÃ§Ã£",Outdent:"Diminuir IndentaÃ§Ã£",Undo:"Desfazer",Redo:"Restaurar",Link:"Link",Unlink:"Tirar link",Image:"Imagem",Table:"Tabela",HTML:"HTML",Paragraph:"ParÃ¡grafo",Heading_1:"TÃ­tulo 1",Heading_2:"TÃ­tulo 2",Heading_3:"TÃ­tulo 3",Heading_4:"TÃ­tulo 4",Heading_5:"TÃ­tulo 5",Heading_6:"TÃ­tulo 6",Preformatted:"PrÃ©-formatado",Blockquote:"CitaÃ§Ã£o",Table_Header:"CabeÃ§alho Tabela",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto Alterativo",Caption:"TÃ­tulo Tabela",Summary:"Summary",Number_Of_Rows:"NÃºmero de Linhas",Number_Of_Cols:"NÃºmero de Colunas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Escolha",Preview:"Prever",Paste_From_Word:"Colar do Word",Tools:"Ferramentas",Containers:"Containers",Classes:"Classes",Status:"Status",Source_Code:"CÃ³digo Fonte"},WYMeditor.STRINGS.ru={Strong:"ÐÐ¸ÑÐ½ÑÐ¹",Emphasis:"ÐÐ°ÐºÐ»Ð¾Ð½Ð½ÑÐ¹",Superscript:"ÐÐ°Ð´ÑÑÑÐ¾ÑÐ½ÑÐ¹",Subscript:"ÐÐ¾Ð´ÑÑÑÐ¾ÑÐ½ÑÐ¹",Ordered_List:"ÐÑÐ¼ÐµÑÐ¾Ð²Ð°Ð½ÑÐ¹ ÑÐ¿Ð¸ÑÐ¾Ðº",Unordered_List:"ÐÐµÐ½ÑÐ¼ÐµÑÐ¾Ð²Ð°Ð½ÑÐ¹ ÑÐ¿Ð¸ÑÐ¾Ðº",Indent:"Ð£Ð²ÐµÐ»Ð¸ÑÐ¸ÑÑ Ð¾ÑÑÑÑÐ¿",Outdent:"Ð£Ð¼ÐµÐ½ÑÑÐ¸ÑÑ Ð¾ÑÑÑÑÐ¿",Undo:"ÐÑÐ¼ÐµÐ½Ð¸ÑÑ",Redo:"ÐÐ¾Ð²ÑÐ¾ÑÐ¸ÑÑ",Link:"Ð¡ÑÑÐ»ÐºÐ°",Unlink:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÑÑÐ»ÐºÑ",Image:"ÐÐ·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ðµ",Table:"Ð¢Ð°Ð±Ð»Ð¸ÑÐ°",HTML:"ÐÑÐ°Ð²Ð¸ÑÑ HTML",Paragraph:"ÐÐ°ÑÐ°Ð³ÑÐ°Ñ",Heading_1:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 1",Heading_2:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 2",Heading_3:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 3",Heading_4:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 4",Heading_5:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 5",Heading_6:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 6",Preformatted:"Preformatted",Blockquote:"Ð¦Ð¸ÑÐ°ÑÐ°",Table_Header:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÐ°Ð±Ð»Ð¸ÑÑ",URL:"URL",Title:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº",Alternative_Text:"ÐÐ»ÑÑÐµÑÐ½Ð°ÑÐ¸Ð²Ð½ÑÐ¹ ÑÐµÐºÑÑ",Caption:"ÐÐ°Ð´Ð¿Ð¸ÑÑ",Summary:"Summary",Number_Of_Rows:"ÐÐ¾Ð»-Ð²Ð¾ ÑÑÑÐ¾Ðº",Number_Of_Cols:"ÐÐ¾Ð»-Ð²Ð¾ ÑÑÐ¾Ð»Ð±ÑÐ¾Ð²",Submit:"ÐÑÐ¿ÑÐ°Ð²Ð¸ÑÑ",Cancel:"ÐÑÐ¼ÐµÐ½Ð°",Choose:"ÐÑÐ±Ð¾Ñ",Preview:"ÐÑÐ¾ÑÐ¼Ð¾ÑÑ",Paste_From_Word:"ÐÑÑÐ°Ð²Ð¸ÑÑ Ð¸Ð· Word",Tools:"ÐÐ½ÑÑÑÑÐ¼ÐµÐ½ÑÑ",Containers:"ÐÐ¾Ð½ÑÐµÐ¹Ð½ÐµÑÑ",Classes:"ÐÐ»Ð°ÑÑÑ",Status:"Ð¡ÑÐ°ÑÑÑ",Source_Code:"ÐÑÑÐ¾Ð´Ð½ÑÐ¹ ÐºÐ¾Ð´"},WYMeditor.STRINGS.sk={Strong:"TuÄnÃ©",Emphasis:"KurzÃ­va",Superscript:"HornÃ½ index",Subscript:"DolnÃ½ index",Ordered_List:"ÄÃ­slovanÃ½ zoznam",Unordered_List:"NeÄÃ­slovanÃ½ zoznam",Indent:"ZvÃ¤ÄÅ¡iÅ¥ odsadenie",Outdent:"ZmenÅ¡iÅ¥ odsadenie",Undo:"VrÃ¡tiÅ¥",Redo:"OpakovaÅ¥",Link:"VytvoriÅ¥ odkaz",Unlink:"ZruÅ¡iÅ¥ odkaz",Image:"ObrÃ¡zok",Table:"TabuÄ¾ka",HTML:"HTML",Paragraph:"Odstavec",Heading_1:"Nadpis 1. Ãºrovne",Heading_2:"Nadpis 2. Ãºrovne",Heading_3:"Nadpis 3. Ãºrovne",Heading_4:"Nadpis 4. Ãºrovne",Heading_5:"Nadpis 5. Ãºrovne",Heading_6:"Nadpis 6. Ãºrovne",Preformatted:"PredformÃ¡tovanÃ½ text",Blockquote:"CitÃ¡cia",Table_Header:"HlaviÄka tabuÄ¾ky",URL:"URL adresa",Title:"Titulok",Alternative_Text:"AlternatÃ­vny text",Caption:"Titulok tabuÄ¾ky",Summary:"Zhrnutie obsahu",Number_Of_Rows:"PoÄet riadkov",Number_Of_Cols:"PoÄet stÄºpcov",Submit:"OdoslaÅ¥",Cancel:"ZruÅ¡iÅ¥",Choose:"VybraÅ¥",Preview:"NÃ¡hÄ¾ad",Paste_From_Word:"VloÅ¾iÅ¥ z Wordu",Tools:"NÃ¡stroje",Containers:"Typy obsahu",Classes:"Triedy",Status:"Stav",Source_Code:"ZdrojovÃ½ kÃ³d"},WYMeditor.STRINGS.sv={Strong:"Viktigt",Emphasis:"Betoning",Superscript:"UpphÃ¶jt",Subscript:"NedsÃ¤nkt",Ordered_List:"Nummerlista",Unordered_List:"Punktlista",Indent:"Indrag",Outdent:"Utdrag",Undo:"Ãngra",Redo:"GÃ¶r om",Link:"LÃ¤nk",Unlink:"Ta bort lÃ¤nk",Image:"Bild",Table:"Tabell",HTML:"HTML",Paragraph:"Paragraf",Heading_1:"Rubrik 1",Heading_2:"Rubrik 2",Heading_3:"Rubrik 3",Heading_4:"Rubrik 4",Heading_5:"Rubrik 5",Heading_6:"Rubrik 6",Preformatted:"FÃ¶rformaterad",Blockquote:"Blockcitat",Table_Header:"Tabellrubrik",URL:"URL",Title:"Titel",Relationship:"Relation",Alternative_Text:"Alternativ text",Caption:"Ãverskrift",Summary:"Summary",Number_Of_Rows:"Antal rader",Number_Of_Cols:"Antal kolumner",Submit:"Skicka",Cancel:"Avbryt",Choose:"VÃ¤lj",Preview:"FÃ¶rhandsgranska",Paste_From_Word:"Klistra in frÃ¥n Word",Tools:"Verktyg",Containers:"Formatering",Classes:"Klasser",Status:"Status",Source_Code:"KÃ¤llkod"},WYMeditor.STRINGS.tr={Strong:"KalÄ±n",Emphasis:"Vurgu",Superscript:"Ãstsimge",Subscript:"Altsimge",Ordered_List:"SÄ±ralÄ± List",Unordered_List:"SÄ±rasÄ±z List",Indent:"Girintile",Outdent:"ÃÄ±kÄ±ntÄ±la",Undo:"Geri Al",Redo:"Yinele",Link:"BaÄlantÄ±",Unlink:"BaÄlantÄ±yÄ± KaldÄ±r",Image:"Resim",Table:"Tablo",HTML:"HTML",Paragraph:"ParaÄraf",Heading_1:"BaÅlÄ±k 1",Heading_2:"BaÅlÄ±k 2",Heading_3:"BaÅlÄ±k 3",Heading_4:"BaÅlÄ±k 4",Heading_5:"BaÅlÄ±k 5",Heading_6:"BaÅlÄ±k 6",Preformatted:"Ãnceden FormatlÄ±",Blockquote:"AlÄ±ntÄ±",Table_Header:"Tablo BaÅlÄ±ÄÄ±",URL:"URL",Title:"BaÅlÄ±k",Alternative_Text:"Alternatif Metin",Caption:"Etiket",Summary:"Ãzet",Number_Of_Rows:"SatÄ±r sayÄ±sÄ±",Number_Of_Cols:"SÃ¼tun sayÄ±sÄ±",Submit:"GÃ¶nder",Cancel:"Ä°ptal",Choose:"SeÃ§",Preview:"Ãnizleme",Paste_From_Word:"Word'den yapÄ±ÅtÄ±r",Tools:"AraÃ§lar",Containers:"KapsayÄ±cÄ±lar",Classes:"SÄ±nÄ±flar",Status:"Durum",Source_Code:"Kaynak Kodu"},WYMeditor.STRINGS.zh_cn={Strong:"å ç²",Emphasis:"æä½",Superscript:"ä¸æ ",Subscript:"ä¸æ ",Ordered_List:"æåºåè¡¨",Unordered_List:"æ åºåè¡¨",Indent:"å¢å ç¼©è¿",Outdent:"åå°ç¼©è¿",Undo:"æ¤æ¶",Redo:"éå",Link:"é¾æ¥",Unlink:"åæ¶é¾æ¥",Image:"å¾ç",Table:"è¡¨æ ¼",HTML:"HTMLæºä»£ç ",Paragraph:"æ®µè½",Heading_1:"æ é¢ 1",Heading_2:"æ é¢ 2",Heading_3:"æ é¢ 3",Heading_4:"æ é¢ 4",Heading_5:"æ é¢ 5",Heading_6:"æ é¢ 6",Preformatted:"åå§ææ¬",Blockquote:"å¼è¯­",Table_Header:"è¡¨å¤´",URL:"å°å",Title:"æç¤ºæå­",Alternative_Text:"å¤±ææå­",Caption:"æ é¢",Summary:"Summary",Number_Of_Rows:"è¡æ°",Number_Of_Cols:"åæ°",Submit:"æäº¤",Cancel:"æ¾å¼",Choose:"éæ©",Preview:"é¢è§",Paste_From_Word:"ä»Wordç²è´´çº¯ææ¬",Tools:"å·¥å·",Containers:"å®¹å¨",Classes:"é¢å®ä¹æ ·å¼",Status:"ç¶æ",Source_Code:"æºä»£ç ",Attachment:"éä»¶",NewParagraph:"æ°æ®µè½"},WYMeditor.STRINGS.zh_tw={Strong:"å ç²",Emphasis:"æé«",Superscript:"ä¸æ¨",Subscript:"ä¸æ¨",Ordered_List:"æåºåè¡¨",Unordered_List:"ç¡åºåè¡¨",Indent:"å¢å ç¸®æ",Outdent:"æ¸å°ç¸®æ",Undo:"åæ¶",Redo:"éå",Link:"éçµ",Unlink:"åæ¶éçµ",Image:"åç",Table:"è¡¨æ ¼",HTML:"HTML æºä»£ç¢¼",Paragraph:"æ®µè½",Heading_1:"æ¨é¡ 1",Heading_2:"æ¨é¡ 2",Heading_3:"æ¨é¡ 3",Heading_4:"æ¨é¡ 4",Heading_5:"æ¨é¡ 5",Heading_6:"æ¨é¡ 6",Preformatted:"åå§ææ¬",Blockquote:"å¼èª",Table_Header:"è¡¨æ ¼é é¨",URL:"å°å",Title:"æç¤ºæå­",Alternative_Text:"å¤±ææå­",Caption:"ä¸»é¡",Summary:"å¤§ç¶±",Number_Of_Rows:"è¡æ¸",Number_Of_Cols:"åæ¸",Submit:"æäº¤",Cancel:"æ¾æ£",Choose:"é¸æ",Preview:"é è¦½",Paste_From_Word:"å¾Wordè¤å¶ç´ææ¬",Tools:"å·¥å·",Containers:"å®¹å¨",Classes:"é å®ç¾©æ¨£å¼",Status:"çæ",Source_Code:"æºä»£ç¢¼",Attachment:"éä»¶",NewParagraph:"æ°æ®µè½"},window.rangy=function(){var r="object",o="function",n="undefined",s=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],l=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],t=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],i=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"];function d(e,t){var n=typeof e[t];return n==o||!(n!=r||!e[t])||"unknown"==n}function u(e,t){return!(typeof e[t]!=r||!e[t])}function e(e,t){return typeof e[t]!=n}function a(r){return function(e,t){for(var n=t.length;n--;)if(!r(e,t[n]))return!1;return!0}}var c=a(d),f=a(u),p=a(e);function h(e){return e&&c(e,i)&&p(e,t)}var m={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:d,isHostObject:u,isHostProperty:e,areHostMethods:c,areHostObjects:f,areHostProperties:p,isTextRange:h},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};function g(e){window.alert("Rangy not supported in your browser. Reason: "+e),m.initialized=!0,m.supported=!1}m.fail=g,m.warn=function(e){var t="Rangy warning: "+e;m.config.alertOnWarn?window.alert(t):typeof window.console!=n&&typeof window.console.log!=n&&window.console.log(t)},!{}.hasOwnProperty?g("hasOwnProperty not supported"):m.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};var _=[],y=[];function v(){if(!m.initialized){var e,t=!1,n=!1;d(document,"createRange")&&(e=document.createRange(),c(e,l)&&p(e,s)&&(t=!0),e.detach());var r=u(document,"body")?document.body:document.getElementsByTagName("body")[0];r&&d(r,"createTextRange")&&h(e=r.createTextRange())&&(n=!0),t||n||g("Neither Range nor TextRange are implemented"),m.initialized=!0,m.features={implementsDomRange:t,implementsTextRange:n};for(var o=y.concat(_),i=0,a=o.length;i<a;++i)try{o[i](m)}catch(e){u(window,"console")&&d(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",e)}}}m.init=v,m.addInitListener=function(e){m.initialized?e(m):_.push(e)};var b=[];function C(e){this.name=e,this.initialized=!1,this.supported=!1}m.addCreateMissingNativeApiListener=function(e){b.push(e)},m.createMissingNativeApi=function(e){e=e||window,v();for(var t=0,n=b.length;t<n;++t)b[t](e)},C.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},C.prototype.warn=function(e){m.warn("Module "+this.name+": "+e)},C.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},m.createModule=function(e,t){var n=new C(e);m.modules[e]=n,y.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})};var S=!(m.requireModules=function(e){for(var t,n,r=0,o=e.length;r<o;++r){if(n=e[r],!((t=m.modules[n])&&t instanceof C))throw new Error("Module '"+n+"' not found");if(!t.supported)throw new Error("Module '"+n+"' not supported")}}),T=function(e){S||(S=!0,m.initialized||v())};if(typeof window!=n){if(typeof document!=n)return d(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",T,!1),d(window,"addEventListener")?window.addEventListener("load",T,!1):d(window,"attachEvent")?window.attachEvent("onload",T):g("Window does not have required addEventListener or attachEvent method"),m;g("No document found")}else g("No window found")}(),rangy.createModule("DomUtil",function(e,t){var n="undefined",r=e.util;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),r.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var o=document.createElement("div");r.areHostMethods(o,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),r.isHostProperty(o,"innerHTML")||t.fail("Element is missing innerHTML property");var i=document.createTextNode("test");r.areHostMethods(i,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var a=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function d(e){for(var t=0;e=e.previousSibling;)t++;return t}function u(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(a(r,n))return n;return null}function c(e,t,n){for(var r,o=n?e:e.parentNode;o;){if((r=o.parentNode)===t)return o;o=r}return null}function s(e){var t=e.nodeType;return 3==t||4==t||8==t}function l(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function f(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return f(e.parentNode);throw new Error("getDocument: no document found for node")}function p(e){if(!e)return"[No node]";if(s(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function h(e){this.root=e,this._next=e}function m(e,t){this.node=e,this.offset=t}function g(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}h.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},m.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+p(this.node)+":"+this.offset+")]"}},(g.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11}).toString=function(){return this.message},e.dom={arrayContains:a,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:d,getNodeLength:function(e){var t;return s(e)?e.length:(t=e.childNodes)?t.length:0},getCommonAncestor:u,isAncestorOf:function(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1},getClosestAncestorIn:c,isCharacterDataNode:s,insertAfter:l,splitDataNode:function(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),l(n,e),n},getDocument:f,getWindow:function(e){var t=f(e);if(typeof t.defaultView!=n)return t.defaultView;if(typeof t.parentWindow!=n)return t.parentWindow;throw new Error("Cannot get a window object for node")},getIframeWindow:function(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")},getBody:function(e){return r.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,n,r){var o,i,a,s,l;if(e==n)return t===r?0:t<r?-1:1;if(o=c(n,e,!0))return t<=d(o)?-1:1;if(o=c(e,n,!0))return d(o)<r?-1:1;if((a=e===(i=u(e,n))?i:c(e,i,!0))===(s=n===i?i:c(n,i,!0)))throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=i.firstChild;l;){if(l===a)return-1;if(l===s)return 1;l=l.nextSibling}throw new Error("Should not be here!")},inspectNode:p,fragmentFromNodeChildren:function(e){for(var t,n=f(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new h(e)},DomPosition:m},e.DOMException=g}),rangy.createModule("DomRange",function(r,e){r.requireModules(["DomUtil"]);var u=r.dom,t=u.DomPosition,a=r.DOMException;function s(e,t){return 3!=e.nodeType&&(u.isAncestorOf(e,t.startContainer,!0)||u.isAncestorOf(e,t.endContainer,!0))}function l(e){return u.getDocument(e.startContainer)}function d(e,t,n){var r=e._listeners[t];if(r)for(var o=0,i=r.length;o<i;++o)r[o].call(e,{target:e,args:n})}function c(e){return new t(e.parentNode,u.getNodeIndex(e))}function f(e){return new t(e.parentNode,u.getNodeIndex(e)+1)}function n(e,t,n){var r=11==e.nodeType?e.firstChild:e;return u.isCharacterDataNode(t)?n==t.length?u.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:u.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function p(e,t,n){var r,o,i,a;for(n=n||{stop:!1};i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i))return void(n.stop=!0);if(p(a=e.getSubtreeIterator(),t,n),a.detach(!0),n.stop)return}else for(r=u.createIterator(i);o=r.next();)if(!1===t(o))return void(n.stop=!0)}function h(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(h(t=e.getSubtreeIterator()),t.detach(!0)):e.remove()}function m(e){for(var t,n,r=l(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(m(n)),n.detach(!0)):e.remove(),10==t.nodeType)throw new a("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function o(e,t,n){var r,o=!(!t||!t.length),i=!!n;o&&(r=new RegExp("^("+t.join("|")+")$"));var a=[];return p(new g(e,!1),function(e){o&&!r.test(e.nodeType)||i&&!n(e)||a.push(e)}),a}function i(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+u.inspectNode(e.startContainer)+":"+e.startOffset+", "+u.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&u.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||u.isCharacterDataNode(this.sc)?u.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||u.isCharacterDataNode(this.ec)?u.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function _(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function y(e,t,n){this.nodes=o(e,t,n),this._next=this.nodes[0],this._position=0}g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,u.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!u.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return s(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse();else{e=new ne(l(this.range));var t=this._current,n=t,r=0,o=t,i=u.getNodeLength(t);u.isAncestorOf(t,this.sc,!0)&&(n=this.sc,r=this.so),u.isAncestorOf(t,this.ec,!0)&&(o=this.ec,i=this.eo),te(e,n,r,o,i)}return new g(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},(_.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2}).toString=function(){return this.message},y.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var v=[1,3,4,5,7,8,10],b=[2,9,11],C=[1,3,4,5,7,8,10,11],S=[1,3,4,5,7,8];function T(o){return function(e,t){for(var n,r=t?e:e.parentNode;r;){if(n=r.nodeType,u.arrayContains(o,n))return r;r=r.parentNode}return null}}var w=u.getRootContainer,E=T([9,11]),M=T([5,6,10,12]),N=T([6,10,12]);function R(e,t){if(N(e,t))throw new _("INVALID_NODE_TYPE_ERR")}function L(e){if(!e.startContainer)throw new a("INVALID_STATE_ERR")}function W(e,t){if(!u.arrayContains(t,e.nodeType))throw new _("INVALID_NODE_TYPE_ERR")}function I(e,t){if(t<0||t>(u.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new a("INDEX_SIZE_ERR")}function k(e,t){if(E(e,!0)!==E(t,!0))throw new a("WRONG_DOCUMENT_ERR")}function x(e){if(M(e,!0))throw new a("NO_MODIFICATION_ALLOWED_ERR")}function O(e,t){if(!e)throw new a(t)}function A(e){return!u.arrayContains(b,e.nodeType)&&!E(e,!0)}function Y(e,t){return t<=(u.isCharacterDataNode(e)?e.length:e.childNodes.length)}function H(e){if(L(e),A(e.startContainer)||A(e.endContainer)||!Y(e.startContainer,e.startOffset)||!Y(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}var j=document.createElement("style"),P=!1;try{j.innerHTML="<b>x</b>",P=3==j.firstChild.nodeType}catch(e){}r.features.htmlParsingConforms=P;var D=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],B=0,Q=1,U=2,z=3,F=0,K=1,q=2,$=3;function X(){}function G(e){e.START_TO_START=B,e.START_TO_END=Q,e.END_TO_END=U,e.END_TO_START=z,e.NODE_BEFORE=F,e.NODE_AFTER=K,e.NODE_BEFORE_AND_AFTER=q,e.NODE_INSIDE=$}function V(e){G(e),G(e.prototype)}function Z(a,s){return function(){H(this);var e,t=this.startContainer,n=this.startOffset,r=this.commonAncestorContainer,o=new g(this,!0);t!==r&&(t=(e=f(u.getClosestAncestorIn(t,r,!0))).node,n=e.offset),p(o,x),o.reset();var i=a(o);return o.detach(),s(this,t,n,t,n),i}}function J(e,d,t){function n(n,r){return function(e){L(this),W(e,v),W(w(e),b);var t=(n?c:f)(e);(r?o:i)(this,t.node,t.offset)}}function o(e,t,n){var r=e.endContainer,o=e.endOffset;t===e.startContainer&&n===e.startOffset||(w(t)==w(r)&&1!=u.comparePoints(t,n,r,o)||(r=t,o=n),d(e,t,n,r,o))}function i(e,t,n){var r=e.startContainer,o=e.startOffset;t===e.endContainer&&n===e.endOffset||(w(t)==w(r)&&-1!=u.comparePoints(t,n,r,o)||(r=t,o=n),d(e,r,o,t,n))}e.prototype=new X,r.util.extend(e.prototype,{setStart:function(e,t){L(this),R(e,!0),I(e,t),o(this,e,t)},setEnd:function(e,t){L(this),R(e,!0),I(e,t),i(this,e,t)},setStartBefore:n(!0,!0),setStartAfter:n(!1,!0),setEndBefore:n(!0,!1),setEndAfter:n(!1,!1),collapse:function(e){H(this),e?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){L(this),R(e,!0),d(this,e,0,e,u.getNodeLength(e))},selectNode:function(e){L(this),R(e,!1),W(e,v);var t=c(e),n=f(e);d(this,t.node,t.offset,n.node,n.offset)},extractContents:Z(m,d),deleteContents:Z(h,d),canSurroundContents:function(){H(this),x(this.startContainer),x(this.endContainer);var e=new g(this,!0),t=e._first&&s(e._first,this)||e._last&&s(e._last,this);return e.detach(),!t},detach:function(){t(this)},splitBoundaries:function(){H(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,o=e===n;u.isCharacterDataNode(n)&&0<r&&r<n.length&&u.splitDataNode(n,r),u.isCharacterDataNode(e)&&0<t&&t<e.length&&(e=u.splitDataNode(e,t),o?(r-=t,n=e):n==e.parentNode&&r>=u.getNodeIndex(e)&&r++,t=0),d(this,e,t,n,r)},normalizeBoundaries:function(){H(this);var o=this.startContainer,i=this.startOffset,a=this.endContainer,s=this.endOffset,e=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(s=(a=e).length,e.appendData(t.data),t.parentNode.removeChild(t))},t=function(e){var t=e.previousSibling;if(t&&t.nodeType==e.nodeType){var n=(o=e).length;if(i=t.length,e.insertData(0,t.data),t.parentNode.removeChild(t),o==a)s+=i,a=o;else if(a==e.parentNode){var r=u.getNodeIndex(e);s==r?(a=e,s=n):r<s&&s--}}},n=!0;if(u.isCharacterDataNode(a))a.length==s&&e(a);else{if(0<s){var r=a.childNodes[s-1];r&&u.isCharacterDataNode(r)&&e(r)}n=!this.collapsed}if(n){if(u.isCharacterDataNode(o))0==i&&t(o);else if(i<o.childNodes.length){var l=o.childNodes[i];l&&u.isCharacterDataNode(l)&&t(l)}}else o=a,i=s;d(this,o,i,a,s)},collapseToPoint:function(e,t){var n,r,o;L(this),R(e,!0),I(e,t),o=t,(r=e)===(n=this).startContainer&&o===n.startOffset&&r===n.endContainer&&o===n.endOffset||d(n,r,o,r,o)}}),V(e)}function ee(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:u.getCommonAncestor(e.startContainer,e.endContainer)}function te(e,t,n,r,o){var i=e.startContainer!==t||e.startOffset!==n,a=e.endContainer!==r||e.endOffset!==o;e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=o,ee(e),d(e,"boundarychange",{startMoved:i,endMoved:a})}function ne(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},ee(this)}X.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){var n,r,o,i;H(this),k(this.startContainer,t.startContainer);var a=e==z||e==B?"start":"end",s=e==Q||e==B?"start":"end";return n=this[a+"Container"],r=this[a+"Offset"],o=t[s+"Container"],i=t[s+"Offset"],u.comparePoints(n,r,o,i)},insertNode:function(e){if(H(this),W(e,C),x(this.startContainer),u.isAncestorOf(e,this.startContainer,!0))throw new a("HIERARCHY_REQUEST_ERR");var t=n(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(H(this),this.collapsed)return l(this).createDocumentFragment();if(this.startContainer===this.endContainer&&u.isCharacterDataNode(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=l(this).createDocumentFragment()).appendChild(e),t;var n=new g(this,!0);return e=function e(t){for(var n,r,o,i=l(t.range).createDocumentFragment();r=t.next();){if(n=t.isPartiallySelectedSubtree(),r=r.cloneNode(!n),n&&(o=t.getSubtreeIterator(),r.appendChild(e(o)),o.detach(!0)),10==r.nodeType)throw new a("HIERARCHY_REQUEST_ERR");i.appendChild(r)}return i}(n),n.detach(),e},canSurroundContents:function(){H(this),x(this.startContainer),x(this.endContainer);var e=new g(this,!0),t=e._first&&s(e._first,this)||e._last&&s(e._last,this);return e.detach(),!t},surroundContents:function(e){if(W(e,S),!this.canSurroundContents())throw new _("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);n(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){H(this);for(var e,t=new ne(l(this)),n=D.length;n--;)t[e=D[n]]=this[e];return t},toString:function(){H(this);var e=this.startContainer;if(e===this.endContainer&&u.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new g(this,!0);return p(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){H(this);var t=e.parentNode,n=u.getNodeIndex(e);if(!t)throw new a("NOT_FOUND_ERR");var r=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return r<0?0<o?q:F:0<o?K:$},comparePoint:function(e,t){return H(this),O(e,"HIERARCHY_REQUEST_ERR"),k(e,this.startContainer),u.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:0<u.comparePoints(e,t,this.endContainer,this.endOffset)?1:0},createContextualFragment:P?function(e){var t=this.startContainer,n=u.getDocument(t);if(!t)throw new a("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:u.isCharacterDataNode(t)&&(r=u.parentElement(t)),(r=null===r||"HTML"==r.nodeName&&u.isHtmlNamespace(u.getDocument(r).documentElement)&&u.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1)).innerHTML=e,u.fragmentFromNodeChildren(r)}:function(e){L(this);var t=l(this).createElement("body");return t.innerHTML=e,u.fragmentFromNodeChildren(t)},toHtml:function(){H(this);var e=l(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(H(this),O(e,"NOT_FOUND_ERR"),u.getDocument(e)!==l(this))return!1;var n=e.parentNode,r=u.getNodeIndex(e);O(n,"NOT_FOUND_ERR");var o=u.comparePoints(n,r,this.endContainer,this.endOffset),i=u.comparePoints(n,r+1,this.startContainer,this.startOffset);return t?o<=0&&0<=i:o<0&&0<i},isPointInRange:function(e,t){return H(this),O(e,"HIERARCHY_REQUEST_ERR"),k(e,this.startContainer),0<=u.comparePoints(e,t,this.startContainer,this.startOffset)&&u.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(H(this),l(e)!=l(this))throw new a("WRONG_DOCUMENT_ERR");var n=u.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),r=u.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?n<=0&&0<=r:n<0&&0<r},intersection:function(e){if(this.intersectsRange(e)){var t=u.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=u.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==u.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==u.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new _("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==$},containsNodeContents:function(e){return 0<=this.comparePoint(e,0)&&this.comparePoint(e,u.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(0<n.length){t.setStart(n[0],0);var r=n.pop();t.setEnd(r,r.length);var o=this.containsRange(t);return t.detach(),o}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return H(this),new y(this,e,t)},getNodes:function(e,t){return H(this),o(this,e,t)},getDocument:function(){return l(this)},collapseBefore:function(e){L(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){L(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return ne.rangesEqual(this,e)},inspect:function(){return i(this)}},J(ne,te,function(e){L(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,d(e,"detach",null),e._listeners=null}),r.rangePrototype=X.prototype,ne.rangeProperties=D,ne.RangeIterator=g,ne.copyComparisonConstants=V,ne.createPrototypeRange=J,ne.inspect=i,ne.getRangeDocument=l,ne.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},r.DomRange=ne,r.RangeException=_}),rangy.createModule("WrappedRange",function(s,e){var l;s.requireModules(["DomUtil","DomRange"]);var g=s.dom,_=g.DomPosition,d=s.DomRange;function o(e,t,n,r){var o=e.duplicate();o.collapse(n);var i=o.parentElement();if(g.isAncestorOf(t,i,!0)||(i=t),!i.canHaveHTML)return new _(i.parentNode,g.getNodeIndex(i));for(var a,s,l,d,u,c=g.getDocument(i).createElement("span"),f=n?"StartToStart":"StartToEnd";i.insertBefore(c,c.previousSibling),o.moveToElementText(c),0<(a=o.compareEndPoints(f,e))&&c.previousSibling;);if(u=c.nextSibling,-1==a&&u&&g.isCharacterDataNode(u)){var p;if(o.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(u.data)){var h=o.duplicate(),m=h.text.replace(/\r\n/g,"\r").length;for(p=h.moveStart("character",m);-1==(a=h.compareEndPoints("StartToEnd",h));)p++,h.moveStart("character",1)}else p=o.text.length;d=new _(u,p)}else s=(r||!n)&&c.previousSibling,d=(l=(r||n)&&c.nextSibling)&&g.isCharacterDataNode(l)?new _(l,0):s&&g.isCharacterDataNode(s)?new _(s,s.length):new _(i,g.getNodeIndex(c));return c.parentNode.removeChild(c),d}function i(e,t){var n,r,o,i,a=e.offset,s=g.getDocument(e.node),l=s.body.createTextRange(),d=g.isCharacterDataNode(e.node);return d?r=(n=e.node).parentNode:(n=a<(i=e.node.childNodes).length?i[a]:null,r=e.node),(o=s.createElement("span")).innerHTML="&#feff;",n?r.insertBefore(o,n):r.appendChild(o),l.moveToElementText(o),l.collapse(!t),r.removeChild(o),d&&l[t?"moveStart":"moveEnd"]("character",a),l}if(!s.features.implementsDomRange||s.features.implementsTextRange&&s.config.preferTextRange){if(s.features.implementsTextRange){(l=function(e){this.textRange=e,this.refresh()}).prototype=new d(document),l.prototype.refresh=function(){var e,t,n,r=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();(n=e.duplicate()).collapse(!1);var o=n.parentElement(),i=r==o?r:g.getCommonAncestor(r,o);return i==t?i:g.getCommonAncestor(t,i)}(this.textRange);0==(n=this.textRange).compareEndPoints("StartToEnd",n)?t=e=o(this.textRange,r,!0,!0):(e=o(this.textRange,r,!0,!1),t=o(this.textRange,r,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},d.copyComparisonConstants(l);var t=function(){return this}();void 0===t.Range&&(t.Range=l),s.createNativeRange=function(e){return(e=e||document).body.createTextRange()}}}else!function(){var t,n,r=d.rangeProperties;function o(e){for(var t,n=r.length;n--;)e[t=r[n]]=e.nativeRange[t]}l=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,o(this)},d.createPrototypeRange(l,function(e,t,n,r,o){var i=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=o;(i||a)&&(e.setEnd(r,o),e.setStart(t,n))},function(e){e.nativeRange.detach(),e.detached=!0;for(var t=r.length;t--;)e[r[t]]=null}),(t=l.prototype).selectNode=function(e){this.nativeRange.selectNode(e),o(this)},t.deleteContents=function(){this.nativeRange.deleteContents(),o(this)},t.extractContents=function(){var e=this.nativeRange.extractContents();return o(this),e},t.cloneContents=function(){return this.nativeRange.cloneContents()},t.surroundContents=function(e){this.nativeRange.surroundContents(e),o(this)},t.collapse=function(e){this.nativeRange.collapse(e),o(this)},t.cloneRange=function(){return new l(this.nativeRange.cloneRange())},t.refresh=function(){o(this)},t.toString=function(){return this.nativeRange.toString()};var e=document.createTextNode("test");g.getBody(document).appendChild(e);var i=document.createRange();i.setStart(e,0),i.setEnd(e,0);try{i.setStart(e,1),!0,t.setStart=function(e,t){this.nativeRange.setStart(e,t),o(this)},t.setEnd=function(e,t){this.nativeRange.setEnd(e,t),o(this)},n=function(t){return function(e){this.nativeRange[t](e),o(this)}}}catch(e){!1,t.setStart=function(t,n){try{this.nativeRange.setStart(t,n)}catch(e){this.nativeRange.setEnd(t,n),this.nativeRange.setStart(t,n)}o(this)},t.setEnd=function(t,n){try{this.nativeRange.setEnd(t,n)}catch(e){this.nativeRange.setStart(t,n),this.nativeRange.setEnd(t,n)}o(this)},n=function(n,r){return function(t){try{this.nativeRange[n](t)}catch(e){this.nativeRange[r](t),this.nativeRange[n](t)}o(this)}}}t.setStartBefore=n("setStartBefore","setEndBefore"),t.setStartAfter=n("setStartAfter","setEndAfter"),t.setEndBefore=n("setEndBefore","setStartBefore"),t.setEndAfter=n("setEndAfter","setStartAfter"),i.selectNodeContents(e),i.startContainer==e&&i.endContainer==e&&0==i.startOffset&&i.endOffset==e.length?t.selectNodeContents=function(e){this.nativeRange.selectNodeContents(e),o(this)}:t.selectNodeContents=function(e){this.setStart(e,0),this.setEnd(e,d.getEndOffset(e))},i.selectNodeContents(e),i.setEnd(e,3);var a=document.createRange();a.selectNodeContents(e),a.setEnd(e,4),a.setStart(e,2),-1==i.compareBoundaryPoints(i.START_TO_END,a)&1==i.compareBoundaryPoints(i.END_TO_START,a)?t.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:t.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},s.util.isHostMethod(i,"createContextualFragment")&&(t.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),g.getBody(document).removeChild(e),i.detach(),a.detach()}(),s.createNativeRange=function(e){return(e=e||document).createRange()};s.features.implementsTextRange&&(l.rangeToTextRange=function(e){if(e.collapsed)return i(new _(e.startContainer,e.startOffset),!0);var t=i(new _(e.startContainer,e.startOffset),!0),n=i(new _(e.endContainer,e.endOffset),!1),r=g.getDocument(e.startContainer).body.createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r}),l.prototype.getName=function(){return"WrappedRange"},s.WrappedRange=l,s.createRange=function(e){return e=e||document,new l(s.createNativeRange(e))},s.createRangyRange=function(e){return e=e||document,new d(e)},s.createIframeRange=function(e){return s.createRange(g.getIframeDocument(e))},s.createIframeRangyRange=function(e){return s.createRangyRange(g.getIframeDocument(e))},s.addCreateMissingNativeApiListener(function(e){var t=e.document;void 0===t.createRange&&(t.createRange=function(){return s.createRange(this)}),t=e=null})}),rangy.createModule("WrappedSelection",function(i,e){i.requireModules(["DomUtil","DomRange","WrappedRange"]),i.config.checkSelectionRanges=!0;var o,a,s="_rangySelection",l=i.dom,t=i.util,d=i.DomRange,u=i.WrappedRange,n=i.DOMException,c=l.DomPosition,f="Control";function p(e){return(e||window).document.selection}var r=i.util.isHostMethod(window,"getSelection"),h=i.util.isHostObject(document,"selection"),m=h&&(!r||i.config.preferTextRange);m?(o=p,i.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return"None"!=n.type||l.getDocument(n.createRange().parentElement())==t}):r?(o=function(e){return(e||window).getSelection()},i.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected.");var g=(i.getNativeSelection=o)(),_=i.createNativeRange(document),y=l.getBody(document),v=t.areHostObjects(g,t.areHostProperties(g,["anchorOffset","focusOffset"]));i.features.selectionHasAnchorAndFocus=v;var b=t.isHostMethod(g,"extend");i.features.selectionHasExtend=b;var C="number"==typeof g.rangeCount;i.features.selectionHasRangeCount=C;var S=!1,T=!0;t.areHostMethods(g,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof g.rangeCount&&i.features.implementsDomRange&&function(){var e=document.createElement("iframe");y.appendChild(e);var t=l.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=l.getIframeWindow(e).getSelection(),r=t.documentElement.lastChild.firstChild,o=t.createRange();o.setStart(r,1),o.collapse(!0),n.addRange(o),T=1==n.rangeCount,n.removeAllRanges();var i=o.cloneRange();o.setStart(r,0),i.setEnd(r,2),n.addRange(o),n.addRange(i),S=2==n.rangeCount,o.detach(),i.detach(),y.removeChild(e)}(),i.features.selectionSupportsMultipleRanges=S,i.features.collapsedNonEditableSelectionsSupported=T;var w,E,M=!1;function N(e,t,n){var r=n?"end":"start",o=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function R(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function L(e){var t;return e instanceof d?(t=e._selectionNativeRange)||((t=i.createNativeRange(l.getDocument(e.startContainer))).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=t,e.attachListener("detach",function(){this._selectionNativeRange=null})):e instanceof u?t=e.nativeRange:i.features.implementsDomRange&&e instanceof l.getWindow(e.startContainer).Range&&(t=e),t}function W(e){var t=e.getNodes();if(!function(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!l.isAncestorOf(e[0],e[t]))return!1;return!0}(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function I(e){return!!e&&void 0!==e.text}function k(e,t){var n=new u(t);e._ranges=[n],N(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function x(e){if(e._ranges.length=0,"None"==e.docSelection.type)R(e);else{var t=e.docSelection.createRange();if(I(t))k(e,t);else{e.rangeCount=t.length;for(var n,r=l.getDocument(t.item(0)),o=0;o<e.rangeCount;++o)(n=i.createRange(r)).selectNode(t.item(o)),e._ranges.push(n);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,N(e,e._ranges[e.rangeCount-1],!1)}}}function O(e,t){for(var n=e.docSelection.createRange(),r=W(t),o=l.getDocument(n.item(0)),i=l.getBody(o).createControlRange(),a=0,s=n.length;a<s;++a)i.add(n.item(a));try{i.add(r)}catch(e){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}i.select(),x(e)}function A(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}y&&t.isHostMethod(y,"createControlRange")&&(w=y.createControlRange(),t.areHostProperties(w,["item","add"])&&(M=!0)),i.features.implementsControlRange=M,a=v?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},t.isHostMethod(g,"getRangeAt")?E=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:v&&(E=function(e){var t=l.getDocument(e.anchorNode),n=i.createRange(t);return n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(e.focusNode,e.focusOffset),n.setEnd(e.anchorNode,e.anchorOffset)),n}),i.getSelection=function(e){var t=(e=e||window)[s],n=o(e),r=h?p(e):null;return t?(t.nativeSelection=n,t.docSelection=r,t.refresh(e)):(t=new A(n,r,e),e[s]=t),t},i.getIframeSelection=function(e){return i.getSelection(l.getIframeWindow(e))};var Y,H=A.prototype;function j(e,t){for(var n,r=l.getDocument(t[0].startContainer),o=l.getBody(r).createControlRange(),i=0;i<rangeCount;++i){n=W(t[i]);try{o.add(n)}catch(e){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),x(e)}if(!m&&v&&t.areHostMethods(g,["removeAllRanges","addRange"])){H.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),R(this)};var P=function(e,t){var n=d.getRangeDocument(t),r=i.createRange(n);r.collapseToPoint(t.endContainer,t.endOffset),e.nativeSelection.addRange(L(r)),e.nativeSelection.extend(t.startContainer,t.startOffset),e.refresh()};H.addRange=C?function(e,t){var n;if(M&&h&&this.docSelection.type==f)O(this,e);else if(t&&b)P(this,e);else if(S?n=this.rangeCount:(this.removeAllRanges(),n=0),this.nativeSelection.addRange(L(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==n+1){if(i.config.checkSelectionRanges){var r=E(this.nativeSelection,this.rangeCount-1);r&&!d.rangesEqual(r,e)&&(e=new u(r))}this._ranges[this.rangeCount-1]=e,N(this,e,D(this.nativeSelection)),this.isCollapsed=a(this)}else this.refresh()}:function(e,t){t&&b?P(this,e):(this.nativeSelection.addRange(L(e)),this.refresh())},H.setRanges=function(e){if(M&&1<e.length)j(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(t.isHostMethod(g,"empty")&&t.isHostMethod(_,"select")&&M&&m))return e.fail("No means of selecting a Range or TextRange was found"),!1;H.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=l.getDocument(this.anchorNode);else if(this.docSelection.type==f){var t=this.docSelection.createRange();t.length&&(e=l.getDocument(t.item(0)).body.createTextRange())}if(e)e.body.createTextRange().select(),this.docSelection.empty()}}catch(e){}R(this)},H.addRange=function(e){this.docSelection.type==f?O(this,e):(u.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,N(this,e,!1))},H.setRanges=function(e){this.removeAllRanges();var t=e.length;1<t?j(this,e):t&&this.addRange(e[0])}}if(H.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new n("INDEX_SIZE_ERR");return this._ranges[e]},m)Y=function(e){var t;i.isSelectionValid(e.win)?t=e.docSelection.createRange():(t=l.getBody(e.win.document).createTextRange()).collapse(!0),e.docSelection.type==f?x(e):I(t)?k(e,t):R(e)};else if(t.isHostMethod(g,"getRangeAt")&&"number"==typeof g.rangeCount)Y=function(e){if(M&&h&&e.docSelection.type==f)x(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new i.WrappedRange(e.nativeSelection.getRangeAt(t));N(e,e._ranges[e.rangeCount-1],D(e.nativeSelection)),e.isCollapsed=a(e)}else R(e)};else{if(!v||"boolean"!=typeof g.isCollapsed||"boolean"!=typeof _.collapsed||!i.features.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Y=function(e){var t,n,r,o=e.nativeSelection;o.anchorNode?(t=E(o,0),e._ranges=[t],e.rangeCount=1,r=(n=e).nativeSelection,n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset,e.isCollapsed=a(e)):R(e)}}H.refresh=function(e){var t=e?this._ranges.slice(0):null;if(Y(this),e){var n=t.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!d.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var D,B=function(e,t){var n=e.getAllRanges(),r=!1;e.removeAllRanges();for(var o=0,i=n.length;o<i;++o)r||t!==n[o]?e.addRange(n[o]):r=!0;e.rangeCount||R(e)};function Q(e,t){if(e.anchorNode&&l.getDocument(e.anchorNode)!==l.getDocument(t))throw new n("WRONG_DOCUMENT_ERR")}function U(e){var t=[],n=new c(e.anchorNode,e.anchorOffset),r=new c(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var i=0,a=e.rangeCount;i<a;++i)t[i]=d.inspect(e.getRangeAt(i));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}H.removeRange=M?function(e){if(this.docSelection.type==f){for(var t=this.docSelection.createRange(),n=W(e),r=l.getDocument(t.item(0)),o=l.getBody(r).createControlRange(),i=!1,a=0,s=t.length;a<s;++a)t.item(a)!==n||i?o.add(t.item(a)):i=!0;o.select(),x(this)}else B(this,e)}:function(e){B(this,e)},!m&&v&&i.features.implementsDomRange?(D=function(e){var t=!1;return e.anchorNode&&(t=1==l.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},H.isBackwards=function(){return D(this)}):D=H.isBackwards=function(){return!1},H.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},H.collapse=function(e,t){Q(this,e);var n=i.createRange(l.getDocument(e));n.collapseToPoint(e,t),this.removeAllRanges(),this.addRange(n),this.isCollapsed=!0},H.collapseToStart=function(){if(!this.rangeCount)throw new n("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},H.collapseToEnd=function(){if(!this.rangeCount)throw new n("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},H.selectAllChildren=function(e){Q(this,e);var t=i.createRange(l.getDocument(e));t.selectNodeContents(e),this.removeAllRanges(),this.addRange(t)},H.deleteFromDocument=function(){if(M&&h&&this.docSelection.type==f){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var r=0,o=n.length;r<o;++r)n[r].deleteContents();this.addRange(n[o-1])}},H.getAllRanges=function(){return this._ranges.slice(0)},H.setSingleRange=function(e){this.setRanges([e])},H.containsNode=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},H.toHtml=function(){var e="";if(this.rangeCount){for(var t=d.getRangeDocument(this._ranges[0]).createElement("div"),n=0,r=this._ranges.length;n<r;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},H.getName=function(){return"WrappedSelection"},H.inspect=function(){return U(this)},H.detach=function(){this.win[s]=null,this.win=this.anchorNode=this.focusNode=null},A.inspect=U,i.Selection=A,i.selectionPrototype=H,i.addCreateMissingNativeApiListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return i.getSelection(this)}),e=null})}),rangy.createModule("SaveRestore",function(c,f){c.requireModules(["DomUtil","DomRange","WrappedRange"]);var a=c.dom,s="\ufeff";function p(e,t){return(t||document).getElementById(e)}function u(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=a.getDocument(e.startContainer),i=e.cloneRange();return i.collapse(t),(n=o.createElement("span")).id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(o.createTextNode(s)),i.insertNode(n),i.detach(),n}function h(e,t,n,r){var o=p(n,e);o?(t[r?"setStartBefore":"setEndBefore"](o),o.parentNode.removeChild(o)):f.warn("Marker element has been removed. Cannot restore selection.")}function m(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function i(e,t){var n=p(t,e);n&&n.parentNode.removeChild(n)}c.saveSelection=function(e){var t=(e=e||window).document;if(c.isSelectionValid(e)){var n,r,o,i=c.getSelection(e),a=i.getAllRanges(),s=[];a.sort(m);for(var l=0,d=a.length;l<d;++l)(o=a[l]).collapsed?(r=u(o,!1),s.push({markerId:r.id,collapsed:!0})):(r=u(o,!1),n=u(o,!0),s[l]={startMarkerId:n.id,endMarkerId:r.id,collapsed:!1,backwards:1==a.length&&i.isBackwards()});for(l=d-1;0<=l;--l)(o=a[l]).collapsed?o.collapseBefore(p(s[l].markerId,t)):(o.setEndBefore(p(s[l].endMarkerId,t)),o.setStartAfter(p(s[l].startMarkerId,t)));return i.setRanges(a),{win:e,doc:t,rangeInfos:s,restored:!1}}f.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.")},c.restoreSelection=function(e,t){if(!e.restored){for(var n,r,o=e.rangeInfos,i=c.getSelection(e.win),a=[],s=o.length,l=s-1;0<=l;--l){if(n=o[l],r=c.createRange(e.doc),n.collapsed){var d=p(n.markerId,e.doc);if(d){d.style.display="inline";var u=d.previousSibling;u&&3==u.nodeType?(d.parentNode.removeChild(d),r.collapseToPoint(u,u.length)):(r.collapseBefore(d),d.parentNode.removeChild(d))}else f.warn("Marker element has been removed. Cannot restore selection.")}else h(e.doc,r,n.startMarkerId,!0),h(e.doc,r,n.endMarkerId,!1);1==s&&r.normalizeBoundaries(),a[l]=r}1==s&&t&&c.features.selectionHasExtend&&o[0].backwards?(i.removeAllRanges(),i.addRange(a[0],!0)):i.setRanges(a),e.restored=!0}},c.removeMarkerElement=i,c.removeMarkers=function(e){for(var t,n=e.rangeInfos,r=0,o=n.length;r<o;++r)(t=n[r]).collapsed?i(e.doc,t.markerId):(i(e.doc,t.startMarkerId),i(e.doc,t.endMarkerId))}}),WYMeditor.SKINS.compact={init:function(e){jQuery(e._options.containersSelector+", "+e._options.classesSelector,e._box).appendTo(jQuery("div.wym_area_top",e._box)).addClass("wym_dropdown").css({"margin-right":"10px",width:"120px",float:"left"}),jQuery(e._options.toolsSelector,e._box).addClass("wym_buttons").css({"margin-right":"10px",float:"left"}),jQuery(".wym_section",e._box).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")});var t=e._options.postInit;e._options.postInit=function(e){t&&t.call(e,e),e.$body().css("background-color","#f0f0f0")}}},WYMeditor.SKINS.default={init:function(e){jQuery(e._box).find(e._options.classesSelector).addClass("wym_panel"),jQuery(e._box).find(e._options.toolsSelector).addClass("wym_buttons"),jQuery(e._box).find(e._options.containersSelector).addClass("wym_dropdown").find(WYMeditor.H2).append("<span> ></span>"),jQuery(e._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(e._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-left":"155px"}),jQuery(e._box).find(".wym_section").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})}},WYMeditor.SKINS.legacy={init:function(e){jQuery(e._box).find(e._options.classesSelector).addClass("wym_panel"),jQuery(e._box).find(e._options.toolsSelector).addClass("wym_buttons"),jQuery(e._box).find(e._options.containersSelector).addClass("wym_dropdown").find(WYMeditor.H2).append("<span> ></span>"),jQuery(e._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(e._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-left":"155px"}),jQuery(e._box).find(".wym_section").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})}},jQuery.fn.selectify=function(){return this.each(function(){jQuery(this).hover(function(){jQuery("h2",this).css("background-position","0px -18px"),jQuery("ul",this).fadeIn("fast")},function(){jQuery("h2",this).css("background-position",""),jQuery("ul",this).fadeOut("fast")})})},WYMeditor.SKINS.minimal={init:function(e){jQuery(e._box).find(e._options.toolsSelector+", "+e._options.containersSelector+", "+e._options.classesSelector).addClass("wym_dropdown").selectify()}},function(o){var i=function(e,t){this.options=o.extend({},o.fn.wymAffix.defaults,t),this.$window=o(window),this.$window.bind("scroll.affix.data-api",o.proxy(this.checkPosition,this)),this.$window.bind("click.affix.data-api",o.proxy(function(){setTimeout(o.proxy(this.checkPosition,this),1)},this)),this.$element=o(e),this.checkPosition()};i.prototype.checkPosition=function(){var e,t=this.$window.scrollTop(),n=this.options.offset,r=n.bottom,o=n.top,i=!0,a=!0;"object"!=typeof n&&(r=o=n),"function"==typeof o&&(o=n.top()),"function"==typeof r&&(r=n.bottom()),null!==o&&(i=o<t),null!==r&&(a=t+this.$element.height()<r),e=i&&a?"affix":!1===a?"affix-bottom":"affix-top",this.currentAffixType!==e&&(this.$element.removeClass("affix affix-top affix-bottom").addClass(e),this.currentAffixType=e)},o.fn.wymAffix=function(r){return this.each(function(){var e=o(this),t=e.data("affix"),n="object"==typeof r&&r;t||e.data("affix",t=new i(this,n)),"string"==typeof r&&t[r]()})},o.fn.wymAffix.Constructor=i,o.fn.wymAffix.defaults={offset:0}}(jQuery),WYMeditor.SKINS.seamless={OPTS:{iframeHtml:["",'<div class="wym_iframe wym_section">','<iframe src="'+WYMeditor.IFRAME_BASE_PATH+'wymiframe.html" ','frameborder="0" ','border="0" ','scrolling="no" ','marginheight="0px" ','marginwidth="0px" ',">","</iframe>","</div>"].join(""),initIframeCheckFrequency:50,imagesLoadedCheckFrequency:300,imagesLoadedCheckTimeout:5e3},init:function(e){var t=WYMeditor.SKINS.seamless;Date.now||(Date.now=function(){return(new Date).getTime()}),e.seamlessSkinOpts=jQuery.extend(t.OPTS,{initialIframeResizeTimer:null,resizeAfterImagesLoadTimer:null,_imagesLoadedCheckStartedTime:0,minimumHeight:jQuery(e.element).height()}),t.initUIChrome(e),jQuery(e.element).bind(WYMeditor.EVENTS.postIframeInitialization,t.postIframeInit)},postIframeInit:function(e,t){var n=WYMeditor.SKINS.seamless;n.resizeIframeOnceBodyExists(t),jQuery(t.element).bind(WYMeditor.EVENTS.postBlockMaybeCreated,function(){n.resizeAndScrollIfNeeded(t)})},initUIChrome:function(e){var t,n=WYMeditor.SKINS.seamless,r=jQuery([e._options.containersSelector,e._options.classesSelector].join(", "),e._box);t=jQuery("div.wym_area_top",e._box),r.appendTo(t),r.addClass("wym_dropdown"),jQuery(".wym_dropdown",e._box).click(function(){jQuery(this).toggleClass("hover")}),jQuery(e._options.toolsSelector,e._box).addClass("wym_buttons"),n.affixTopControls(e)},affixTopControls:function(e){var t,n,r,o;t=jQuery("div.wym_area_top",e._box),n=jQuery('<div class="wym_skin_seamless wym_area_top_wrapper">'),t.wrap(n),(n=t.parent()).wrap('<div class="wym_area_top_affix_placeholder">'),(o=n.parent()).height(t.height()),(r=function(){n.width(o.width())})(),jQuery(window).resize(r),n.wymAffix({offset:{top:function(){return o.offset().top-5},bottom:function(){return o.offset().top+e.seamlessSkinIframeHeight}}})},resizeIframeOnceBodyExists:function(e){var t=WYMeditor.SKINS.seamless;e.seamlessSkinOpts.initialIframeResizeTimer&&(window.clearTimeout(e.seamlessSkinOpts.initialIframeResizeTimer),e.seamlessSkinOpts.initialIframeResizeTimer=null),void 0!==e._doc.body&&null!==e._doc.body?(e._doc.body.scrollHeight,t.resizeIframe(e),t.resizeIframeOnceImagesLoaded(e)):e.seamlessSkinOpts.initialIframeResizeTimer=window.setTimeout(function(){t.resizeIframeOnceBodyExists(e)},e.seamlessSkinOpts.initIframeCheckFrequency)},resizeIframeOnceImagesLoaded:function(e){var t,n,r=WYMeditor.SKINS.seamless,o=0,i=!0,a=e.seamlessSkinOpts;if(void 0!==a._imagesLoadedCheckStartedTime&&0!==a._imagesLoadedCheckStartedTime||(a._imagesLoadedCheckStartedTime=Date.now()),null!==a.resizeAfterImagesLoadTimer&&(window.clearTimeout(a.resizeAfterImagesLoadTimer),a.resizeAfterImagesLoadTimer=null),0!==(n=(t=e.$body().find("img")).length)){for(o=0;o<n;o+=1)if(!r._imageIsLoaded(t[o])){i=!1;break}r.resizeAndScrollIfNeeded(e),!0!==i?Date.now()-a._imagesLoadedCheckStartedTime>a.imagesLoadedCheckTimeout?a._imagesLoadedCheckStartedTime=0:a.resizeAfterImagesLoadTimer=window.setTimeout(function(){r.resizeIframeOnceImagesLoaded(e)},a.imagesLoadedCheckFrequency):a._imagesLoadedCheckStartedTime=0}},_imageIsLoaded:function(e){return!0===e.complete&&(void 0===e.naturalWidth||0!==e.naturalWidth)},_getIframeHeightStrategy:function(e){var t,n,r,o;if(n=jQuery(e._doc).children().eq(0),t=e._doc.body.scrollHeight,r=n.height(),o=n[0].scrollHeight,WYMeditor.isInternetExplorerPre11())return function(e){return jQuery(e._doc).children().eq(0)[0].scrollHeight-10};if(t<=r)return function(e){return jQuery(e._doc).children().eq(0).height()};if(o<t)return function(e){return e._doc.body.scrollHeight};throw new Error("unsupported browser")},resizeIframe:function(e){var t,n=WYMeditor.SKINS.seamless,r=jQuery(e._iframe),o=r.height();return void 0===WYMeditor.IFRAME_HEIGHT_GETTER&&(WYMeditor.IFRAME_HEIGHT_GETTER=n._getIframeHeightStrategy(e)),(t=WYMeditor.IFRAME_HEIGHT_GETTER(e))<e.seamlessSkinOpts.minimumHeight&&(t=e.seamlessSkinOpts.minimumHeight),o!==t&&(r.height(t),e.seamlessSkinIframeHeight=t,!0)},scrollIfNeeded:function(e){var t,n,r,o=jQuery(e._iframe).offset().top,i=jQuery(e.selectedContainer()),a=i.offset(),s=jQuery(window),l=jQuery(document.body);0!==i.length&&(t=o+a.top,0<(r=(t+=i.outerHeight())-(s.scrollTop()+s.height()))&&(n=l.scrollTop()+r+20,l.scrollTop(n)))},resizeAndScrollIfNeeded:function(e){var t=WYMeditor.SKINS.seamless;!0===t.resizeIframe(e)&&t.scrollIfNeeded(e)}},jQuery.fn.selectify=function(){return this.each(function(){jQuery(this).hover(function(){jQuery("h2",this).css("background-position","0px -18px"),jQuery("ul",this).fadeIn("fast")},function(){jQuery("h2",this).css("background-position",""),jQuery("ul",this).fadeOut("fast")})})},WYMeditor.SKINS.silver={init:function(e){jQuery(e._box).append('<div class="clear"></div>').wrapInner('<div class="wym_inner"></div>'),jQuery(e._box).find(e._options.classesSelector).addClass("wym_panel"),jQuery(e._box).find(e._options.toolsSelector).addClass("wym_buttons"),jQuery(e._box).find(e._options.containersSelector).addClass("wym_dropdown").selectify(),jQuery(e._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(e._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-left":"155px"}),jQuery(e._box).find(".wym_section").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})}},WYMeditor.SKINS.twopanels={init:function(e){jQuery(e._box).find(e._options.containersSelector).appendTo("div.wym_area_left"),jQuery(e._box).find(e._options.classesSelector+", "+e._options.containersSelector).addClass("wym_panel"),jQuery(e._box).find(e._options.toolsSelector).addClass("wym_buttons"),jQuery(e._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(e._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(e._options.boxSelector).find("div.wym_area_main").css({"margin-left":"115px"}),jQuery(e._box).find(".wym_section").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})}};